var Mh=t=>{throw TypeError(t)};var oc=(t,e,s)=>e.has(t)||Mh("Cannot "+s);var _=(t,e,s)=>(oc(t,e,"read from private field"),s?s.call(t):e.get(t)),K=(t,e,s)=>e.has(t)?Mh("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),U=(t,e,s,r)=>(oc(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),X=(t,e,s)=>(oc(t,e,"access private method"),s);var Za=(t,e,s,r)=>({set _(i){U(t,e,i,s)},get _(){return _(t,e,r)}});function my(t,e){for(var s=0;s<e.length;s++){const r=e[s];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();var Ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function py(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),s}var sp={exports:{}},So={},rp={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La=Symbol.for("react.element"),gy=Symbol.for("react.portal"),xy=Symbol.for("react.fragment"),yy=Symbol.for("react.strict_mode"),vy=Symbol.for("react.profiler"),by=Symbol.for("react.provider"),wy=Symbol.for("react.context"),jy=Symbol.for("react.forward_ref"),_y=Symbol.for("react.suspense"),Ny=Symbol.for("react.memo"),ky=Symbol.for("react.lazy"),zh=Symbol.iterator;function Sy(t){return t===null||typeof t!="object"?null:(t=zh&&t[zh]||t["@@iterator"],typeof t=="function"?t:null)}var np={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ip=Object.assign,ap={};function wi(t,e,s){this.props=t,this.context=e,this.refs=ap,this.updater=s||np}wi.prototype.isReactComponent={};wi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lp(){}lp.prototype=wi.prototype;function xu(t,e,s){this.props=t,this.context=e,this.refs=ap,this.updater=s||np}var yu=xu.prototype=new lp;yu.constructor=xu;ip(yu,wi.prototype);yu.isPureReactComponent=!0;var Bh=Array.isArray,op=Object.prototype.hasOwnProperty,vu={current:null},cp={key:!0,ref:!0,__self:!0,__source:!0};function dp(t,e,s){var r,i={},a=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)op.call(e,r)&&!cp.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=s;else if(1<c){for(var o=Array(c),d=0;d<c;d++)o[d]=arguments[d+2];i.children=o}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:La,type:t,key:a,ref:l,props:i,_owner:vu.current}}function Cy(t,e){return{$$typeof:La,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bu(t){return typeof t=="object"&&t!==null&&t.$$typeof===La}function Ey(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var Vh=/\/+/g;function cc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ey(""+t.key):e.toString(36)}function Nl(t,e,s,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case La:case gy:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+cc(l,0):r,Bh(i)?(s="",t!=null&&(s=t.replace(Vh,"$&/")+"/"),Nl(i,e,s,"",function(d){return d})):i!=null&&(bu(i)&&(i=Cy(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Vh,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",Bh(t))for(var c=0;c<t.length;c++){a=t[c];var o=r+cc(a,c);l+=Nl(a,e,s,o,i)}else if(o=Sy(t),typeof o=="function")for(t=o.call(t),c=0;!(a=t.next()).done;)a=a.value,o=r+cc(a,c++),l+=Nl(a,e,s,o,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function el(t,e,s){if(t==null)return t;var r=[],i=0;return Nl(t,r,"","",function(a){return e.call(s,a,i++)}),r}function Py(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var yt={current:null},kl={transition:null},Oy={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:kl,ReactCurrentOwner:vu};function up(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:el,forEach:function(t,e,s){el(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return el(t,function(){e++}),e},toArray:function(t){return el(t,function(e){return e})||[]},only:function(t){if(!bu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=wi;re.Fragment=xy;re.Profiler=vy;re.PureComponent=xu;re.StrictMode=yy;re.Suspense=_y;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oy;re.act=up;re.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ip({},t.props),i=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=vu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(o in e)op.call(e,o)&&!cp.hasOwnProperty(o)&&(r[o]=e[o]===void 0&&c!==void 0?c[o]:e[o])}var o=arguments.length-2;if(o===1)r.children=s;else if(1<o){c=Array(o);for(var d=0;d<o;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:La,type:t.type,key:i,ref:a,props:r,_owner:l}};re.createContext=function(t){return t={$$typeof:wy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:by,_context:t},t.Consumer=t};re.createElement=dp;re.createFactory=function(t){var e=dp.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:jy,render:t}};re.isValidElement=bu;re.lazy=function(t){return{$$typeof:ky,_payload:{_status:-1,_result:t},_init:Py}};re.memo=function(t,e){return{$$typeof:Ny,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=kl.transition;kl.transition={};try{t()}finally{kl.transition=e}};re.unstable_act=up;re.useCallback=function(t,e){return yt.current.useCallback(t,e)};re.useContext=function(t){return yt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return yt.current.useDeferredValue(t)};re.useEffect=function(t,e){return yt.current.useEffect(t,e)};re.useId=function(){return yt.current.useId()};re.useImperativeHandle=function(t,e,s){return yt.current.useImperativeHandle(t,e,s)};re.useInsertionEffect=function(t,e){return yt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return yt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return yt.current.useMemo(t,e)};re.useReducer=function(t,e,s){return yt.current.useReducer(t,e,s)};re.useRef=function(t){return yt.current.useRef(t)};re.useState=function(t){return yt.current.useState(t)};re.useSyncExternalStore=function(t,e,s){return yt.current.useSyncExternalStore(t,e,s)};re.useTransition=function(){return yt.current.useTransition()};re.version="18.3.1";rp.exports=re;var N=rp.exports;const At=fy(N),Ty=my({__proto__:null,default:At},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay=N,Ry=Symbol.for("react.element"),Dy=Symbol.for("react.fragment"),Iy=Object.prototype.hasOwnProperty,Fy=Ay.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$y={key:!0,ref:!0,__self:!0,__source:!0};function hp(t,e,s){var r,i={},a=null,l=null;s!==void 0&&(a=""+s),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)Iy.call(e,r)&&!$y.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Ry,type:t,key:a,ref:l,props:i,_owner:Fy.current}}So.Fragment=Dy;So.jsx=hp;So.jsxs=hp;sp.exports=So;var n=sp.exports,mp={exports:{}},$t={},fp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var Z=B.length;B.push(Y);e:for(;0<Z;){var me=Z-1>>>1,Oe=B[me];if(0<i(Oe,Y))B[me]=Y,B[Z]=Oe,Z=me;else break e}}function s(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],Z=B.pop();if(Z!==Y){B[0]=Z;e:for(var me=0,Oe=B.length,L=Oe>>>1;me<L;){var te=2*(me+1)-1,ae=B[te],ve=te+1,Ue=B[ve];if(0>i(ae,Z))ve<Oe&&0>i(Ue,ae)?(B[me]=Ue,B[ve]=Z,me=ve):(B[me]=ae,B[te]=Z,me=te);else if(ve<Oe&&0>i(Ue,Z))B[me]=Ue,B[ve]=Z,me=ve;else break e}}return Y}function i(B,Y){var Z=B.sortIndex-Y.sortIndex;return Z!==0?Z:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var o=[],d=[],u=1,h=null,m=3,g=!1,v=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(B){for(var Y=s(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=B)r(d),Y.sortIndex=Y.expirationTime,e(o,Y);else break;Y=s(d)}}function y(B){if(b=!1,f(B),!v)if(s(o)!==null)v=!0,Ne(j);else{var Y=s(d);Y!==null&&Je(y,Y.startTime-B)}}function j(B,Y){v=!1,b&&(b=!1,x(S),S=-1),g=!0;var Z=m;try{for(f(Y),h=s(o);h!==null&&(!(h.expirationTime>Y)||B&&!R());){var me=h.callback;if(typeof me=="function"){h.callback=null,m=h.priorityLevel;var Oe=me(h.expirationTime<=Y);Y=t.unstable_now(),typeof Oe=="function"?h.callback=Oe:h===s(o)&&r(o),f(Y)}else r(o);h=s(o)}if(h!==null)var L=!0;else{var te=s(d);te!==null&&Je(y,te.startTime-Y),L=!1}return L}finally{h=null,m=Z,g=!1}}var E=!1,P=null,S=-1,C=5,T=-1;function R(){return!(t.unstable_now()-T<C)}function D(){if(P!==null){var B=t.unstable_now();T=B;var Y=!0;try{Y=P(!0,B)}finally{Y?F():(E=!1,P=null)}}else E=!1}var F;if(typeof p=="function")F=function(){p(D)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,ce=M.port2;M.port1.onmessage=D,F=function(){ce.postMessage(null)}}else F=function(){w(D,0)};function Ne(B){P=B,E||(E=!0,F())}function Je(B,Y){S=w(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,Ne(j))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return s(o)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var Z=m;m=Y;try{return B()}finally{m=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=m;m=B;try{return Y()}finally{m=Z}},t.unstable_scheduleCallback=function(B,Y,Z){var me=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?me+Z:me):Z=me,B){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=Z+Oe,B={id:u++,callback:Y,priorityLevel:B,startTime:Z,expirationTime:Oe,sortIndex:-1},Z>me?(B.sortIndex=Z,e(d,B),s(o)===null&&B===s(d)&&(b?(x(S),S=-1):b=!0,Je(y,Z-me))):(B.sortIndex=Oe,e(o,B),v||g||(v=!0,Ne(j))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var Y=m;return function(){var Z=m;m=Y;try{return B.apply(this,arguments)}finally{m=Z}}}})(pp);fp.exports=pp;var Ly=fp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy=N,Ft=Ly;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gp=new Set,ca={};function gn(t,e){hi(t,e),hi(t+"Capture",e)}function hi(t,e){for(ca[t]=e,t=0;t<e.length;t++)gp.add(e[t])}var $s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vc=Object.prototype.hasOwnProperty,Uy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wh={},Kh={};function My(t){return Vc.call(Kh,t)?!0:Vc.call(Wh,t)?!1:Uy.test(t)?Kh[t]=!0:(Wh[t]=!0,!1)}function zy(t,e,s,r){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function By(t,e,s,r){if(e===null||typeof e>"u"||zy(t,e,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vt(t,e,s,r,i,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var wu=/[\-:]([a-z])/g;function ju(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wu,ju);et[e]=new vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wu,ju);et[e]=new vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wu,ju);et[e]=new vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new vt(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function _u(t,e,s,r){var i=et.hasOwnProperty(e)?et[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(By(e,s,i,r)&&(s=null),r||i===null?My(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(e=i.attributeName,r=i.attributeNamespace,s===null?t.removeAttribute(e):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,r?t.setAttributeNS(r,e,s):t.setAttribute(e,s))))}var Bs=qy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tl=Symbol.for("react.element"),Tn=Symbol.for("react.portal"),An=Symbol.for("react.fragment"),Nu=Symbol.for("react.strict_mode"),Wc=Symbol.for("react.profiler"),xp=Symbol.for("react.provider"),yp=Symbol.for("react.context"),ku=Symbol.for("react.forward_ref"),Kc=Symbol.for("react.suspense"),Qc=Symbol.for("react.suspense_list"),Su=Symbol.for("react.memo"),Gs=Symbol.for("react.lazy"),vp=Symbol.for("react.offscreen"),Qh=Symbol.iterator;function Ti(t){return t===null||typeof t!="object"?null:(t=Qh&&t[Qh]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,dc;function zi(t){if(dc===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);dc=e&&e[1]||""}return`
`+dc+t}var uc=!1;function hc(t,e){if(!t||uc)return"";uc=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=r.stack.split(`
`),l=i.length-1,c=a.length-1;1<=l&&0<=c&&i[l]!==a[c];)c--;for(;1<=l&&0<=c;l--,c--)if(i[l]!==a[c]){if(l!==1||c!==1)do if(l--,c--,0>c||i[l]!==a[c]){var o=`
`+i[l].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=l&&0<=c);break}}}finally{uc=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?zi(t):""}function Vy(t){switch(t.tag){case 5:return zi(t.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 2:case 15:return t=hc(t.type,!1),t;case 11:return t=hc(t.type.render,!1),t;case 1:return t=hc(t.type,!0),t;default:return""}}function Hc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case An:return"Fragment";case Tn:return"Portal";case Wc:return"Profiler";case Nu:return"StrictMode";case Kc:return"Suspense";case Qc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yp:return(t.displayName||"Context")+".Consumer";case xp:return(t._context.displayName||"Context")+".Provider";case ku:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Su:return e=t.displayName||null,e!==null?e:Hc(t.type)||"Memo";case Gs:e=t._payload,t=t._init;try{return Hc(t(e))}catch{}}return null}function Wy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hc(e);case 8:return e===Nu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Er(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ky(t){var e=bp(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sl(t){t._valueTracker||(t._valueTracker=Ky(t))}function wp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),r="";return t&&(r=bp(t)?t.checked?"true":"false":t.value),t=r,t!==s?(e.setValue(t),!0):!1}function ql(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gc(t,e){var s=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Hh(t,e){var s=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;s=Er(e.value!=null?e.value:s),t._wrapperState={initialChecked:r,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jp(t,e){e=e.checked,e!=null&&_u(t,"checked",e,!1)}function Jc(t,e){jp(t,e);var s=Er(e.value),r=e.type;if(s!=null)r==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yc(t,e.type,s):e.hasOwnProperty("defaultValue")&&Yc(t,e.type,Er(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gh(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Yc(t,e,s){(e!=="number"||ql(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Bi=Array.isArray;function Bn(t,e,s,r){if(t=t.options,e){e={};for(var i=0;i<s.length;i++)e["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=e.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&r&&(t[s].defaultSelected=!0)}else{for(s=""+Er(s),e=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Xc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jh(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error($(92));if(Bi(s)){if(1<s.length)throw Error($(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Er(s)}}function _p(t,e){var s=Er(e.value),r=Er(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),r!=null&&(t.defaultValue=""+r)}function Yh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Np(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Np(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rl,kp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,s,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rl=rl||document.createElement("div"),rl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function da(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var Hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qy=["Webkit","ms","Moz","O"];Object.keys(Hi).forEach(function(t){Qy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hi[e]=Hi[t]})});function Sp(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||Hi.hasOwnProperty(t)&&Hi[t]?(""+e).trim():e+"px"}function Cp(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var r=s.indexOf("--")===0,i=Sp(s,e[s],r);s==="float"&&(s="cssFloat"),r?t.setProperty(s,i):t[s]=i}}var Hy=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ed(t,e){if(e){if(Hy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function td(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sd=null;function Cu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rd=null,Vn=null,Wn=null;function Xh(t){if(t=Ma(t)){if(typeof rd!="function")throw Error($(280));var e=t.stateNode;e&&(e=To(e),rd(t.stateNode,t.type,e))}}function Ep(t){Vn?Wn?Wn.push(t):Wn=[t]:Vn=t}function Pp(){if(Vn){var t=Vn,e=Wn;if(Wn=Vn=null,Xh(t),e)for(t=0;t<e.length;t++)Xh(e[t])}}function Op(t,e){return t(e)}function Tp(){}var mc=!1;function Ap(t,e,s){if(mc)return t(e,s);mc=!0;try{return Op(t,e,s)}finally{mc=!1,(Vn!==null||Wn!==null)&&(Tp(),Pp())}}function ua(t,e){var s=t.stateNode;if(s===null)return null;var r=To(s);if(r===null)return null;s=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error($(231,e,typeof s));return s}var nd=!1;if($s)try{var Ai={};Object.defineProperty(Ai,"passive",{get:function(){nd=!0}}),window.addEventListener("test",Ai,Ai),window.removeEventListener("test",Ai,Ai)}catch{nd=!1}function Gy(t,e,s,r,i,a,l,c,o){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(u){this.onError(u)}}var Gi=!1,Ul=null,Ml=!1,id=null,Jy={onError:function(t){Gi=!0,Ul=t}};function Yy(t,e,s,r,i,a,l,c,o){Gi=!1,Ul=null,Gy.apply(Jy,arguments)}function Xy(t,e,s,r,i,a,l,c,o){if(Yy.apply(this,arguments),Gi){if(Gi){var d=Ul;Gi=!1,Ul=null}else throw Error($(198));Ml||(Ml=!0,id=d)}}function xn(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function Rp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zh(t){if(xn(t)!==t)throw Error($(188))}function Zy(t){var e=t.alternate;if(!e){if(e=xn(t),e===null)throw Error($(188));return e!==t?null:t}for(var s=t,r=e;;){var i=s.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){s=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return Zh(i),t;if(a===r)return Zh(i),e;a=a.sibling}throw Error($(188))}if(s.return!==r.return)s=i,r=a;else{for(var l=!1,c=i.child;c;){if(c===s){l=!0,s=i,r=a;break}if(c===r){l=!0,r=i,s=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===s){l=!0,s=a,r=i;break}if(c===r){l=!0,r=a,s=i;break}c=c.sibling}if(!l)throw Error($(189))}}if(s.alternate!==r)throw Error($(190))}if(s.tag!==3)throw Error($(188));return s.stateNode.current===s?t:e}function Dp(t){return t=Zy(t),t!==null?Ip(t):null}function Ip(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ip(t);if(e!==null)return e;t=t.sibling}return null}var Fp=Ft.unstable_scheduleCallback,em=Ft.unstable_cancelCallback,ev=Ft.unstable_shouldYield,tv=Ft.unstable_requestPaint,Ie=Ft.unstable_now,sv=Ft.unstable_getCurrentPriorityLevel,Eu=Ft.unstable_ImmediatePriority,$p=Ft.unstable_UserBlockingPriority,zl=Ft.unstable_NormalPriority,rv=Ft.unstable_LowPriority,Lp=Ft.unstable_IdlePriority,Co=null,bs=null;function nv(t){if(bs&&typeof bs.onCommitFiberRoot=="function")try{bs.onCommitFiberRoot(Co,t,void 0,(t.current.flags&128)===128)}catch{}}var cs=Math.clz32?Math.clz32:lv,iv=Math.log,av=Math.LN2;function lv(t){return t>>>=0,t===0?32:31-(iv(t)/av|0)|0}var nl=64,il=4194304;function Vi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bl(t,e){var s=t.pendingLanes;if(s===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,l=s&268435455;if(l!==0){var c=l&~i;c!==0?r=Vi(c):(a&=l,a!==0&&(r=Vi(a)))}else l=s&~i,l!==0?r=Vi(l):a!==0&&(r=Vi(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)s=31-cs(e),i=1<<s,r|=t[s],e&=~i;return r}function ov(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cv(t,e){for(var s=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-cs(a),c=1<<l,o=i[l];o===-1?(!(c&s)||c&r)&&(i[l]=ov(c,e)):o<=e&&(t.expiredLanes|=c),a&=~c}}function ad(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qp(){var t=nl;return nl<<=1,!(nl&4194240)&&(nl=64),t}function fc(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function qa(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cs(e),t[e]=s}function dv(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-cs(s),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,s&=~a}}function Pu(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var r=31-cs(s),i=1<<r;i&e|t[r]&e&&(t[r]|=e),s&=~i}}var ue=0;function Up(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Mp,Ou,zp,Bp,Vp,ld=!1,al=[],xr=null,yr=null,vr=null,ha=new Map,ma=new Map,Xs=[],uv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tm(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":ha.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(e.pointerId)}}function Ri(t,e,s,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:s,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Ma(e),e!==null&&Ou(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function hv(t,e,s,r,i){switch(e){case"focusin":return xr=Ri(xr,t,e,s,r,i),!0;case"dragenter":return yr=Ri(yr,t,e,s,r,i),!0;case"mouseover":return vr=Ri(vr,t,e,s,r,i),!0;case"pointerover":var a=i.pointerId;return ha.set(a,Ri(ha.get(a)||null,t,e,s,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ma.set(a,Ri(ma.get(a)||null,t,e,s,r,i)),!0}return!1}function Wp(t){var e=zr(t.target);if(e!==null){var s=xn(e);if(s!==null){if(e=s.tag,e===13){if(e=Rp(s),e!==null){t.blockedOn=e,Vp(t.priority,function(){zp(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=od(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var r=new s.constructor(s.type,s);sd=r,s.target.dispatchEvent(r),sd=null}else return e=Ma(s),e!==null&&Ou(e),t.blockedOn=s,!1;e.shift()}return!0}function sm(t,e,s){Sl(t)&&s.delete(e)}function mv(){ld=!1,xr!==null&&Sl(xr)&&(xr=null),yr!==null&&Sl(yr)&&(yr=null),vr!==null&&Sl(vr)&&(vr=null),ha.forEach(sm),ma.forEach(sm)}function Di(t,e){t.blockedOn===e&&(t.blockedOn=null,ld||(ld=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,mv)))}function fa(t){function e(i){return Di(i,t)}if(0<al.length){Di(al[0],t);for(var s=1;s<al.length;s++){var r=al[s];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&Di(xr,t),yr!==null&&Di(yr,t),vr!==null&&Di(vr,t),ha.forEach(e),ma.forEach(e),s=0;s<Xs.length;s++)r=Xs[s],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xs.length&&(s=Xs[0],s.blockedOn===null);)Wp(s),s.blockedOn===null&&Xs.shift()}var Kn=Bs.ReactCurrentBatchConfig,Vl=!0;function fv(t,e,s,r){var i=ue,a=Kn.transition;Kn.transition=null;try{ue=1,Tu(t,e,s,r)}finally{ue=i,Kn.transition=a}}function pv(t,e,s,r){var i=ue,a=Kn.transition;Kn.transition=null;try{ue=4,Tu(t,e,s,r)}finally{ue=i,Kn.transition=a}}function Tu(t,e,s,r){if(Vl){var i=od(t,e,s,r);if(i===null)Nc(t,e,r,Wl,s),tm(t,r);else if(hv(i,t,e,s,r))r.stopPropagation();else if(tm(t,r),e&4&&-1<uv.indexOf(t)){for(;i!==null;){var a=Ma(i);if(a!==null&&Mp(a),a=od(t,e,s,r),a===null&&Nc(t,e,r,Wl,s),a===i)break;i=a}i!==null&&r.stopPropagation()}else Nc(t,e,r,null,s)}}var Wl=null;function od(t,e,s,r){if(Wl=null,t=Cu(r),t=zr(t),t!==null)if(e=xn(t),e===null)t=null;else if(s=e.tag,s===13){if(t=Rp(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wl=t,null}function Kp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sv()){case Eu:return 1;case $p:return 4;case zl:case rv:return 16;case Lp:return 536870912;default:return 16}default:return 16}}var fr=null,Au=null,Cl=null;function Qp(){if(Cl)return Cl;var t,e=Au,s=e.length,r,i="value"in fr?fr.value:fr.textContent,a=i.length;for(t=0;t<s&&e[t]===i[t];t++);var l=s-t;for(r=1;r<=l&&e[s-r]===i[a-r];r++);return Cl=i.slice(t,1<r?1-r:void 0)}function El(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ll(){return!0}function rm(){return!1}function Lt(t){function e(s,r,i,a,l){this._reactName=s,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(s=t[c],this[c]=s?s(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ll:rm,this.isPropagationStopped=rm,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ll)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ll)},persist:function(){},isPersistent:ll}),e}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ru=Lt(ji),Ua=Pe({},ji,{view:0,detail:0}),gv=Lt(Ua),pc,gc,Ii,Eo=Pe({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Du,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ii&&(Ii&&t.type==="mousemove"?(pc=t.screenX-Ii.screenX,gc=t.screenY-Ii.screenY):gc=pc=0,Ii=t),pc)},movementY:function(t){return"movementY"in t?t.movementY:gc}}),nm=Lt(Eo),xv=Pe({},Eo,{dataTransfer:0}),yv=Lt(xv),vv=Pe({},Ua,{relatedTarget:0}),xc=Lt(vv),bv=Pe({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),wv=Lt(bv),jv=Pe({},ji,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_v=Lt(jv),Nv=Pe({},ji,{data:0}),im=Lt(Nv),kv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ev(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Cv[t])?!!e[t]:!1}function Du(){return Ev}var Pv=Pe({},Ua,{key:function(t){if(t.key){var e=kv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=El(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Sv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Du,charCode:function(t){return t.type==="keypress"?El(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?El(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ov=Lt(Pv),Tv=Pe({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),am=Lt(Tv),Av=Pe({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Du}),Rv=Lt(Av),Dv=Pe({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iv=Lt(Dv),Fv=Pe({},Eo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$v=Lt(Fv),Lv=[9,13,27,32],Iu=$s&&"CompositionEvent"in window,Ji=null;$s&&"documentMode"in document&&(Ji=document.documentMode);var qv=$s&&"TextEvent"in window&&!Ji,Hp=$s&&(!Iu||Ji&&8<Ji&&11>=Ji),lm=" ",om=!1;function Gp(t,e){switch(t){case"keyup":return Lv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rn=!1;function Uv(t,e){switch(t){case"compositionend":return Jp(e);case"keypress":return e.which!==32?null:(om=!0,lm);case"textInput":return t=e.data,t===lm&&om?null:t;default:return null}}function Mv(t,e){if(Rn)return t==="compositionend"||!Iu&&Gp(t,e)?(t=Qp(),Cl=Au=fr=null,Rn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hp&&e.locale!=="ko"?null:e.data;default:return null}}var zv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zv[t.type]:e==="textarea"}function Yp(t,e,s,r){Ep(r),e=Kl(e,"onChange"),0<e.length&&(s=new Ru("onChange","change",null,s,r),t.push({event:s,listeners:e}))}var Yi=null,pa=null;function Bv(t){o0(t,0)}function Po(t){var e=Fn(t);if(wp(e))return t}function Vv(t,e){if(t==="change")return e}var Xp=!1;if($s){var yc;if($s){var vc="oninput"in document;if(!vc){var dm=document.createElement("div");dm.setAttribute("oninput","return;"),vc=typeof dm.oninput=="function"}yc=vc}else yc=!1;Xp=yc&&(!document.documentMode||9<document.documentMode)}function um(){Yi&&(Yi.detachEvent("onpropertychange",Zp),pa=Yi=null)}function Zp(t){if(t.propertyName==="value"&&Po(pa)){var e=[];Yp(e,pa,t,Cu(t)),Ap(Bv,e)}}function Wv(t,e,s){t==="focusin"?(um(),Yi=e,pa=s,Yi.attachEvent("onpropertychange",Zp)):t==="focusout"&&um()}function Kv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Po(pa)}function Qv(t,e){if(t==="click")return Po(e)}function Hv(t,e){if(t==="input"||t==="change")return Po(e)}function Gv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var us=typeof Object.is=="function"?Object.is:Gv;function ga(t,e){if(us(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),r=Object.keys(e);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var i=s[r];if(!Vc.call(e,i)||!us(t[i],e[i]))return!1}return!0}function hm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mm(t,e){var s=hm(t);t=0;for(var r;s;){if(s.nodeType===3){if(r=t+s.textContent.length,t<=e&&r>=e)return{node:s,offset:e-t};t=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=hm(s)}}function e0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?e0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function t0(){for(var t=window,e=ql();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=ql(t.document)}return e}function Fu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Jv(t){var e=t0(),s=t.focusedElem,r=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&e0(s.ownerDocument.documentElement,s)){if(r!==null&&Fu(s)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=mm(s,a);var l=mm(s,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Yv=$s&&"documentMode"in document&&11>=document.documentMode,Dn=null,cd=null,Xi=null,dd=!1;function fm(t,e,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;dd||Dn==null||Dn!==ql(r)||(r=Dn,"selectionStart"in r&&Fu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xi&&ga(Xi,r)||(Xi=r,r=Kl(cd,"onSelect"),0<r.length&&(e=new Ru("onSelect","select",null,e,s),t.push({event:e,listeners:r}),e.target=Dn)))}function ol(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var In={animationend:ol("Animation","AnimationEnd"),animationiteration:ol("Animation","AnimationIteration"),animationstart:ol("Animation","AnimationStart"),transitionend:ol("Transition","TransitionEnd")},bc={},s0={};$s&&(s0=document.createElement("div").style,"AnimationEvent"in window||(delete In.animationend.animation,delete In.animationiteration.animation,delete In.animationstart.animation),"TransitionEvent"in window||delete In.transitionend.transition);function Oo(t){if(bc[t])return bc[t];if(!In[t])return t;var e=In[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in s0)return bc[t]=e[s];return t}var r0=Oo("animationend"),n0=Oo("animationiteration"),i0=Oo("animationstart"),a0=Oo("transitionend"),l0=new Map,pm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(t,e){l0.set(t,e),gn(e,[t])}for(var wc=0;wc<pm.length;wc++){var jc=pm[wc],Xv=jc.toLowerCase(),Zv=jc[0].toUpperCase()+jc.slice(1);Ar(Xv,"on"+Zv)}Ar(r0,"onAnimationEnd");Ar(n0,"onAnimationIteration");Ar(i0,"onAnimationStart");Ar("dblclick","onDoubleClick");Ar("focusin","onFocus");Ar("focusout","onBlur");Ar(a0,"onTransitionEnd");hi("onMouseEnter",["mouseout","mouseover"]);hi("onMouseLeave",["mouseout","mouseover"]);hi("onPointerEnter",["pointerout","pointerover"]);hi("onPointerLeave",["pointerout","pointerover"]);gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gn("onBeforeInput",["compositionend","keypress","textInput","paste"]);gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wi));function gm(t,e,s){var r=t.type||"unknown-event";t.currentTarget=s,Xy(r,e,void 0,t),t.currentTarget=null}function o0(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var r=t[s],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var l=r.length-1;0<=l;l--){var c=r[l],o=c.instance,d=c.currentTarget;if(c=c.listener,o!==a&&i.isPropagationStopped())break e;gm(i,c,d),a=o}else for(l=0;l<r.length;l++){if(c=r[l],o=c.instance,d=c.currentTarget,c=c.listener,o!==a&&i.isPropagationStopped())break e;gm(i,c,d),a=o}}}if(Ml)throw t=id,Ml=!1,id=null,t}function be(t,e){var s=e[pd];s===void 0&&(s=e[pd]=new Set);var r=t+"__bubble";s.has(r)||(c0(e,t,2,!1),s.add(r))}function _c(t,e,s){var r=0;e&&(r|=4),c0(s,t,r,e)}var cl="_reactListening"+Math.random().toString(36).slice(2);function xa(t){if(!t[cl]){t[cl]=!0,gp.forEach(function(s){s!=="selectionchange"&&(eb.has(s)||_c(s,!1,t),_c(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cl]||(e[cl]=!0,_c("selectionchange",!1,e))}}function c0(t,e,s,r){switch(Kp(e)){case 1:var i=fv;break;case 4:i=pv;break;default:i=Tu}s=i.bind(null,e,s,t),i=void 0,!nd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,s,{capture:!0,passive:i}):t.addEventListener(e,s,!0):i!==void 0?t.addEventListener(e,s,{passive:i}):t.addEventListener(e,s,!1)}function Nc(t,e,s,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var o=l.tag;if((o===3||o===4)&&(o=l.stateNode.containerInfo,o===i||o.nodeType===8&&o.parentNode===i))return;l=l.return}for(;c!==null;){if(l=zr(c),l===null)return;if(o=l.tag,o===5||o===6){r=a=l;continue e}c=c.parentNode}}r=r.return}Ap(function(){var d=a,u=Cu(s),h=[];e:{var m=l0.get(t);if(m!==void 0){var g=Ru,v=t;switch(t){case"keypress":if(El(s)===0)break e;case"keydown":case"keyup":g=Ov;break;case"focusin":v="focus",g=xc;break;case"focusout":v="blur",g=xc;break;case"beforeblur":case"afterblur":g=xc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=nm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=yv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Rv;break;case r0:case n0:case i0:g=wv;break;case a0:g=Iv;break;case"scroll":g=gv;break;case"wheel":g=$v;break;case"copy":case"cut":case"paste":g=_v;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=am}var b=(e&4)!==0,w=!b&&t==="scroll",x=b?m!==null?m+"Capture":null:m;b=[];for(var p=d,f;p!==null;){f=p;var y=f.stateNode;if(f.tag===5&&y!==null&&(f=y,x!==null&&(y=ua(p,x),y!=null&&b.push(ya(p,y,f)))),w)break;p=p.return}0<b.length&&(m=new g(m,v,null,s,u),h.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&s!==sd&&(v=s.relatedTarget||s.fromElement)&&(zr(v)||v[Ls]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=s.relatedTarget||s.toElement,g=d,v=v?zr(v):null,v!==null&&(w=xn(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=d),g!==v)){if(b=nm,y="onMouseLeave",x="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(b=am,y="onPointerLeave",x="onPointerEnter",p="pointer"),w=g==null?m:Fn(g),f=v==null?m:Fn(v),m=new b(y,p+"leave",g,s,u),m.target=w,m.relatedTarget=f,y=null,zr(u)===d&&(b=new b(x,p+"enter",v,s,u),b.target=f,b.relatedTarget=w,y=b),w=y,g&&v)t:{for(b=g,x=v,p=0,f=b;f;f=Nn(f))p++;for(f=0,y=x;y;y=Nn(y))f++;for(;0<p-f;)b=Nn(b),p--;for(;0<f-p;)x=Nn(x),f--;for(;p--;){if(b===x||x!==null&&b===x.alternate)break t;b=Nn(b),x=Nn(x)}b=null}else b=null;g!==null&&xm(h,m,g,b,!1),v!==null&&w!==null&&xm(h,w,v,b,!0)}}e:{if(m=d?Fn(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var j=Vv;else if(cm(m))if(Xp)j=Hv;else{j=Kv;var E=Wv}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=Qv);if(j&&(j=j(t,d))){Yp(h,j,s,u);break e}E&&E(t,m,d),t==="focusout"&&(E=m._wrapperState)&&E.controlled&&m.type==="number"&&Yc(m,"number",m.value)}switch(E=d?Fn(d):window,t){case"focusin":(cm(E)||E.contentEditable==="true")&&(Dn=E,cd=d,Xi=null);break;case"focusout":Xi=cd=Dn=null;break;case"mousedown":dd=!0;break;case"contextmenu":case"mouseup":case"dragend":dd=!1,fm(h,s,u);break;case"selectionchange":if(Yv)break;case"keydown":case"keyup":fm(h,s,u)}var P;if(Iu)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Rn?Gp(t,s)&&(S="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(S="onCompositionStart");S&&(Hp&&s.locale!=="ko"&&(Rn||S!=="onCompositionStart"?S==="onCompositionEnd"&&Rn&&(P=Qp()):(fr=u,Au="value"in fr?fr.value:fr.textContent,Rn=!0)),E=Kl(d,S),0<E.length&&(S=new im(S,t,null,s,u),h.push({event:S,listeners:E}),P?S.data=P:(P=Jp(s),P!==null&&(S.data=P)))),(P=qv?Uv(t,s):Mv(t,s))&&(d=Kl(d,"onBeforeInput"),0<d.length&&(u=new im("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=P))}o0(h,e)})}function ya(t,e,s){return{instance:t,listener:e,currentTarget:s}}function Kl(t,e){for(var s=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=ua(t,s),a!=null&&r.unshift(ya(t,a,i)),a=ua(t,e),a!=null&&r.push(ya(t,a,i))),t=t.return}return r}function Nn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xm(t,e,s,r,i){for(var a=e._reactName,l=[];s!==null&&s!==r;){var c=s,o=c.alternate,d=c.stateNode;if(o!==null&&o===r)break;c.tag===5&&d!==null&&(c=d,i?(o=ua(s,a),o!=null&&l.unshift(ya(s,o,c))):i||(o=ua(s,a),o!=null&&l.push(ya(s,o,c)))),s=s.return}l.length!==0&&t.push({event:e,listeners:l})}var tb=/\r\n?/g,sb=/\u0000|\uFFFD/g;function ym(t){return(typeof t=="string"?t:""+t).replace(tb,`
`).replace(sb,"")}function dl(t,e,s){if(e=ym(e),ym(t)!==e&&s)throw Error($(425))}function Ql(){}var ud=null,hd=null;function md(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fd=typeof setTimeout=="function"?setTimeout:void 0,rb=typeof clearTimeout=="function"?clearTimeout:void 0,vm=typeof Promise=="function"?Promise:void 0,nb=typeof queueMicrotask=="function"?queueMicrotask:typeof vm<"u"?function(t){return vm.resolve(null).then(t).catch(ib)}:fd;function ib(t){setTimeout(function(){throw t})}function kc(t,e){var s=e,r=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(r===0){t.removeChild(i),fa(e);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=i}while(s);fa(e)}function br(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var _i=Math.random().toString(36).slice(2),ys="__reactFiber$"+_i,va="__reactProps$"+_i,Ls="__reactContainer$"+_i,pd="__reactEvents$"+_i,ab="__reactListeners$"+_i,lb="__reactHandles$"+_i;function zr(t){var e=t[ys];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Ls]||s[ys]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=bm(t);t!==null;){if(s=t[ys])return s;t=bm(t)}return e}t=s,s=t.parentNode}return null}function Ma(t){return t=t[ys]||t[Ls],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function To(t){return t[va]||null}var gd=[],$n=-1;function Rr(t){return{current:t}}function je(t){0>$n||(t.current=gd[$n],gd[$n]=null,$n--)}function xe(t,e){$n++,gd[$n]=t.current,t.current=e}var Pr={},ct=Rr(Pr),Et=Rr(!1),rn=Pr;function mi(t,e){var s=t.type.contextTypes;if(!s)return Pr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in s)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Pt(t){return t=t.childContextTypes,t!=null}function Hl(){je(Et),je(ct)}function wm(t,e,s){if(ct.current!==Pr)throw Error($(168));xe(ct,e),xe(Et,s)}function d0(t,e,s){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,Wy(t)||"Unknown",i));return Pe({},s,r)}function Gl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,rn=ct.current,xe(ct,t),xe(Et,Et.current),!0}function jm(t,e,s){var r=t.stateNode;if(!r)throw Error($(169));s?(t=d0(t,e,rn),r.__reactInternalMemoizedMergedChildContext=t,je(Et),je(ct),xe(ct,t)):je(Et),xe(Et,s)}var Os=null,Ao=!1,Sc=!1;function u0(t){Os===null?Os=[t]:Os.push(t)}function ob(t){Ao=!0,u0(t)}function Dr(){if(!Sc&&Os!==null){Sc=!0;var t=0,e=ue;try{var s=Os;for(ue=1;t<s.length;t++){var r=s[t];do r=r(!0);while(r!==null)}Os=null,Ao=!1}catch(i){throw Os!==null&&(Os=Os.slice(t+1)),Fp(Eu,Dr),i}finally{ue=e,Sc=!1}}return null}var Ln=[],qn=0,Jl=null,Yl=0,Vt=[],Wt=0,nn=null,Rs=1,Ds="";function Lr(t,e){Ln[qn++]=Yl,Ln[qn++]=Jl,Jl=t,Yl=e}function h0(t,e,s){Vt[Wt++]=Rs,Vt[Wt++]=Ds,Vt[Wt++]=nn,nn=t;var r=Rs;t=Ds;var i=32-cs(r)-1;r&=~(1<<i),s+=1;var a=32-cs(e)+i;if(30<a){var l=i-i%5;a=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Rs=1<<32-cs(e)+i|s<<i|r,Ds=a+t}else Rs=1<<a|s<<i|r,Ds=t}function $u(t){t.return!==null&&(Lr(t,1),h0(t,1,0))}function Lu(t){for(;t===Jl;)Jl=Ln[--qn],Ln[qn]=null,Yl=Ln[--qn],Ln[qn]=null;for(;t===nn;)nn=Vt[--Wt],Vt[Wt]=null,Ds=Vt[--Wt],Vt[Wt]=null,Rs=Vt[--Wt],Vt[Wt]=null}var It=null,Dt=null,_e=!1,is=null;function m0(t,e){var s=Kt(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function _m(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,It=t,Dt=br(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,It=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=nn!==null?{id:Rs,overflow:Ds}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Kt(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,It=t,Dt=null,!0):!1;default:return!1}}function xd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yd(t){if(_e){var e=Dt;if(e){var s=e;if(!_m(t,e)){if(xd(t))throw Error($(418));e=br(s.nextSibling);var r=It;e&&_m(t,e)?m0(r,s):(t.flags=t.flags&-4097|2,_e=!1,It=t)}}else{if(xd(t))throw Error($(418));t.flags=t.flags&-4097|2,_e=!1,It=t}}}function Nm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;It=t}function ul(t){if(t!==It)return!1;if(!_e)return Nm(t),_e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!md(t.type,t.memoizedProps)),e&&(e=Dt)){if(xd(t))throw f0(),Error($(418));for(;e;)m0(t,e),e=br(e.nextSibling)}if(Nm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Dt=br(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=It?br(t.stateNode.nextSibling):null;return!0}function f0(){for(var t=Dt;t;)t=br(t.nextSibling)}function fi(){Dt=It=null,_e=!1}function qu(t){is===null?is=[t]:is.push(t)}var cb=Bs.ReactCurrentBatchConfig;function Fi(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error($(309));var r=s.stateNode}if(!r)throw Error($(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var c=i.refs;l===null?delete c[a]:c[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error($(284));if(!s._owner)throw Error($(290,t))}return t}function hl(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function km(t){var e=t._init;return e(t._payload)}function p0(t){function e(x,p){if(t){var f=x.deletions;f===null?(x.deletions=[p],x.flags|=16):f.push(p)}}function s(x,p){if(!t)return null;for(;p!==null;)e(x,p),p=p.sibling;return null}function r(x,p){for(x=new Map;p!==null;)p.key!==null?x.set(p.key,p):x.set(p.index,p),p=p.sibling;return x}function i(x,p){return x=Nr(x,p),x.index=0,x.sibling=null,x}function a(x,p,f){return x.index=f,t?(f=x.alternate,f!==null?(f=f.index,f<p?(x.flags|=2,p):f):(x.flags|=2,p)):(x.flags|=1048576,p)}function l(x){return t&&x.alternate===null&&(x.flags|=2),x}function c(x,p,f,y){return p===null||p.tag!==6?(p=Rc(f,x.mode,y),p.return=x,p):(p=i(p,f),p.return=x,p)}function o(x,p,f,y){var j=f.type;return j===An?u(x,p,f.props.children,y,f.key):p!==null&&(p.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Gs&&km(j)===p.type)?(y=i(p,f.props),y.ref=Fi(x,p,f),y.return=x,y):(y=Il(f.type,f.key,f.props,null,x.mode,y),y.ref=Fi(x,p,f),y.return=x,y)}function d(x,p,f,y){return p===null||p.tag!==4||p.stateNode.containerInfo!==f.containerInfo||p.stateNode.implementation!==f.implementation?(p=Dc(f,x.mode,y),p.return=x,p):(p=i(p,f.children||[]),p.return=x,p)}function u(x,p,f,y,j){return p===null||p.tag!==7?(p=sn(f,x.mode,y,j),p.return=x,p):(p=i(p,f),p.return=x,p)}function h(x,p,f){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Rc(""+p,x.mode,f),p.return=x,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case tl:return f=Il(p.type,p.key,p.props,null,x.mode,f),f.ref=Fi(x,null,p),f.return=x,f;case Tn:return p=Dc(p,x.mode,f),p.return=x,p;case Gs:var y=p._init;return h(x,y(p._payload),f)}if(Bi(p)||Ti(p))return p=sn(p,x.mode,f,null),p.return=x,p;hl(x,p)}return null}function m(x,p,f,y){var j=p!==null?p.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return j!==null?null:c(x,p,""+f,y);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case tl:return f.key===j?o(x,p,f,y):null;case Tn:return f.key===j?d(x,p,f,y):null;case Gs:return j=f._init,m(x,p,j(f._payload),y)}if(Bi(f)||Ti(f))return j!==null?null:u(x,p,f,y,null);hl(x,f)}return null}function g(x,p,f,y,j){if(typeof y=="string"&&y!==""||typeof y=="number")return x=x.get(f)||null,c(p,x,""+y,j);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case tl:return x=x.get(y.key===null?f:y.key)||null,o(p,x,y,j);case Tn:return x=x.get(y.key===null?f:y.key)||null,d(p,x,y,j);case Gs:var E=y._init;return g(x,p,f,E(y._payload),j)}if(Bi(y)||Ti(y))return x=x.get(f)||null,u(p,x,y,j,null);hl(p,y)}return null}function v(x,p,f,y){for(var j=null,E=null,P=p,S=p=0,C=null;P!==null&&S<f.length;S++){P.index>S?(C=P,P=null):C=P.sibling;var T=m(x,P,f[S],y);if(T===null){P===null&&(P=C);break}t&&P&&T.alternate===null&&e(x,P),p=a(T,p,S),E===null?j=T:E.sibling=T,E=T,P=C}if(S===f.length)return s(x,P),_e&&Lr(x,S),j;if(P===null){for(;S<f.length;S++)P=h(x,f[S],y),P!==null&&(p=a(P,p,S),E===null?j=P:E.sibling=P,E=P);return _e&&Lr(x,S),j}for(P=r(x,P);S<f.length;S++)C=g(P,x,S,f[S],y),C!==null&&(t&&C.alternate!==null&&P.delete(C.key===null?S:C.key),p=a(C,p,S),E===null?j=C:E.sibling=C,E=C);return t&&P.forEach(function(R){return e(x,R)}),_e&&Lr(x,S),j}function b(x,p,f,y){var j=Ti(f);if(typeof j!="function")throw Error($(150));if(f=j.call(f),f==null)throw Error($(151));for(var E=j=null,P=p,S=p=0,C=null,T=f.next();P!==null&&!T.done;S++,T=f.next()){P.index>S?(C=P,P=null):C=P.sibling;var R=m(x,P,T.value,y);if(R===null){P===null&&(P=C);break}t&&P&&R.alternate===null&&e(x,P),p=a(R,p,S),E===null?j=R:E.sibling=R,E=R,P=C}if(T.done)return s(x,P),_e&&Lr(x,S),j;if(P===null){for(;!T.done;S++,T=f.next())T=h(x,T.value,y),T!==null&&(p=a(T,p,S),E===null?j=T:E.sibling=T,E=T);return _e&&Lr(x,S),j}for(P=r(x,P);!T.done;S++,T=f.next())T=g(P,x,S,T.value,y),T!==null&&(t&&T.alternate!==null&&P.delete(T.key===null?S:T.key),p=a(T,p,S),E===null?j=T:E.sibling=T,E=T);return t&&P.forEach(function(D){return e(x,D)}),_e&&Lr(x,S),j}function w(x,p,f,y){if(typeof f=="object"&&f!==null&&f.type===An&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case tl:e:{for(var j=f.key,E=p;E!==null;){if(E.key===j){if(j=f.type,j===An){if(E.tag===7){s(x,E.sibling),p=i(E,f.props.children),p.return=x,x=p;break e}}else if(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Gs&&km(j)===E.type){s(x,E.sibling),p=i(E,f.props),p.ref=Fi(x,E,f),p.return=x,x=p;break e}s(x,E);break}else e(x,E);E=E.sibling}f.type===An?(p=sn(f.props.children,x.mode,y,f.key),p.return=x,x=p):(y=Il(f.type,f.key,f.props,null,x.mode,y),y.ref=Fi(x,p,f),y.return=x,x=y)}return l(x);case Tn:e:{for(E=f.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===f.containerInfo&&p.stateNode.implementation===f.implementation){s(x,p.sibling),p=i(p,f.children||[]),p.return=x,x=p;break e}else{s(x,p);break}else e(x,p);p=p.sibling}p=Dc(f,x.mode,y),p.return=x,x=p}return l(x);case Gs:return E=f._init,w(x,p,E(f._payload),y)}if(Bi(f))return v(x,p,f,y);if(Ti(f))return b(x,p,f,y);hl(x,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,p!==null&&p.tag===6?(s(x,p.sibling),p=i(p,f),p.return=x,x=p):(s(x,p),p=Rc(f,x.mode,y),p.return=x,x=p),l(x)):s(x,p)}return w}var pi=p0(!0),g0=p0(!1),Xl=Rr(null),Zl=null,Un=null,Uu=null;function Mu(){Uu=Un=Zl=null}function zu(t){var e=Xl.current;je(Xl),t._currentValue=e}function vd(t,e,s){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===s)break;t=t.return}}function Qn(t,e){Zl=t,Uu=Un=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function Gt(t){var e=t._currentValue;if(Uu!==t)if(t={context:t,memoizedValue:e,next:null},Un===null){if(Zl===null)throw Error($(308));Un=t,Zl.dependencies={lanes:0,firstContext:t}}else Un=Un.next=t;return e}var Br=null;function Bu(t){Br===null?Br=[t]:Br.push(t)}function x0(t,e,s,r){var i=e.interleaved;return i===null?(s.next=s,Bu(e)):(s.next=i.next,i.next=s),e.interleaved=s,qs(t,r)}function qs(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Js=!1;function Vu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function y0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Is(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function wr(t,e,s){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ie&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,qs(t,s)}return i=r.interleaved,i===null?(e.next=e,Bu(r)):(e.next=i.next,i.next=e),r.interleaved=e,qs(t,s)}function Pl(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,s|=r,e.lanes=s,Pu(t,s)}}function Sm(t,e){var s=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var i=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?i=a=l:a=a.next=l,s=s.next}while(s!==null);a===null?i=a=e:a=a.next=e}else i=a=e;s={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function eo(t,e,s,r){var i=t.updateQueue;Js=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var o=c,d=o.next;o.next=null,l===null?a=d:l.next=d,l=o;var u=t.alternate;u!==null&&(u=u.updateQueue,c=u.lastBaseUpdate,c!==l&&(c===null?u.firstBaseUpdate=d:c.next=d,u.lastBaseUpdate=o))}if(a!==null){var h=i.baseState;l=0,u=d=o=null,c=a;do{var m=c.lane,g=c.eventTime;if((r&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var v=t,b=c;switch(m=e,g=s,b.tag){case 1:if(v=b.payload,typeof v=="function"){h=v.call(g,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,m=typeof v=="function"?v.call(g,h,m):v,m==null)break e;h=Pe({},h,m);break e;case 2:Js=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[c]:m.push(c))}else g={eventTime:g,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},u===null?(d=u=g,o=h):u=u.next=g,l|=m;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;m=c,c=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(u===null&&(o=h),i.baseState=o,i.firstBaseUpdate=d,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);ln|=l,t.lanes=l,t.memoizedState=h}}function Cm(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=s,typeof i!="function")throw Error($(191,i));i.call(r)}}}var za={},ws=Rr(za),ba=Rr(za),wa=Rr(za);function Vr(t){if(t===za)throw Error($(174));return t}function Wu(t,e){switch(xe(wa,e),xe(ba,t),xe(ws,za),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zc(e,t)}je(ws),xe(ws,e)}function gi(){je(ws),je(ba),je(wa)}function v0(t){Vr(wa.current);var e=Vr(ws.current),s=Zc(e,t.type);e!==s&&(xe(ba,t),xe(ws,s))}function Ku(t){ba.current===t&&(je(ws),je(ba))}var ke=Rr(0);function to(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cc=[];function Qu(){for(var t=0;t<Cc.length;t++)Cc[t]._workInProgressVersionPrimary=null;Cc.length=0}var Ol=Bs.ReactCurrentDispatcher,Ec=Bs.ReactCurrentBatchConfig,an=0,Se=null,ze=null,Qe=null,so=!1,Zi=!1,ja=0,db=0;function st(){throw Error($(321))}function Hu(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!us(t[s],e[s]))return!1;return!0}function Gu(t,e,s,r,i,a){if(an=a,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ol.current=t===null||t.memoizedState===null?fb:pb,t=s(r,i),Zi){a=0;do{if(Zi=!1,ja=0,25<=a)throw Error($(301));a+=1,Qe=ze=null,e.updateQueue=null,Ol.current=gb,t=s(r,i)}while(Zi)}if(Ol.current=ro,e=ze!==null&&ze.next!==null,an=0,Qe=ze=Se=null,so=!1,e)throw Error($(300));return t}function Ju(){var t=ja!==0;return ja=0,t}function ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Se.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Jt(){if(ze===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=Qe===null?Se.memoizedState:Qe.next;if(e!==null)Qe=e,ze=t;else{if(t===null)throw Error($(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Qe===null?Se.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function _a(t,e){return typeof e=="function"?e(t):e}function Pc(t){var e=Jt(),s=e.queue;if(s===null)throw Error($(311));s.lastRenderedReducer=t;var r=ze,i=r.baseQueue,a=s.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}r.baseQueue=i=a,s.pending=null}if(i!==null){a=i.next,r=r.baseState;var c=l=null,o=null,d=a;do{var u=d.lane;if((an&u)===u)o!==null&&(o=o.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};o===null?(c=o=h,l=r):o=o.next=h,Se.lanes|=u,ln|=u}d=d.next}while(d!==null&&d!==a);o===null?l=r:o.next=c,us(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=o,s.lastRenderedState=r}if(t=s.interleaved,t!==null){i=t;do a=i.lane,Se.lanes|=a,ln|=a,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Oc(t){var e=Jt(),s=e.queue;if(s===null)throw Error($(311));s.lastRenderedReducer=t;var r=s.dispatch,i=s.pending,a=e.memoizedState;if(i!==null){s.pending=null;var l=i=i.next;do a=t(a,l.action),l=l.next;while(l!==i);us(a,e.memoizedState)||(Ct=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),s.lastRenderedState=a}return[a,r]}function b0(){}function w0(t,e){var s=Se,r=Jt(),i=e(),a=!us(r.memoizedState,i);if(a&&(r.memoizedState=i,Ct=!0),r=r.queue,Yu(N0.bind(null,s,r,t),[t]),r.getSnapshot!==e||a||Qe!==null&&Qe.memoizedState.tag&1){if(s.flags|=2048,Na(9,_0.bind(null,s,r,i,e),void 0,null),He===null)throw Error($(349));an&30||j0(s,e,i)}return i}function j0(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function _0(t,e,s,r){e.value=s,e.getSnapshot=r,k0(e)&&S0(t)}function N0(t,e,s){return s(function(){k0(e)&&S0(t)})}function k0(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!us(t,s)}catch{return!0}}function S0(t){var e=qs(t,1);e!==null&&ds(e,t,1,-1)}function Em(t){var e=ms();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:t},e.queue=t,t=t.dispatch=mb.bind(null,Se,t),[e.memoizedState,t]}function Na(t,e,s,r){return t={tag:t,create:e,destroy:s,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(r=s.next,s.next=t,t.next=r,e.lastEffect=t)),t}function C0(){return Jt().memoizedState}function Tl(t,e,s,r){var i=ms();Se.flags|=t,i.memoizedState=Na(1|e,s,void 0,r===void 0?null:r)}function Ro(t,e,s,r){var i=Jt();r=r===void 0?null:r;var a=void 0;if(ze!==null){var l=ze.memoizedState;if(a=l.destroy,r!==null&&Hu(r,l.deps)){i.memoizedState=Na(e,s,a,r);return}}Se.flags|=t,i.memoizedState=Na(1|e,s,a,r)}function Pm(t,e){return Tl(8390656,8,t,e)}function Yu(t,e){return Ro(2048,8,t,e)}function E0(t,e){return Ro(4,2,t,e)}function P0(t,e){return Ro(4,4,t,e)}function O0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function T0(t,e,s){return s=s!=null?s.concat([t]):null,Ro(4,4,O0.bind(null,e,t),s)}function Xu(){}function A0(t,e){var s=Jt();e=e===void 0?null:e;var r=s.memoizedState;return r!==null&&e!==null&&Hu(e,r[1])?r[0]:(s.memoizedState=[t,e],t)}function R0(t,e){var s=Jt();e=e===void 0?null:e;var r=s.memoizedState;return r!==null&&e!==null&&Hu(e,r[1])?r[0]:(t=t(),s.memoizedState=[t,e],t)}function D0(t,e,s){return an&21?(us(s,e)||(s=qp(),Se.lanes|=s,ln|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=s)}function ub(t,e){var s=ue;ue=s!==0&&4>s?s:4,t(!0);var r=Ec.transition;Ec.transition={};try{t(!1),e()}finally{ue=s,Ec.transition=r}}function I0(){return Jt().memoizedState}function hb(t,e,s){var r=_r(t);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},F0(t))$0(e,s);else if(s=x0(t,e,s,r),s!==null){var i=gt();ds(s,t,r,i),L0(s,e,r)}}function mb(t,e,s){var r=_r(t),i={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(F0(t))$0(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,c=a(l,s);if(i.hasEagerState=!0,i.eagerState=c,us(c,l)){var o=e.interleaved;o===null?(i.next=i,Bu(e)):(i.next=o.next,o.next=i),e.interleaved=i;return}}catch{}finally{}s=x0(t,e,i,r),s!==null&&(i=gt(),ds(s,t,r,i),L0(s,e,r))}}function F0(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function $0(t,e){Zi=so=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function L0(t,e,s){if(s&4194240){var r=e.lanes;r&=t.pendingLanes,s|=r,e.lanes=s,Pu(t,s)}}var ro={readContext:Gt,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},fb={readContext:Gt,useCallback:function(t,e){return ms().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:Pm,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Tl(4194308,4,O0.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Tl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Tl(4,2,t,e)},useMemo:function(t,e){var s=ms();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var r=ms();return e=s!==void 0?s(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hb.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=ms();return t={current:t},e.memoizedState=t},useState:Em,useDebugValue:Xu,useDeferredValue:function(t){return ms().memoizedState=t},useTransition:function(){var t=Em(!1),e=t[0];return t=ub.bind(null,t[1]),ms().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var r=Se,i=ms();if(_e){if(s===void 0)throw Error($(407));s=s()}else{if(s=e(),He===null)throw Error($(349));an&30||j0(r,e,s)}i.memoizedState=s;var a={value:s,getSnapshot:e};return i.queue=a,Pm(N0.bind(null,r,a,t),[t]),r.flags|=2048,Na(9,_0.bind(null,r,a,s,e),void 0,null),s},useId:function(){var t=ms(),e=He.identifierPrefix;if(_e){var s=Ds,r=Rs;s=(r&~(1<<32-cs(r)-1)).toString(32)+s,e=":"+e+"R"+s,s=ja++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=db++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pb={readContext:Gt,useCallback:A0,useContext:Gt,useEffect:Yu,useImperativeHandle:T0,useInsertionEffect:E0,useLayoutEffect:P0,useMemo:R0,useReducer:Pc,useRef:C0,useState:function(){return Pc(_a)},useDebugValue:Xu,useDeferredValue:function(t){var e=Jt();return D0(e,ze.memoizedState,t)},useTransition:function(){var t=Pc(_a)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:b0,useSyncExternalStore:w0,useId:I0,unstable_isNewReconciler:!1},gb={readContext:Gt,useCallback:A0,useContext:Gt,useEffect:Yu,useImperativeHandle:T0,useInsertionEffect:E0,useLayoutEffect:P0,useMemo:R0,useReducer:Oc,useRef:C0,useState:function(){return Oc(_a)},useDebugValue:Xu,useDeferredValue:function(t){var e=Jt();return ze===null?e.memoizedState=t:D0(e,ze.memoizedState,t)},useTransition:function(){var t=Oc(_a)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:b0,useSyncExternalStore:w0,useId:I0,unstable_isNewReconciler:!1};function es(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function bd(t,e,s,r){e=t.memoizedState,s=s(r,e),s=s==null?e:Pe({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Do={isMounted:function(t){return(t=t._reactInternals)?xn(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var r=gt(),i=_r(t),a=Is(r,i);a.payload=e,s!=null&&(a.callback=s),e=wr(t,a,i),e!==null&&(ds(e,t,i,r),Pl(e,t,i))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var r=gt(),i=_r(t),a=Is(r,i);a.tag=1,a.payload=e,s!=null&&(a.callback=s),e=wr(t,a,i),e!==null&&(ds(e,t,i,r),Pl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=gt(),r=_r(t),i=Is(s,r);i.tag=2,e!=null&&(i.callback=e),e=wr(t,i,r),e!==null&&(ds(e,t,r,s),Pl(e,t,r))}};function Om(t,e,s,r,i,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,l):e.prototype&&e.prototype.isPureReactComponent?!ga(s,r)||!ga(i,a):!0}function q0(t,e,s){var r=!1,i=Pr,a=e.contextType;return typeof a=="object"&&a!==null?a=Gt(a):(i=Pt(e)?rn:ct.current,r=e.contextTypes,a=(r=r!=null)?mi(t,i):Pr),e=new e(s,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Do,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Tm(t,e,s,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,r),e.state!==t&&Do.enqueueReplaceState(e,e.state,null)}function wd(t,e,s,r){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},Vu(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Gt(a):(a=Pt(e)?rn:ct.current,i.context=mi(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(bd(t,e,a,s),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Do.enqueueReplaceState(i,i.state,null),eo(t,s,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function xi(t,e){try{var s="",r=e;do s+=Vy(r),r=r.return;while(r);var i=s}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Tc(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function jd(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var xb=typeof WeakMap=="function"?WeakMap:Map;function U0(t,e,s){s=Is(-1,s),s.tag=3,s.payload={element:null};var r=e.value;return s.callback=function(){io||(io=!0,Ad=r),jd(t,e)},s}function M0(t,e,s){s=Is(-1,s),s.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;s.payload=function(){return r(i)},s.callback=function(){jd(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){jd(t,e),typeof r!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),s}function Am(t,e,s){var r=t.pingCache;if(r===null){r=t.pingCache=new xb;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(s)||(i.add(s),t=Tb.bind(null,t,e,s),e.then(t,t))}function Rm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dm(t,e,s,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Is(-1,1),e.tag=2,wr(s,e,1))),s.lanes|=1),t)}var yb=Bs.ReactCurrentOwner,Ct=!1;function mt(t,e,s,r){e.child=t===null?g0(e,null,s,r):pi(e,t.child,s,r)}function Im(t,e,s,r,i){s=s.render;var a=e.ref;return Qn(e,i),r=Gu(t,e,s,r,a,i),s=Ju(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Us(t,e,i)):(_e&&s&&$u(e),e.flags|=1,mt(t,e,r,i),e.child)}function Fm(t,e,s,r,i){if(t===null){var a=s.type;return typeof a=="function"&&!ah(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=a,z0(t,e,a,r,i)):(t=Il(s.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var l=a.memoizedProps;if(s=s.compare,s=s!==null?s:ga,s(l,r)&&t.ref===e.ref)return Us(t,e,i)}return e.flags|=1,t=Nr(a,r),t.ref=e.ref,t.return=e,e.child=t}function z0(t,e,s,r,i){if(t!==null){var a=t.memoizedProps;if(ga(a,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,Us(t,e,i)}return _d(t,e,s,r,i)}function B0(t,e,s){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(zn,Rt),Rt|=s;else{if(!(s&1073741824))return t=a!==null?a.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(zn,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:s,xe(zn,Rt),Rt|=r}else a!==null?(r=a.baseLanes|s,e.memoizedState=null):r=s,xe(zn,Rt),Rt|=r;return mt(t,e,i,s),e.child}function V0(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function _d(t,e,s,r,i){var a=Pt(s)?rn:ct.current;return a=mi(e,a),Qn(e,i),s=Gu(t,e,s,r,a,i),r=Ju(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Us(t,e,i)):(_e&&r&&$u(e),e.flags|=1,mt(t,e,s,i),e.child)}function $m(t,e,s,r,i){if(Pt(s)){var a=!0;Gl(e)}else a=!1;if(Qn(e,i),e.stateNode===null)Al(t,e),q0(e,s,r),wd(e,s,r,i),r=!0;else if(t===null){var l=e.stateNode,c=e.memoizedProps;l.props=c;var o=l.context,d=s.contextType;typeof d=="object"&&d!==null?d=Gt(d):(d=Pt(s)?rn:ct.current,d=mi(e,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||o!==d)&&Tm(e,l,r,d),Js=!1;var m=e.memoizedState;l.state=m,eo(e,r,l,i),o=e.memoizedState,c!==r||m!==o||Et.current||Js?(typeof u=="function"&&(bd(e,s,u,r),o=e.memoizedState),(c=Js||Om(e,s,c,r,m,o,d))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=o),l.props=r,l.state=o,l.context=d,r=c):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,y0(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:es(e.type,c),l.props=d,h=e.pendingProps,m=l.context,o=s.contextType,typeof o=="object"&&o!==null?o=Gt(o):(o=Pt(s)?rn:ct.current,o=mi(e,o));var g=s.getDerivedStateFromProps;(u=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==h||m!==o)&&Tm(e,l,r,o),Js=!1,m=e.memoizedState,l.state=m,eo(e,r,l,i);var v=e.memoizedState;c!==h||m!==v||Et.current||Js?(typeof g=="function"&&(bd(e,s,g,r),v=e.memoizedState),(d=Js||Om(e,s,d,r,m,v,o)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,v,o),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,v,o)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),l.props=r,l.state=v,l.context=o,r=d):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Nd(t,e,s,r,a,i)}function Nd(t,e,s,r,i,a){V0(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&jm(e,s,!1),Us(t,e,a);r=e.stateNode,yb.current=e;var c=l&&typeof s.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=pi(e,t.child,null,a),e.child=pi(e,null,c,a)):mt(t,e,c,a),e.memoizedState=r.state,i&&jm(e,s,!0),e.child}function W0(t){var e=t.stateNode;e.pendingContext?wm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wm(t,e.context,!1),Wu(t,e.containerInfo)}function Lm(t,e,s,r,i){return fi(),qu(i),e.flags|=256,mt(t,e,s,r),e.child}var kd={dehydrated:null,treeContext:null,retryLane:0};function Sd(t){return{baseLanes:t,cachePool:null,transitions:null}}function K0(t,e,s){var r=e.pendingProps,i=ke.current,a=!1,l=(e.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),xe(ke,i&1),t===null)return yd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,a?(r=e.mode,a=e.child,l={mode:"hidden",children:l},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=$o(l,r,0,null),t=sn(t,r,s,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Sd(s),e.memoizedState=kd,t):Zu(e,l));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return vb(t,e,l,r,c,i,s);if(a){a=r.fallback,l=e.mode,i=t.child,c=i.sibling;var o={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=o,e.deletions=null):(r=Nr(i,o),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=Nr(c,a):(a=sn(a,l,s,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,l=t.child.memoizedState,l=l===null?Sd(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~s,e.memoizedState=kd,r}return a=t.child,t=a.sibling,r=Nr(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=s),r.return=e,r.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=r,e.memoizedState=null,r}function Zu(t,e){return e=$o({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ml(t,e,s,r){return r!==null&&qu(r),pi(e,t.child,null,s),t=Zu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vb(t,e,s,r,i,a,l){if(s)return e.flags&256?(e.flags&=-257,r=Tc(Error($(422))),ml(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=$o({mode:"visible",children:r.children},i,0,null),a=sn(a,i,l,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&pi(e,t.child,null,l),e.child.memoizedState=Sd(l),e.memoizedState=kd,a);if(!(e.mode&1))return ml(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error($(419)),r=Tc(a,r,void 0),ml(t,e,l,r)}if(c=(l&t.childLanes)!==0,Ct||c){if(r=He,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,qs(t,i),ds(r,t,i,-1))}return ih(),r=Tc(Error($(421))),ml(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Ab.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Dt=br(i.nextSibling),It=e,_e=!0,is=null,t!==null&&(Vt[Wt++]=Rs,Vt[Wt++]=Ds,Vt[Wt++]=nn,Rs=t.id,Ds=t.overflow,nn=e),e=Zu(e,r.children),e.flags|=4096,e)}function qm(t,e,s){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vd(t.return,e,s)}function Ac(t,e,s,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=s,a.tailMode=i)}function Q0(t,e,s){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(mt(t,e,r.children,s),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qm(t,s,e);else if(t.tag===19)qm(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(s=e.child,i=null;s!==null;)t=s.alternate,t!==null&&to(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=e.child,e.child=null):(i=s.sibling,s.sibling=null),Ac(e,!1,i,s,a);break;case"backwards":for(s=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&to(t)===null){e.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}Ac(e,!0,s,null,a);break;case"together":Ac(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Al(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Us(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),ln|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,s=Nr(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Nr(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function bb(t,e,s){switch(e.tag){case 3:W0(e),fi();break;case 5:v0(e);break;case 1:Pt(e.type)&&Gl(e);break;case 4:Wu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;xe(Xl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(ke,ke.current&1),e.flags|=128,null):s&e.child.childLanes?K0(t,e,s):(xe(ke,ke.current&1),t=Us(t,e,s),t!==null?t.sibling:null);xe(ke,ke.current&1);break;case 19:if(r=(s&e.childLanes)!==0,t.flags&128){if(r)return Q0(t,e,s);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xe(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,B0(t,e,s)}return Us(t,e,s)}var H0,Cd,G0,J0;H0=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Cd=function(){};G0=function(t,e,s,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Vr(ws.current);var a=null;switch(s){case"input":i=Gc(t,i),r=Gc(t,r),a=[];break;case"select":i=Pe({},i,{value:void 0}),r=Pe({},r,{value:void 0}),a=[];break;case"textarea":i=Xc(t,i),r=Xc(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ql)}ed(s,r);var l;s=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(l in c)c.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ca.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var o=r[d];if(c=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&o!==c&&(o!=null||c!=null))if(d==="style")if(c){for(l in c)!c.hasOwnProperty(l)||o&&o.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in o)o.hasOwnProperty(l)&&c[l]!==o[l]&&(s||(s={}),s[l]=o[l])}else s||(a||(a=[]),a.push(d,s)),s=o;else d==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,c=c?c.__html:void 0,o!=null&&c!==o&&(a=a||[]).push(d,o)):d==="children"?typeof o!="string"&&typeof o!="number"||(a=a||[]).push(d,""+o):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ca.hasOwnProperty(d)?(o!=null&&d==="onScroll"&&be("scroll",t),a||c===o||(a=[])):(a=a||[]).push(d,o))}s&&(a=a||[]).push("style",s);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};J0=function(t,e,s,r){s!==r&&(e.flags|=4)};function $i(t,e){if(!_e)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,r=0;if(e)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=s,e}function wb(t,e,s){var r=e.pendingProps;switch(Lu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return Pt(e.type)&&Hl(),rt(e),null;case 3:return r=e.stateNode,gi(),je(Et),je(ct),Qu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ul(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,is!==null&&(Id(is),is=null))),Cd(t,e),rt(e),null;case 5:Ku(e);var i=Vr(wa.current);if(s=e.type,t!==null&&e.stateNode!=null)G0(t,e,s,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return rt(e),null}if(t=Vr(ws.current),ul(e)){r=e.stateNode,s=e.type;var a=e.memoizedProps;switch(r[ys]=e,r[va]=a,t=(e.mode&1)!==0,s){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(i=0;i<Wi.length;i++)be(Wi[i],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":Hh(r,a),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},be("invalid",r);break;case"textarea":Jh(r,a),be("invalid",r)}ed(s,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&dl(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&dl(r.textContent,c,t),i=["children",""+c]):ca.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&be("scroll",r)}switch(s){case"input":sl(r),Gh(r,a,!0);break;case"textarea":sl(r),Yh(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Ql)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Np(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(s,{is:r.is}):(t=l.createElement(s),s==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,s),t[ys]=e,t[va]=r,H0(t,e,!1,!1),e.stateNode=t;e:{switch(l=td(s,r),s){case"dialog":be("cancel",t),be("close",t),i=r;break;case"iframe":case"object":case"embed":be("load",t),i=r;break;case"video":case"audio":for(i=0;i<Wi.length;i++)be(Wi[i],t);i=r;break;case"source":be("error",t),i=r;break;case"img":case"image":case"link":be("error",t),be("load",t),i=r;break;case"details":be("toggle",t),i=r;break;case"input":Hh(t,r),i=Gc(t,r),be("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pe({},r,{value:void 0}),be("invalid",t);break;case"textarea":Jh(t,r),i=Xc(t,r),be("invalid",t);break;default:i=r}ed(s,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var o=c[a];a==="style"?Cp(t,o):a==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&kp(t,o)):a==="children"?typeof o=="string"?(s!=="textarea"||o!=="")&&da(t,o):typeof o=="number"&&da(t,""+o):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ca.hasOwnProperty(a)?o!=null&&a==="onScroll"&&be("scroll",t):o!=null&&_u(t,a,o,l))}switch(s){case"input":sl(t),Gh(t,r,!1);break;case"textarea":sl(t),Yh(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Er(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Bn(t,!!r.multiple,a,!1):r.defaultValue!=null&&Bn(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ql)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)J0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(s=Vr(wa.current),Vr(ws.current),ul(e)){if(r=e.stateNode,s=e.memoizedProps,r[ys]=e,(a=r.nodeValue!==s)&&(t=It,t!==null))switch(t.tag){case 3:dl(r.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dl(r.nodeValue,s,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[ys]=e,e.stateNode=r}return rt(e),null;case 13:if(je(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_e&&Dt!==null&&e.mode&1&&!(e.flags&128))f0(),fi(),e.flags|=98560,a=!1;else if(a=ul(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error($(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error($(317));a[ys]=e}else fi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),a=!1}else is!==null&&(Id(is),is=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?Be===0&&(Be=3):ih())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return gi(),Cd(t,e),t===null&&xa(e.stateNode.containerInfo),rt(e),null;case 10:return zu(e.type._context),rt(e),null;case 17:return Pt(e.type)&&Hl(),rt(e),null;case 19:if(je(ke),a=e.memoizedState,a===null)return rt(e),null;if(r=(e.flags&128)!==0,l=a.rendering,l===null)if(r)$i(a,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=to(t),l!==null){for(e.flags|=128,$i(a,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=s,s=e.child;s!==null;)a=s,t=r,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return xe(ke,ke.current&1|2),e.child}t=t.sibling}a.tail!==null&&Ie()>yi&&(e.flags|=128,r=!0,$i(a,!1),e.lanes=4194304)}else{if(!r)if(t=to(l),t!==null){if(e.flags|=128,r=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),$i(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!_e)return rt(e),null}else 2*Ie()-a.renderingStartTime>yi&&s!==1073741824&&(e.flags|=128,r=!0,$i(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(s=a.last,s!==null?s.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ie(),e.sibling=null,s=ke.current,xe(ke,r?s&1|2:s&1),e):(rt(e),null);case 22:case 23:return nh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function jb(t,e){switch(Lu(e),e.tag){case 1:return Pt(e.type)&&Hl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gi(),je(Et),je(ct),Qu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ku(e),null;case 13:if(je(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));fi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(ke),null;case 4:return gi(),null;case 10:return zu(e.type._context),null;case 22:case 23:return nh(),null;case 24:return null;default:return null}}var fl=!1,lt=!1,_b=typeof WeakSet=="function"?WeakSet:Set,W=null;function Mn(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){Ae(t,e,r)}else s.current=null}function Ed(t,e,s){try{s()}catch(r){Ae(t,e,r)}}var Um=!1;function Nb(t,e){if(ud=Vl,t=t0(),Fu(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var l=0,c=-1,o=-1,d=0,u=0,h=t,m=null;t:for(;;){for(var g;h!==s||i!==0&&h.nodeType!==3||(c=l+i),h!==a||r!==0&&h.nodeType!==3||(o=l+r),h.nodeType===3&&(l+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===t)break t;if(m===s&&++d===i&&(c=l),m===a&&++u===r&&(o=l),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}s=c===-1||o===-1?null:{start:c,end:o}}else s=null}s=s||{start:0,end:0}}else s=null;for(hd={focusedElem:t,selectionRange:s},Vl=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,w=v.memoizedState,x=e.stateNode,p=x.getSnapshotBeforeUpdate(e.elementType===e.type?b:es(e.type,b),w);x.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var f=e.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(y){Ae(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return v=Um,Um=!1,v}function ea(t,e,s){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Ed(e,s,a)}i=i.next}while(i!==r)}}function Io(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var r=s.create;s.destroy=r()}s=s.next}while(s!==e)}}function Pd(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function Y0(t){var e=t.alternate;e!==null&&(t.alternate=null,Y0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ys],delete e[va],delete e[pd],delete e[ab],delete e[lb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function X0(t){return t.tag===5||t.tag===3||t.tag===4}function Mm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||X0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Od(t,e,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Ql));else if(r!==4&&(t=t.child,t!==null))for(Od(t,e,s),t=t.sibling;t!==null;)Od(t,e,s),t=t.sibling}function Td(t,e,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Td(t,e,s),t=t.sibling;t!==null;)Td(t,e,s),t=t.sibling}var Xe=null,rs=!1;function Ks(t,e,s){for(s=s.child;s!==null;)Z0(t,e,s),s=s.sibling}function Z0(t,e,s){if(bs&&typeof bs.onCommitFiberUnmount=="function")try{bs.onCommitFiberUnmount(Co,s)}catch{}switch(s.tag){case 5:lt||Mn(s,e);case 6:var r=Xe,i=rs;Xe=null,Ks(t,e,s),Xe=r,rs=i,Xe!==null&&(rs?(t=Xe,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Xe.removeChild(s.stateNode));break;case 18:Xe!==null&&(rs?(t=Xe,s=s.stateNode,t.nodeType===8?kc(t.parentNode,s):t.nodeType===1&&kc(t,s),fa(t)):kc(Xe,s.stateNode));break;case 4:r=Xe,i=rs,Xe=s.stateNode.containerInfo,rs=!0,Ks(t,e,s),Xe=r,rs=i;break;case 0:case 11:case 14:case 15:if(!lt&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Ed(s,e,l),i=i.next}while(i!==r)}Ks(t,e,s);break;case 1:if(!lt&&(Mn(s,e),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(c){Ae(s,e,c)}Ks(t,e,s);break;case 21:Ks(t,e,s);break;case 22:s.mode&1?(lt=(r=lt)||s.memoizedState!==null,Ks(t,e,s),lt=r):Ks(t,e,s);break;default:Ks(t,e,s)}}function zm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new _b),e.forEach(function(r){var i=Rb.bind(null,t,r);s.has(r)||(s.add(r),r.then(i,i))})}}function Xt(t,e){var s=e.deletions;if(s!==null)for(var r=0;r<s.length;r++){var i=s[r];try{var a=t,l=e,c=l;e:for(;c!==null;){switch(c.tag){case 5:Xe=c.stateNode,rs=!1;break e;case 3:Xe=c.stateNode.containerInfo,rs=!0;break e;case 4:Xe=c.stateNode.containerInfo,rs=!0;break e}c=c.return}if(Xe===null)throw Error($(160));Z0(a,l,i),Xe=null,rs=!1;var o=i.alternate;o!==null&&(o.return=null),i.return=null}catch(d){Ae(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eg(e,t),e=e.sibling}function eg(t,e){var s=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xt(e,t),hs(t),r&4){try{ea(3,t,t.return),Io(3,t)}catch(b){Ae(t,t.return,b)}try{ea(5,t,t.return)}catch(b){Ae(t,t.return,b)}}break;case 1:Xt(e,t),hs(t),r&512&&s!==null&&Mn(s,s.return);break;case 5:if(Xt(e,t),hs(t),r&512&&s!==null&&Mn(s,s.return),t.flags&32){var i=t.stateNode;try{da(i,"")}catch(b){Ae(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,l=s!==null?s.memoizedProps:a,c=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&jp(i,a),td(c,l);var d=td(c,a);for(l=0;l<o.length;l+=2){var u=o[l],h=o[l+1];u==="style"?Cp(i,h):u==="dangerouslySetInnerHTML"?kp(i,h):u==="children"?da(i,h):_u(i,u,h,d)}switch(c){case"input":Jc(i,a);break;case"textarea":_p(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?Bn(i,!!a.multiple,g,!1):m!==!!a.multiple&&(a.defaultValue!=null?Bn(i,!!a.multiple,a.defaultValue,!0):Bn(i,!!a.multiple,a.multiple?[]:"",!1))}i[va]=a}catch(b){Ae(t,t.return,b)}}break;case 6:if(Xt(e,t),hs(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(b){Ae(t,t.return,b)}}break;case 3:if(Xt(e,t),hs(t),r&4&&s!==null&&s.memoizedState.isDehydrated)try{fa(e.containerInfo)}catch(b){Ae(t,t.return,b)}break;case 4:Xt(e,t),hs(t);break;case 13:Xt(e,t),hs(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(sh=Ie())),r&4&&zm(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(lt=(d=lt)||u,Xt(e,t),lt=d):Xt(e,t),hs(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(W=t,u=t.child;u!==null;){for(h=W=u;W!==null;){switch(m=W,g=m.child,m.tag){case 0:case 11:case 14:case 15:ea(4,m,m.return);break;case 1:Mn(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,s=m.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(b){Ae(r,s,b)}}break;case 5:Mn(m,m.return);break;case 22:if(m.memoizedState!==null){Vm(h);continue}}g!==null?(g.return=m,W=g):Vm(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=h.stateNode,o=h.memoizedProps.style,l=o!=null&&o.hasOwnProperty("display")?o.display:null,c.style.display=Sp("display",l))}catch(b){Ae(t,t.return,b)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(b){Ae(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Xt(e,t),hs(t),r&4&&zm(t);break;case 21:break;default:Xt(e,t),hs(t)}}function hs(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(X0(s)){var r=s;break e}s=s.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(da(i,""),r.flags&=-33);var a=Mm(t);Td(t,a,i);break;case 3:case 4:var l=r.stateNode.containerInfo,c=Mm(t);Od(t,c,l);break;default:throw Error($(161))}}catch(o){Ae(t,t.return,o)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kb(t,e,s){W=t,tg(t)}function tg(t,e,s){for(var r=(t.mode&1)!==0;W!==null;){var i=W,a=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||fl;if(!l){var c=i.alternate,o=c!==null&&c.memoizedState!==null||lt;c=fl;var d=lt;if(fl=l,(lt=o)&&!d)for(W=i;W!==null;)l=W,o=l.child,l.tag===22&&l.memoizedState!==null?Wm(i):o!==null?(o.return=l,W=o):Wm(i);for(;a!==null;)W=a,tg(a),a=a.sibling;W=i,fl=c,lt=d}Bm(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,W=a):Bm(t)}}function Bm(t){for(;W!==null;){var e=W;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||Io(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(s===null)r.componentDidMount();else{var i=e.elementType===e.type?s.memoizedProps:es(e.type,s.memoizedProps);r.componentDidUpdate(i,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Cm(e,a,r);break;case 3:var l=e.updateQueue;if(l!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Cm(e,l,s)}break;case 5:var c=e.stateNode;if(s===null&&e.flags&4){s=c;var o=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&s.focus();break;case"img":o.src&&(s.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&fa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}lt||e.flags&512&&Pd(e)}catch(m){Ae(e,e.return,m)}}if(e===t){W=null;break}if(s=e.sibling,s!==null){s.return=e.return,W=s;break}W=e.return}}function Vm(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var s=e.sibling;if(s!==null){s.return=e.return,W=s;break}W=e.return}}function Wm(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Io(4,e)}catch(o){Ae(e,s,o)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(o){Ae(e,i,o)}}var a=e.return;try{Pd(e)}catch(o){Ae(e,a,o)}break;case 5:var l=e.return;try{Pd(e)}catch(o){Ae(e,l,o)}}}catch(o){Ae(e,e.return,o)}if(e===t){W=null;break}var c=e.sibling;if(c!==null){c.return=e.return,W=c;break}W=e.return}}var Sb=Math.ceil,no=Bs.ReactCurrentDispatcher,eh=Bs.ReactCurrentOwner,Qt=Bs.ReactCurrentBatchConfig,ie=0,He=null,qe=null,Ze=0,Rt=0,zn=Rr(0),Be=0,ka=null,ln=0,Fo=0,th=0,ta=null,kt=null,sh=0,yi=1/0,Es=null,io=!1,Ad=null,jr=null,pl=!1,pr=null,ao=0,sa=0,Rd=null,Rl=-1,Dl=0;function gt(){return ie&6?Ie():Rl!==-1?Rl:Rl=Ie()}function _r(t){return t.mode&1?ie&2&&Ze!==0?Ze&-Ze:cb.transition!==null?(Dl===0&&(Dl=qp()),Dl):(t=ue,t!==0||(t=window.event,t=t===void 0?16:Kp(t.type)),t):1}function ds(t,e,s,r){if(50<sa)throw sa=0,Rd=null,Error($(185));qa(t,s,r),(!(ie&2)||t!==He)&&(t===He&&(!(ie&2)&&(Fo|=s),Be===4&&Zs(t,Ze)),Ot(t,r),s===1&&ie===0&&!(e.mode&1)&&(yi=Ie()+500,Ao&&Dr()))}function Ot(t,e){var s=t.callbackNode;cv(t,e);var r=Bl(t,t===He?Ze:0);if(r===0)s!==null&&em(s),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(s!=null&&em(s),e===1)t.tag===0?ob(Km.bind(null,t)):u0(Km.bind(null,t)),nb(function(){!(ie&6)&&Dr()}),s=null;else{switch(Up(r)){case 1:s=Eu;break;case 4:s=$p;break;case 16:s=zl;break;case 536870912:s=Lp;break;default:s=zl}s=cg(s,sg.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function sg(t,e){if(Rl=-1,Dl=0,ie&6)throw Error($(327));var s=t.callbackNode;if(Hn()&&t.callbackNode!==s)return null;var r=Bl(t,t===He?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=lo(t,r);else{e=r;var i=ie;ie|=2;var a=ng();(He!==t||Ze!==e)&&(Es=null,yi=Ie()+500,tn(t,e));do try{Pb();break}catch(c){rg(t,c)}while(!0);Mu(),no.current=a,ie=i,qe!==null?e=0:(He=null,Ze=0,e=Be)}if(e!==0){if(e===2&&(i=ad(t),i!==0&&(r=i,e=Dd(t,i))),e===1)throw s=ka,tn(t,0),Zs(t,r),Ot(t,Ie()),s;if(e===6)Zs(t,r);else{if(i=t.current.alternate,!(r&30)&&!Cb(i)&&(e=lo(t,r),e===2&&(a=ad(t),a!==0&&(r=a,e=Dd(t,a))),e===1))throw s=ka,tn(t,0),Zs(t,r),Ot(t,Ie()),s;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:qr(t,kt,Es);break;case 3:if(Zs(t,r),(r&130023424)===r&&(e=sh+500-Ie(),10<e)){if(Bl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){gt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=fd(qr.bind(null,t,kt,Es),e);break}qr(t,kt,Es);break;case 4:if(Zs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-cs(r);a=1<<l,l=e[l],l>i&&(i=l),r&=~a}if(r=i,r=Ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sb(r/1960))-r,10<r){t.timeoutHandle=fd(qr.bind(null,t,kt,Es),r);break}qr(t,kt,Es);break;case 5:qr(t,kt,Es);break;default:throw Error($(329))}}}return Ot(t,Ie()),t.callbackNode===s?sg.bind(null,t):null}function Dd(t,e){var s=ta;return t.current.memoizedState.isDehydrated&&(tn(t,e).flags|=256),t=lo(t,e),t!==2&&(e=kt,kt=s,e!==null&&Id(e)),t}function Id(t){kt===null?kt=t:kt.push.apply(kt,t)}function Cb(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var i=s[r],a=i.getSnapshot;i=i.value;try{if(!us(a(),i))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zs(t,e){for(e&=~th,e&=~Fo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-cs(e),r=1<<s;t[s]=-1,e&=~r}}function Km(t){if(ie&6)throw Error($(327));Hn();var e=Bl(t,0);if(!(e&1))return Ot(t,Ie()),null;var s=lo(t,e);if(t.tag!==0&&s===2){var r=ad(t);r!==0&&(e=r,s=Dd(t,r))}if(s===1)throw s=ka,tn(t,0),Zs(t,e),Ot(t,Ie()),s;if(s===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qr(t,kt,Es),Ot(t,Ie()),null}function rh(t,e){var s=ie;ie|=1;try{return t(e)}finally{ie=s,ie===0&&(yi=Ie()+500,Ao&&Dr())}}function on(t){pr!==null&&pr.tag===0&&!(ie&6)&&Hn();var e=ie;ie|=1;var s=Qt.transition,r=ue;try{if(Qt.transition=null,ue=1,t)return t()}finally{ue=r,Qt.transition=s,ie=e,!(ie&6)&&Dr()}}function nh(){Rt=zn.current,je(zn)}function tn(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,rb(s)),qe!==null)for(s=qe.return;s!==null;){var r=s;switch(Lu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hl();break;case 3:gi(),je(Et),je(ct),Qu();break;case 5:Ku(r);break;case 4:gi();break;case 13:je(ke);break;case 19:je(ke);break;case 10:zu(r.type._context);break;case 22:case 23:nh()}s=s.return}if(He=t,qe=t=Nr(t.current,null),Ze=Rt=e,Be=0,ka=null,th=Fo=ln=0,kt=ta=null,Br!==null){for(e=0;e<Br.length;e++)if(s=Br[e],r=s.interleaved,r!==null){s.interleaved=null;var i=r.next,a=s.pending;if(a!==null){var l=a.next;a.next=i,r.next=l}s.pending=r}Br=null}return t}function rg(t,e){do{var s=qe;try{if(Mu(),Ol.current=ro,so){for(var r=Se.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}so=!1}if(an=0,Qe=ze=Se=null,Zi=!1,ja=0,eh.current=null,s===null||s.return===null){Be=1,ka=e,qe=null;break}e:{var a=t,l=s.return,c=s,o=e;if(e=Ze,c.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var d=o,u=c,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=Rm(l);if(g!==null){g.flags&=-257,Dm(g,l,c,a,e),g.mode&1&&Am(a,d,e),e=g,o=d;var v=e.updateQueue;if(v===null){var b=new Set;b.add(o),e.updateQueue=b}else v.add(o);break e}else{if(!(e&1)){Am(a,d,e),ih();break e}o=Error($(426))}}else if(_e&&c.mode&1){var w=Rm(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Dm(w,l,c,a,e),qu(xi(o,c));break e}}a=o=xi(o,c),Be!==4&&(Be=2),ta===null?ta=[a]:ta.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var x=U0(a,o,e);Sm(a,x);break e;case 1:c=o;var p=a.type,f=a.stateNode;if(!(a.flags&128)&&(typeof p.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(jr===null||!jr.has(f)))){a.flags|=65536,e&=-e,a.lanes|=e;var y=M0(a,c,e);Sm(a,y);break e}}a=a.return}while(a!==null)}ag(s)}catch(j){e=j,qe===s&&s!==null&&(qe=s=s.return);continue}break}while(!0)}function ng(){var t=no.current;return no.current=ro,t===null?ro:t}function ih(){(Be===0||Be===3||Be===2)&&(Be=4),He===null||!(ln&268435455)&&!(Fo&268435455)||Zs(He,Ze)}function lo(t,e){var s=ie;ie|=2;var r=ng();(He!==t||Ze!==e)&&(Es=null,tn(t,e));do try{Eb();break}catch(i){rg(t,i)}while(!0);if(Mu(),ie=s,no.current=r,qe!==null)throw Error($(261));return He=null,Ze=0,Be}function Eb(){for(;qe!==null;)ig(qe)}function Pb(){for(;qe!==null&&!ev();)ig(qe)}function ig(t){var e=og(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?ag(t):qe=e,eh.current=null}function ag(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=jb(s,e),s!==null){s.flags&=32767,qe=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Be=6,qe=null;return}}else if(s=wb(s,e,Rt),s!==null){qe=s;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Be===0&&(Be=5)}function qr(t,e,s){var r=ue,i=Qt.transition;try{Qt.transition=null,ue=1,Ob(t,e,s,r)}finally{Qt.transition=i,ue=r}return null}function Ob(t,e,s,r){do Hn();while(pr!==null);if(ie&6)throw Error($(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var a=s.lanes|s.childLanes;if(dv(t,a),t===He&&(qe=He=null,Ze=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||pl||(pl=!0,cg(zl,function(){return Hn(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=Qt.transition,Qt.transition=null;var l=ue;ue=1;var c=ie;ie|=4,eh.current=null,Nb(t,s),eg(s,t),Jv(hd),Vl=!!ud,hd=ud=null,t.current=s,kb(s),tv(),ie=c,ue=l,Qt.transition=a}else t.current=s;if(pl&&(pl=!1,pr=t,ao=i),a=t.pendingLanes,a===0&&(jr=null),nv(s.stateNode),Ot(t,Ie()),e!==null)for(r=t.onRecoverableError,s=0;s<e.length;s++)i=e[s],r(i.value,{componentStack:i.stack,digest:i.digest});if(io)throw io=!1,t=Ad,Ad=null,t;return ao&1&&t.tag!==0&&Hn(),a=t.pendingLanes,a&1?t===Rd?sa++:(sa=0,Rd=t):sa=0,Dr(),null}function Hn(){if(pr!==null){var t=Up(ao),e=Qt.transition,s=ue;try{if(Qt.transition=null,ue=16>t?16:t,pr===null)var r=!1;else{if(t=pr,pr=null,ao=0,ie&6)throw Error($(331));var i=ie;for(ie|=4,W=t.current;W!==null;){var a=W,l=a.child;if(W.flags&16){var c=a.deletions;if(c!==null){for(var o=0;o<c.length;o++){var d=c[o];for(W=d;W!==null;){var u=W;switch(u.tag){case 0:case 11:case 15:ea(8,u,a)}var h=u.child;if(h!==null)h.return=u,W=h;else for(;W!==null;){u=W;var m=u.sibling,g=u.return;if(Y0(u),u===d){W=null;break}if(m!==null){m.return=g,W=m;break}W=g}}}var v=a.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}W=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,W=l;else e:for(;W!==null;){if(a=W,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ea(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,W=x;break e}W=a.return}}var p=t.current;for(W=p;W!==null;){l=W;var f=l.child;if(l.subtreeFlags&2064&&f!==null)f.return=l,W=f;else e:for(l=p;W!==null;){if(c=W,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Io(9,c)}}catch(j){Ae(c,c.return,j)}if(c===l){W=null;break e}var y=c.sibling;if(y!==null){y.return=c.return,W=y;break e}W=c.return}}if(ie=i,Dr(),bs&&typeof bs.onPostCommitFiberRoot=="function")try{bs.onPostCommitFiberRoot(Co,t)}catch{}r=!0}return r}finally{ue=s,Qt.transition=e}}return!1}function Qm(t,e,s){e=xi(s,e),e=U0(t,e,1),t=wr(t,e,1),e=gt(),t!==null&&(qa(t,1,e),Ot(t,e))}function Ae(t,e,s){if(t.tag===3)Qm(t,t,s);else for(;e!==null;){if(e.tag===3){Qm(e,t,s);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jr===null||!jr.has(r))){t=xi(s,t),t=M0(e,t,1),e=wr(e,t,1),t=gt(),e!==null&&(qa(e,1,t),Ot(e,t));break}}e=e.return}}function Tb(t,e,s){var r=t.pingCache;r!==null&&r.delete(e),e=gt(),t.pingedLanes|=t.suspendedLanes&s,He===t&&(Ze&s)===s&&(Be===4||Be===3&&(Ze&130023424)===Ze&&500>Ie()-sh?tn(t,0):th|=s),Ot(t,e)}function lg(t,e){e===0&&(t.mode&1?(e=il,il<<=1,!(il&130023424)&&(il=4194304)):e=1);var s=gt();t=qs(t,e),t!==null&&(qa(t,e,s),Ot(t,s))}function Ab(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),lg(t,s)}function Rb(t,e){var s=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),lg(t,s)}var og;og=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||Et.current)Ct=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return Ct=!1,bb(t,e,s);Ct=!!(t.flags&131072)}else Ct=!1,_e&&e.flags&1048576&&h0(e,Yl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Al(t,e),t=e.pendingProps;var i=mi(e,ct.current);Qn(e,s),i=Gu(null,e,r,t,i,s);var a=Ju();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(r)?(a=!0,Gl(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Vu(e),i.updater=Do,e.stateNode=i,i._reactInternals=e,wd(e,r,t,s),e=Nd(null,e,r,!0,a,s)):(e.tag=0,_e&&a&&$u(e),mt(null,e,i,s),e=e.child),e;case 16:r=e.elementType;e:{switch(Al(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Ib(r),t=es(r,t),i){case 0:e=_d(null,e,r,t,s);break e;case 1:e=$m(null,e,r,t,s);break e;case 11:e=Im(null,e,r,t,s);break e;case 14:e=Fm(null,e,r,es(r.type,t),s);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:es(r,i),_d(t,e,r,i,s);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:es(r,i),$m(t,e,r,i,s);case 3:e:{if(W0(e),t===null)throw Error($(387));r=e.pendingProps,a=e.memoizedState,i=a.element,y0(t,e),eo(e,r,null,s);var l=e.memoizedState;if(r=l.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=xi(Error($(423)),e),e=Lm(t,e,r,s,i);break e}else if(r!==i){i=xi(Error($(424)),e),e=Lm(t,e,r,s,i);break e}else for(Dt=br(e.stateNode.containerInfo.firstChild),It=e,_e=!0,is=null,s=g0(e,null,r,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(fi(),r===i){e=Us(t,e,s);break e}mt(t,e,r,s)}e=e.child}return e;case 5:return v0(e),t===null&&yd(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,l=i.children,md(r,i)?l=null:a!==null&&md(r,a)&&(e.flags|=32),V0(t,e),mt(t,e,l,s),e.child;case 6:return t===null&&yd(e),null;case 13:return K0(t,e,s);case 4:return Wu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pi(e,null,r,s):mt(t,e,r,s),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:es(r,i),Im(t,e,r,i,s);case 7:return mt(t,e,e.pendingProps,s),e.child;case 8:return mt(t,e,e.pendingProps.children,s),e.child;case 12:return mt(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,l=i.value,xe(Xl,r._currentValue),r._currentValue=l,a!==null)if(us(a.value,l)){if(a.children===i.children&&!Et.current){e=Us(t,e,s);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){l=a.child;for(var o=c.firstContext;o!==null;){if(o.context===r){if(a.tag===1){o=Is(-1,s&-s),o.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?o.next=o:(o.next=u.next,u.next=o),d.pending=o}}a.lanes|=s,o=a.alternate,o!==null&&(o.lanes|=s),vd(a.return,s,e),c.lanes|=s;break}o=o.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error($(341));l.lanes|=s,c=l.alternate,c!==null&&(c.lanes|=s),vd(l,s,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}mt(t,e,i.children,s),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Qn(e,s),i=Gt(i),r=r(i),e.flags|=1,mt(t,e,r,s),e.child;case 14:return r=e.type,i=es(r,e.pendingProps),i=es(r.type,i),Fm(t,e,r,i,s);case 15:return z0(t,e,e.type,e.pendingProps,s);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:es(r,i),Al(t,e),e.tag=1,Pt(r)?(t=!0,Gl(e)):t=!1,Qn(e,s),q0(e,r,i),wd(e,r,i,s),Nd(null,e,r,!0,t,s);case 19:return Q0(t,e,s);case 22:return B0(t,e,s)}throw Error($(156,e.tag))};function cg(t,e){return Fp(t,e)}function Db(t,e,s,r){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,s,r){return new Db(t,e,s,r)}function ah(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ib(t){if(typeof t=="function")return ah(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ku)return 11;if(t===Su)return 14}return 2}function Nr(t,e){var s=t.alternate;return s===null?(s=Kt(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Il(t,e,s,r,i,a){var l=2;if(r=t,typeof t=="function")ah(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case An:return sn(s.children,i,a,e);case Nu:l=8,i|=8;break;case Wc:return t=Kt(12,s,e,i|2),t.elementType=Wc,t.lanes=a,t;case Kc:return t=Kt(13,s,e,i),t.elementType=Kc,t.lanes=a,t;case Qc:return t=Kt(19,s,e,i),t.elementType=Qc,t.lanes=a,t;case vp:return $o(s,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xp:l=10;break e;case yp:l=9;break e;case ku:l=11;break e;case Su:l=14;break e;case Gs:l=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Kt(l,s,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function sn(t,e,s,r){return t=Kt(7,t,r,e),t.lanes=s,t}function $o(t,e,s,r){return t=Kt(22,t,r,e),t.elementType=vp,t.lanes=s,t.stateNode={isHidden:!1},t}function Rc(t,e,s){return t=Kt(6,t,null,e),t.lanes=s,t}function Dc(t,e,s){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Fb(t,e,s,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fc(0),this.expirationTimes=fc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function lh(t,e,s,r,i,a,l,c,o){return t=new Fb(t,e,s,c,o),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Kt(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vu(a),t}function $b(t,e,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:s}}function dg(t){if(!t)return Pr;t=t._reactInternals;e:{if(xn(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var s=t.type;if(Pt(s))return d0(t,s,e)}return e}function ug(t,e,s,r,i,a,l,c,o){return t=lh(s,r,!0,t,i,a,l,c,o),t.context=dg(null),s=t.current,r=gt(),i=_r(s),a=Is(r,i),a.callback=e??null,wr(s,a,i),t.current.lanes=i,qa(t,i,r),Ot(t,r),t}function Lo(t,e,s,r){var i=e.current,a=gt(),l=_r(i);return s=dg(s),e.context===null?e.context=s:e.pendingContext=s,e=Is(a,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=wr(i,e,l),t!==null&&(ds(t,i,l,a),Pl(t,i,l)),l}function oo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function oh(t,e){Hm(t,e),(t=t.alternate)&&Hm(t,e)}function Lb(){return null}var hg=typeof reportError=="function"?reportError:function(t){console.error(t)};function ch(t){this._internalRoot=t}qo.prototype.render=ch.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Lo(t,e,null,null)};qo.prototype.unmount=ch.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;on(function(){Lo(null,t,null,null)}),e[Ls]=null}};function qo(t){this._internalRoot=t}qo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bp();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Xs.length&&e!==0&&e<Xs[s].priority;s++);Xs.splice(s,0,t),s===0&&Wp(t)}};function dh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Uo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gm(){}function qb(t,e,s,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var d=oo(l);a.call(d)}}var l=ug(e,r,t,0,null,!1,!1,"",Gm);return t._reactRootContainer=l,t[Ls]=l.current,xa(t.nodeType===8?t.parentNode:t),on(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var d=oo(o);c.call(d)}}var o=lh(t,0,!1,null,null,!1,!1,"",Gm);return t._reactRootContainer=o,t[Ls]=o.current,xa(t.nodeType===8?t.parentNode:t),on(function(){Lo(e,o,s,r)}),o}function Mo(t,e,s,r,i){var a=s._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var c=i;i=function(){var o=oo(l);c.call(o)}}Lo(e,l,t,i)}else l=qb(s,e,t,i,r);return oo(l)}Mp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=Vi(e.pendingLanes);s!==0&&(Pu(e,s|1),Ot(e,Ie()),!(ie&6)&&(yi=Ie()+500,Dr()))}break;case 13:on(function(){var r=qs(t,1);if(r!==null){var i=gt();ds(r,t,1,i)}}),oh(t,1)}};Ou=function(t){if(t.tag===13){var e=qs(t,134217728);if(e!==null){var s=gt();ds(e,t,134217728,s)}oh(t,134217728)}};zp=function(t){if(t.tag===13){var e=_r(t),s=qs(t,e);if(s!==null){var r=gt();ds(s,t,e,r)}oh(t,e)}};Bp=function(){return ue};Vp=function(t,e){var s=ue;try{return ue=t,e()}finally{ue=s}};rd=function(t,e,s){switch(e){case"input":if(Jc(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var r=s[e];if(r!==t&&r.form===t.form){var i=To(r);if(!i)throw Error($(90));wp(r),Jc(r,i)}}}break;case"textarea":_p(t,s);break;case"select":e=s.value,e!=null&&Bn(t,!!s.multiple,e,!1)}};Op=rh;Tp=on;var Ub={usingClientEntryPoint:!1,Events:[Ma,Fn,To,Ep,Pp,rh]},Li={findFiberByHostInstance:zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mb={bundleType:Li.bundleType,version:Li.version,rendererPackageName:Li.rendererPackageName,rendererConfig:Li.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dp(t),t===null?null:t.stateNode},findFiberByHostInstance:Li.findFiberByHostInstance||Lb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gl.isDisabled&&gl.supportsFiber)try{Co=gl.inject(Mb),bs=gl}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ub;$t.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dh(e))throw Error($(200));return $b(t,e,null,s)};$t.createRoot=function(t,e){if(!dh(t))throw Error($(299));var s=!1,r="",i=hg;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=lh(t,1,!1,null,null,s,!1,r,i),t[Ls]=e.current,xa(t.nodeType===8?t.parentNode:t),new ch(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Dp(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return on(t)};$t.hydrate=function(t,e,s){if(!Uo(e))throw Error($(200));return Mo(null,t,e,!0,s)};$t.hydrateRoot=function(t,e,s){if(!dh(t))throw Error($(405));var r=s!=null&&s.hydratedSources||null,i=!1,a="",l=hg;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),e=ug(e,null,t,1,s??null,i,!1,a,l),t[Ls]=e.current,xa(t),r)for(t=0;t<r.length;t++)s=r[t],i=s._getVersion,i=i(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,i]:e.mutableSourceEagerHydrationData.push(s,i);return new qo(e)};$t.render=function(t,e,s){if(!Uo(e))throw Error($(200));return Mo(null,t,e,!1,s)};$t.unmountComponentAtNode=function(t){if(!Uo(t))throw Error($(40));return t._reactRootContainer?(on(function(){Mo(null,null,t,!1,function(){t._reactRootContainer=null,t[Ls]=null})}),!0):!1};$t.unstable_batchedUpdates=rh;$t.unstable_renderSubtreeIntoContainer=function(t,e,s,r){if(!Uo(s))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Mo(t,e,s,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function mg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mg)}catch(t){console.error(t)}}mg(),mp.exports=$t;var zb=mp.exports,fg,Jm=zb;fg=Jm.createRoot,Jm.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sa(){return Sa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},Sa.apply(this,arguments)}var gr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gr||(gr={}));const Ym="popstate";function Bb(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:l,hash:c}=r.location;return Fd("",{pathname:a,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(r,i){return typeof i=="string"?i:co(i)}return Wb(e,s,null,t)}function Ce(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Vb(){return Math.random().toString(36).substr(2,8)}function Xm(t,e){return{usr:t.state,key:t.key,idx:e}}function Fd(t,e,s,r){return s===void 0&&(s=null),Sa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ni(e):e,{state:s,key:e&&e.key||r||Vb()})}function co(t){let{pathname:e="/",search:s="",hash:r=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ni(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Wb(t,e,s,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,c=gr.Pop,o=null,d=u();d==null&&(d=0,l.replaceState(Sa({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function h(){c=gr.Pop;let w=u(),x=w==null?null:w-d;d=w,o&&o({action:c,location:b.location,delta:x})}function m(w,x){c=gr.Push;let p=Fd(b.location,w,x);d=u()+1;let f=Xm(p,d),y=b.createHref(p);try{l.pushState(f,"",y)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(y)}a&&o&&o({action:c,location:b.location,delta:1})}function g(w,x){c=gr.Replace;let p=Fd(b.location,w,x);d=u();let f=Xm(p,d),y=b.createHref(p);l.replaceState(f,"",y),a&&o&&o({action:c,location:b.location,delta:0})}function v(w){let x=i.location.origin!=="null"?i.location.origin:i.location.href,p=typeof w=="string"?w:co(w);return p=p.replace(/ $/,"%20"),Ce(x,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,x)}let b={get action(){return c},get location(){return t(i,l)},listen(w){if(o)throw new Error("A history only accepts one active listener");return i.addEventListener(Ym,h),o=w,()=>{i.removeEventListener(Ym,h),o=null}},createHref(w){return e(i,w)},createURL:v,encodeLocation(w){let x=v(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:g,go(w){return l.go(w)}};return b}var Zm;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Zm||(Zm={}));function Kb(t,e,s){return s===void 0&&(s="/"),Qb(t,e,s,!1)}function Qb(t,e,s,r){let i=typeof e=="string"?Ni(e):e,a=vi(i.pathname||"/",s);if(a==null)return null;let l=gg(t);Hb(l);let c=null;for(let o=0;c==null&&o<l.length;++o){let d=iw(a);c=rw(l[o],d,r)}return c}function gg(t,e,s,r){e===void 0&&(e=[]),s===void 0&&(s=[]),r===void 0&&(r="");let i=(a,l,c)=>{let o={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};o.relativePath.startsWith("/")&&(Ce(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(r.length));let d=kr([r,o.relativePath]),u=s.concat(o);a.children&&a.children.length>0&&(Ce(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),gg(a.children,e,u,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:tw(d,a.index),routesMeta:u})};return t.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,l);else for(let o of xg(a.path))i(a,l,o)}),e}function xg(t){let e=t.split("/");if(e.length===0)return[];let[s,...r]=e,i=s.endsWith("?"),a=s.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=xg(r.join("/")),c=[];return c.push(...l.map(o=>o===""?a:[a,o].join("/"))),i&&c.push(...l),c.map(o=>t.startsWith("/")&&o===""?"/":o)}function Hb(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:sw(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const Gb=/^:[\w-]+$/,Jb=3,Yb=2,Xb=1,Zb=10,ew=-2,ef=t=>t==="*";function tw(t,e){let s=t.split("/"),r=s.length;return s.some(ef)&&(r+=ew),e&&(r+=Yb),s.filter(i=>!ef(i)).reduce((i,a)=>i+(Gb.test(a)?Jb:a===""?Xb:Zb),r)}function sw(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function rw(t,e,s){let{routesMeta:r}=t,i={},a="/",l=[];for(let c=0;c<r.length;++c){let o=r[c],d=c===r.length-1,u=a==="/"?e:e.slice(a.length)||"/",h=uo({path:o.relativePath,caseSensitive:o.caseSensitive,end:d},u),m=o.route;if(!h&&d&&s&&!r[r.length-1].route.index&&(h=uo({path:o.relativePath,caseSensitive:o.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),l.push({params:i,pathname:kr([a,h.pathname]),pathnameBase:cw(kr([a,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(a=kr([a,h.pathnameBase]))}return l}function uo(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=nw(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,u,h)=>{let{paramName:m,isOptional:g}=u;if(m==="*"){let b=c[h]||"";l=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const v=c[h];return g&&!v?d[m]=void 0:d[m]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:l,pattern:t}}function nw(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),pg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,o)=>(r.push({paramName:c,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function iw(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function vi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function aw(t,e){e===void 0&&(e="/");let{pathname:s,search:r="",hash:i=""}=typeof t=="string"?Ni(t):t;return{pathname:s?s.startsWith("/")?s:lw(s,e):e,search:dw(r),hash:uw(i)}}function lw(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Ic(t,e,s,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ow(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function uh(t,e){let s=ow(t);return e?s.map((r,i)=>i===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function hh(t,e,s,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ni(t):(i=Sa({},t),Ce(!i.pathname||!i.pathname.includes("?"),Ic("?","pathname","search",i)),Ce(!i.pathname||!i.pathname.includes("#"),Ic("#","pathname","hash",i)),Ce(!i.search||!i.search.includes("#"),Ic("#","search","hash",i)));let a=t===""||i.pathname==="",l=a?"/":i.pathname,c;if(l==null)c=s;else{let h=e.length-1;if(!r&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}c=h>=0?e[h]:"/"}let o=aw(i,c),d=l&&l!=="/"&&l.endsWith("/"),u=(a||l===".")&&s.endsWith("/");return!o.pathname.endsWith("/")&&(d||u)&&(o.pathname+="/"),o}const kr=t=>t.join("/").replace(/\/\/+/g,"/"),cw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uw=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yg=["post","put","patch","delete"];new Set(yg);const mw=["get",...yg];new Set(mw);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ca(){return Ca=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},Ca.apply(this,arguments)}const zo=N.createContext(null),vg=N.createContext(null),Vs=N.createContext(null),Bo=N.createContext(null),js=N.createContext({outlet:null,matches:[],isDataRoute:!1}),bg=N.createContext(null);function fw(t,e){let{relative:s}=e===void 0?{}:e;ki()||Ce(!1);let{basename:r,navigator:i}=N.useContext(Vs),{hash:a,pathname:l,search:c}=Vo(t,{relative:s}),o=l;return r!=="/"&&(o=l==="/"?r:kr([r,l])),i.createHref({pathname:o,search:c,hash:a})}function ki(){return N.useContext(Bo)!=null}function Si(){return ki()||Ce(!1),N.useContext(Bo).location}function wg(t){N.useContext(Vs).static||N.useLayoutEffect(t)}function bt(){let{isDataRoute:t}=N.useContext(js);return t?Pw():pw()}function pw(){ki()||Ce(!1);let t=N.useContext(zo),{basename:e,future:s,navigator:r}=N.useContext(Vs),{matches:i}=N.useContext(js),{pathname:a}=Si(),l=JSON.stringify(uh(i,s.v7_relativeSplatPath)),c=N.useRef(!1);return wg(()=>{c.current=!0}),N.useCallback(function(d,u){if(u===void 0&&(u={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let h=hh(d,JSON.parse(l),a,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:kr([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,l,a,t])}const gw=N.createContext(null);function xw(t){let e=N.useContext(js).outlet;return e&&N.createElement(gw.Provider,{value:t},e)}function Ba(){let{matches:t}=N.useContext(js),e=t[t.length-1];return e?e.params:{}}function Vo(t,e){let{relative:s}=e===void 0?{}:e,{future:r}=N.useContext(Vs),{matches:i}=N.useContext(js),{pathname:a}=Si(),l=JSON.stringify(uh(i,r.v7_relativeSplatPath));return N.useMemo(()=>hh(t,JSON.parse(l),a,s==="path"),[t,l,a,s])}function yw(t,e){return vw(t,e)}function vw(t,e,s,r){ki()||Ce(!1);let{navigator:i}=N.useContext(Vs),{matches:a}=N.useContext(js),l=a[a.length-1],c=l?l.params:{};l&&l.pathname;let o=l?l.pathnameBase:"/";l&&l.route;let d=Si(),u;if(e){var h;let w=typeof e=="string"?Ni(e):e;o==="/"||(h=w.pathname)!=null&&h.startsWith(o)||Ce(!1),u=w}else u=d;let m=u.pathname||"/",g=m;if(o!=="/"){let w=o.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=Kb(t,{pathname:g}),b=Nw(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:kr([o,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?o:kr([o,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,s,r);return e&&b?N.createElement(Bo.Provider,{value:{location:Ca({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:gr.Pop}},b):b}function bw(){let t=Ew(),e=hw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),s?N.createElement("pre",{style:i},s):null,null)}const ww=N.createElement(bw,null);class jw extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?N.createElement(js.Provider,{value:this.props.routeContext},N.createElement(bg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _w(t){let{routeContext:e,match:s,children:r}=t,i=N.useContext(zo);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),N.createElement(js.Provider,{value:e},r)}function Nw(t,e,s,r){var i;if(e===void 0&&(e=[]),s===void 0&&(s=null),r===void 0&&(r=null),t==null){var a;if(!s)return null;if(s.errors)t=s.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let l=t,c=(i=s)==null?void 0:i.errors;if(c!=null){let u=l.findIndex(h=>h.route.id&&(c==null?void 0:c[h.route.id])!==void 0);u>=0||Ce(!1),l=l.slice(0,Math.min(l.length,u+1))}let o=!1,d=-1;if(s&&r&&r.v7_partialHydration)for(let u=0;u<l.length;u++){let h=l[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:m,errors:g}=s,v=h.route.loader&&m[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||v){o=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,h,m)=>{let g,v=!1,b=null,w=null;s&&(g=c&&h.route.id?c[h.route.id]:void 0,b=h.route.errorElement||ww,o&&(d<0&&m===0?(v=!0,w=null):d===m&&(v=!0,w=h.route.hydrateFallbackElement||null)));let x=e.concat(l.slice(0,m+1)),p=()=>{let f;return g?f=b:v?f=w:h.route.Component?f=N.createElement(h.route.Component,null):h.route.element?f=h.route.element:f=u,N.createElement(_w,{match:h,routeContext:{outlet:u,matches:x,isDataRoute:s!=null},children:f})};return s&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?N.createElement(jw,{location:s.location,revalidation:s.revalidation,component:b,error:g,children:p(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):p()},null)}var jg=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(jg||{}),ho=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ho||{});function kw(t){let e=N.useContext(zo);return e||Ce(!1),e}function Sw(t){let e=N.useContext(vg);return e||Ce(!1),e}function Cw(t){let e=N.useContext(js);return e||Ce(!1),e}function _g(t){let e=Cw(),s=e.matches[e.matches.length-1];return s.route.id||Ce(!1),s.route.id}function Ew(){var t;let e=N.useContext(bg),s=Sw(ho.UseRouteError),r=_g(ho.UseRouteError);return e!==void 0?e:(t=s.errors)==null?void 0:t[r]}function Pw(){let{router:t}=kw(jg.UseNavigateStable),e=_g(ho.UseNavigateStable),s=N.useRef(!1);return wg(()=>{s.current=!0}),N.useCallback(function(i,a){a===void 0&&(a={}),s.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ca({fromRouteId:e},a)))},[t,e])}function Ow(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ng(t){let{to:e,replace:s,state:r,relative:i}=t;ki()||Ce(!1);let{future:a,static:l}=N.useContext(Vs),{matches:c}=N.useContext(js),{pathname:o}=Si(),d=bt(),u=hh(e,uh(c,a.v7_relativeSplatPath),o,i==="path"),h=JSON.stringify(u);return N.useEffect(()=>d(JSON.parse(h),{replace:s,state:r,relative:i}),[d,h,i,s,r]),null}function Tw(t){return xw(t.context)}function We(t){Ce(!1)}function Aw(t){let{basename:e="/",children:s=null,location:r,navigationType:i=gr.Pop,navigator:a,static:l=!1,future:c}=t;ki()&&Ce(!1);let o=e.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:o,navigator:a,static:l,future:Ca({v7_relativeSplatPath:!1},c)}),[o,c,a,l]);typeof r=="string"&&(r=Ni(r));let{pathname:u="/",search:h="",hash:m="",state:g=null,key:v="default"}=r,b=N.useMemo(()=>{let w=vi(u,o);return w==null?null:{location:{pathname:w,search:h,hash:m,state:g,key:v},navigationType:i}},[o,u,h,m,g,v,i]);return b==null?null:N.createElement(Vs.Provider,{value:d},N.createElement(Bo.Provider,{children:s,value:b}))}function Rw(t){let{children:e,location:s}=t;return yw($d(e),s)}new Promise(()=>{});function $d(t,e){e===void 0&&(e=[]);let s=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let a=[...e,i];if(r.type===N.Fragment){s.push.apply(s,$d(r.props.children,a));return}r.type!==We&&Ce(!1),!r.props.index||!r.props.children||Ce(!1);let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=$d(r.props.children,a)),s.push(l)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mo(){return mo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},mo.apply(this,arguments)}function kg(t,e){if(t==null)return{};var s={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(s[i]=t[i]);return s}function Dw(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Iw(t,e){return t.button===0&&(!e||e==="_self")&&!Dw(t)}const Fw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$w=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Lw="6";try{window.__reactRouterVersion=Lw}catch{}const qw=N.createContext({isTransitioning:!1}),Uw="startTransition",tf=Ty[Uw];function Mw(t){let{basename:e,children:s,future:r,window:i}=t,a=N.useRef();a.current==null&&(a.current=Bb({window:i,v5Compat:!0}));let l=a.current,[c,o]=N.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},u=N.useCallback(h=>{d&&tf?tf(()=>o(h)):o(h)},[o,d]);return N.useLayoutEffect(()=>l.listen(u),[l,u]),N.useEffect(()=>Ow(r),[r]),N.createElement(Aw,{basename:e,children:s,location:c.location,navigationType:c.action,navigator:l,future:r})}const zw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Bw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vw=N.forwardRef(function(e,s){let{onClick:r,relative:i,reloadDocument:a,replace:l,state:c,target:o,to:d,preventScrollReset:u,viewTransition:h}=e,m=kg(e,Fw),{basename:g}=N.useContext(Vs),v,b=!1;if(typeof d=="string"&&Bw.test(d)&&(v=d,zw))try{let f=new URL(window.location.href),y=d.startsWith("//")?new URL(f.protocol+d):new URL(d),j=vi(y.pathname,g);y.origin===f.origin&&j!=null?d=j+y.search+y.hash:b=!0}catch{}let w=fw(d,{relative:i}),x=Qw(d,{replace:l,state:c,target:o,preventScrollReset:u,relative:i,viewTransition:h});function p(f){r&&r(f),f.defaultPrevented||x(f)}return N.createElement("a",mo({},m,{href:v||w,onClick:b||a?r:p,ref:s,target:o}))}),Ww=N.forwardRef(function(e,s){let{"aria-current":r="page",caseSensitive:i=!1,className:a="",end:l=!1,style:c,to:o,viewTransition:d,children:u}=e,h=kg(e,$w),m=Vo(o,{relative:h.relative}),g=Si(),v=N.useContext(vg),{navigator:b,basename:w}=N.useContext(Vs),x=v!=null&&Hw(m)&&d===!0,p=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,f=g.pathname,y=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(f=f.toLowerCase(),y=y?y.toLowerCase():null,p=p.toLowerCase()),y&&w&&(y=vi(y,w)||y);const j=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let E=f===p||!l&&f.startsWith(p)&&f.charAt(j)==="/",P=y!=null&&(y===p||!l&&y.startsWith(p)&&y.charAt(p.length)==="/"),S={isActive:E,isPending:P,isTransitioning:x},C=E?r:void 0,T;typeof a=="function"?T=a(S):T=[a,E?"active":null,P?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let R=typeof c=="function"?c(S):c;return N.createElement(Vw,mo({},h,{"aria-current":C,className:T,ref:s,style:R,to:o,viewTransition:d}),typeof u=="function"?u(S):u)});var Ld;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ld||(Ld={}));var sf;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sf||(sf={}));function Kw(t){let e=N.useContext(zo);return e||Ce(!1),e}function Qw(t,e){let{target:s,replace:r,state:i,preventScrollReset:a,relative:l,viewTransition:c}=e===void 0?{}:e,o=bt(),d=Si(),u=Vo(t,{relative:l});return N.useCallback(h=>{if(Iw(h,s)){h.preventDefault();let m=r!==void 0?r:co(d)===co(u);o(t,{replace:m,state:i,preventScrollReset:a,relative:l,viewTransition:c})}},[d,o,u,r,i,s,t,a,l,c])}function Hw(t,e){e===void 0&&(e={});let s=N.useContext(qw);s==null&&Ce(!1);let{basename:r}=Kw(Ld.useViewTransitionState),i=Vo(t,{relative:e.relative});if(!s.isTransitioning)return!1;let a=vi(s.currentLocation.pathname,r)||s.currentLocation.pathname,l=vi(s.nextLocation.pathname,r)||s.nextLocation.pathname;return uo(i.pathname,l)!=null||uo(i.pathname,a)!=null}var yn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},cn=typeof window>"u"||"Deno"in globalThis;function at(){}function Gw(t,e){return typeof t=="function"?t(e):t}function qd(t){return typeof t=="number"&&t>=0&&t!==1/0}function Sg(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Sr(t,e){return typeof t=="function"?t(e):t}function as(t,e){return typeof t=="function"?t(e):t}function rf(t,e){const{type:s="all",exact:r,fetchStatus:i,predicate:a,queryKey:l,stale:c}=t;if(l){if(r){if(e.queryHash!==mh(l,e.options))return!1}else if(!Ea(e.queryKey,l))return!1}if(s!=="all"){const o=e.isActive();if(s==="active"&&!o||s==="inactive"&&o)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||a&&!a(e))}function nf(t,e){const{exact:s,status:r,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(s){if(dn(e.options.mutationKey)!==dn(a))return!1}else if(!Ea(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function mh(t,e){return((e==null?void 0:e.queryKeyHashFn)||dn)(t)}function dn(t){return JSON.stringify(t,(e,s)=>Ud(s)?Object.keys(s).sort().reduce((r,i)=>(r[i]=s[i],r),{}):s)}function Ea(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>Ea(t[s],e[s])):!1}function fh(t,e){if(t===e)return t;const s=af(t)&&af(e);if(s||Ud(t)&&Ud(e)){const r=s?t:Object.keys(t),i=r.length,a=s?e:Object.keys(e),l=a.length,c=s?[]:{},o=new Set(r);let d=0;for(let u=0;u<l;u++){const h=s?u:a[u];(!s&&o.has(h)||s)&&t[h]===void 0&&e[h]===void 0?(c[h]=void 0,d++):(c[h]=fh(t[h],e[h]),c[h]===t[h]&&t[h]!==void 0&&d++)}return i===l&&d===i?t:c}return e}function fo(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function af(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ud(t){if(!lf(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!lf(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function lf(t){return Object.prototype.toString.call(t)==="[object Object]"}function Jw(t){return new Promise(e=>{setTimeout(e,t)})}function Md(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?fh(t,e):e}function Yw(t,e,s=0){const r=[...t,e];return s&&r.length>s?r.slice(1):r}function Xw(t,e,s=0){const r=[e,...t];return s&&r.length>s?r.slice(0,-1):r}var ph=Symbol();function Cg(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ph?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Eg(t,e){return typeof t=="function"?t(...e):!!t}var Qr,rr,Jn,Wf,Zw=(Wf=class extends yn{constructor(){super();K(this,Qr);K(this,rr);K(this,Jn);U(this,Jn,e=>{if(!cn&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){_(this,rr)||this.setEventListener(_(this,Jn))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,rr))==null||e.call(this),U(this,rr,void 0))}setEventListener(e){var s;U(this,Jn,e),(s=_(this,rr))==null||s.call(this),U(this,rr,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){_(this,Qr)!==e&&(U(this,Qr,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof _(this,Qr)=="boolean"?_(this,Qr):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Qr=new WeakMap,rr=new WeakMap,Jn=new WeakMap,Wf),gh=new Zw,Yn,nr,Xn,Kf,ej=(Kf=class extends yn{constructor(){super();K(this,Yn,!0);K(this,nr);K(this,Xn);U(this,Xn,e=>{if(!cn&&window.addEventListener){const s=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){_(this,nr)||this.setEventListener(_(this,Xn))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,nr))==null||e.call(this),U(this,nr,void 0))}setEventListener(e){var s;U(this,Xn,e),(s=_(this,nr))==null||s.call(this),U(this,nr,e(this.setOnline.bind(this)))}setOnline(e){_(this,Yn)!==e&&(U(this,Yn,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return _(this,Yn)}},Yn=new WeakMap,nr=new WeakMap,Xn=new WeakMap,Kf),po=new ej;function zd(){let t,e;const s=new Promise((i,a)=>{t=i,e=a});s.status="pending",s.catch(()=>{});function r(i){Object.assign(s,i),delete s.resolve,delete s.reject}return s.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},s.reject=i=>{r({status:"rejected",reason:i}),e(i)},s}function tj(t){return Math.min(1e3*2**t,3e4)}function Pg(t){return(t??"online")==="online"?po.isOnline():!0}var Og=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Fc(t){return t instanceof Og}function Tg(t){let e=!1,s=0,r=!1,i;const a=zd(),l=b=>{var w;r||(m(new Og(b)),(w=t.abort)==null||w.call(t))},c=()=>{e=!0},o=()=>{e=!1},d=()=>gh.isFocused()&&(t.networkMode==="always"||po.isOnline())&&t.canRun(),u=()=>Pg(t.networkMode)&&t.canRun(),h=b=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,b),i==null||i(),a.resolve(b))},m=b=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,b),i==null||i(),a.reject(b))},g=()=>new Promise(b=>{var w;i=x=>{(r||d())&&b(x)},(w=t.onPause)==null||w.call(t)}).then(()=>{var b;i=void 0,r||(b=t.onContinue)==null||b.call(t)}),v=()=>{if(r)return;let b;const w=s===0?t.initialPromise:void 0;try{b=w??t.fn()}catch(x){b=Promise.reject(x)}Promise.resolve(b).then(h).catch(x=>{var E;if(r)return;const p=t.retry??(cn?0:3),f=t.retryDelay??tj,y=typeof f=="function"?f(s,x):f,j=p===!0||typeof p=="number"&&s<p||typeof p=="function"&&p(s,x);if(e||!j){m(x);return}s++,(E=t.onFail)==null||E.call(t,s,x),Jw(y).then(()=>d()?void 0:g()).then(()=>{e?m(x):v()})})};return{promise:a,cancel:l,continue:()=>(i==null||i(),a),cancelRetry:c,continueRetry:o,canStart:u,start:()=>(u()?v():g().then(v),a)}}var sj=t=>setTimeout(t,0);function rj(){let t=[],e=0,s=c=>{c()},r=c=>{c()},i=sj;const a=c=>{e?t.push(c):i(()=>{s(c)})},l=()=>{const c=t;t=[],c.length&&i(()=>{r(()=>{c.forEach(o=>{s(o)})})})};return{batch:c=>{let o;e++;try{o=c()}finally{e--,e||l()}return o},batchCalls:c=>(...o)=>{a(()=>{c(...o)})},schedule:a,setNotifyFunction:c=>{s=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var Re=rj(),Hr,Qf,Ag=(Qf=class{constructor(){K(this,Hr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qd(this.gcTime)&&U(this,Hr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(cn?1/0:5*60*1e3))}clearGcTimeout(){_(this,Hr)&&(clearTimeout(_(this,Hr)),U(this,Hr,void 0))}},Hr=new WeakMap,Qf),Zn,ei,Mt,Gr,it,Ta,Jr,ts,Ss,Hf,nj=(Hf=class extends Ag{constructor(e){super();K(this,ts);K(this,Zn);K(this,ei);K(this,Mt);K(this,Gr);K(this,it);K(this,Ta);K(this,Jr);U(this,Jr,!1),U(this,Ta,e.defaultOptions),this.setOptions(e.options),this.observers=[],U(this,Gr,e.client),U(this,Mt,_(this,Gr).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,U(this,Zn,ij(this.options)),this.state=e.state??_(this,Zn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=_(this,it))==null?void 0:e.promise}setOptions(e){this.options={..._(this,Ta),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&_(this,Mt).remove(this)}setData(e,s){const r=Md(this.state.data,e,this.options);return X(this,ts,Ss).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(e,s){X(this,ts,Ss).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var r,i;const s=(r=_(this,it))==null?void 0:r.promise;return(i=_(this,it))==null||i.cancel(e),s?s.then(at).catch(at):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(_(this,Zn))}isActive(){return this.observers.some(e=>as(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ph||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Sr(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Sg(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=_(this,it))==null||s.continue()}onOnline(){var s;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=_(this,it))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),_(this,Mt).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(_(this,it)&&(_(this,Jr)?_(this,it).cancel({revert:!0}):_(this,it).cancelRetry()),this.scheduleGc()),_(this,Mt).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||X(this,ts,Ss).call(this,{type:"invalidate"})}fetch(e,s){var d,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(_(this,it))return _(this,it).continueRetry(),_(this,it).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(g=>g.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(U(this,Jr,!0),r.signal)})},a=()=>{const m=Cg(this.options,s),v=(()=>{const b={client:_(this,Gr),queryKey:this.queryKey,meta:this.meta};return i(b),b})();return U(this,Jr,!1),this.options.persister?this.options.persister(m,v,this):m(v)},c=(()=>{const m={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:_(this,Gr),state:this.state,fetchFn:a};return i(m),m})();(d=this.options.behavior)==null||d.onFetch(c,this),U(this,ei,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=c.fetchOptions)==null?void 0:u.meta))&&X(this,ts,Ss).call(this,{type:"fetch",meta:(h=c.fetchOptions)==null?void 0:h.meta});const o=m=>{var g,v,b,w;Fc(m)&&m.silent||X(this,ts,Ss).call(this,{type:"error",error:m}),Fc(m)||((v=(g=_(this,Mt).config).onError)==null||v.call(g,m,this),(w=(b=_(this,Mt).config).onSettled)==null||w.call(b,this.state.data,m,this)),this.scheduleGc()};return U(this,it,Tg({initialPromise:s==null?void 0:s.initialPromise,fn:c.fetchFn,abort:r.abort.bind(r),onSuccess:m=>{var g,v,b,w;if(m===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(x){o(x);return}(v=(g=_(this,Mt).config).onSuccess)==null||v.call(g,m,this),(w=(b=_(this,Mt).config).onSettled)==null||w.call(b,m,this.state.error,this),this.scheduleGc()},onError:o,onFail:(m,g)=>{X(this,ts,Ss).call(this,{type:"failed",failureCount:m,error:g})},onPause:()=>{X(this,ts,Ss).call(this,{type:"pause"})},onContinue:()=>{X(this,ts,Ss).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),_(this,it).start()}},Zn=new WeakMap,ei=new WeakMap,Mt=new WeakMap,Gr=new WeakMap,it=new WeakMap,Ta=new WeakMap,Jr=new WeakMap,ts=new WeakSet,Ss=function(e){const s=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Rg(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Fc(i)&&i.revert&&_(this,ei)?{..._(this,ei),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=s(this.state),Re.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),_(this,Mt).notify({query:this,type:"updated",action:e})})},Hf);function Rg(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Pg(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function ij(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,r=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var ps,Gf,aj=(Gf=class extends yn{constructor(e={}){super();K(this,ps);this.config=e,U(this,ps,new Map)}build(e,s,r){const i=s.queryKey,a=s.queryHash??mh(i,s);let l=this.get(a);return l||(l=new nj({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(l)),l}add(e){_(this,ps).has(e.queryHash)||(_(this,ps).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=_(this,ps).get(e.queryHash);s&&(e.destroy(),s===e&&_(this,ps).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Re.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return _(this,ps).get(e)}getAll(){return[..._(this,ps).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>rf(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>rf(e,r)):s}notify(e){Re.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){Re.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Re.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ps=new WeakMap,Gf),gs,ut,Yr,xs,Qs,Jf,lj=(Jf=class extends Ag{constructor(e){super();K(this,xs);K(this,gs);K(this,ut);K(this,Yr);this.mutationId=e.mutationId,U(this,ut,e.mutationCache),U(this,gs,[]),this.state=e.state||Dg(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){_(this,gs).includes(e)||(_(this,gs).push(e),this.clearGcTimeout(),_(this,ut).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){U(this,gs,_(this,gs).filter(s=>s!==e)),this.scheduleGc(),_(this,ut).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){_(this,gs).length||(this.state.status==="pending"?this.scheduleGc():_(this,ut).remove(this))}continue(){var e;return((e=_(this,Yr))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,l,c,o,d,u,h,m,g,v,b,w,x,p,f,y,j,E,P,S;const s=()=>{X(this,xs,Qs).call(this,{type:"continue"})};U(this,Yr,Tg({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(C,T)=>{X(this,xs,Qs).call(this,{type:"failed",failureCount:C,error:T})},onPause:()=>{X(this,xs,Qs).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>_(this,ut).canRun(this)}));const r=this.state.status==="pending",i=!_(this,Yr).canStart();try{if(r)s();else{X(this,xs,Qs).call(this,{type:"pending",variables:e,isPaused:i}),await((l=(a=_(this,ut).config).onMutate)==null?void 0:l.call(a,e,this));const T=await((o=(c=this.options).onMutate)==null?void 0:o.call(c,e));T!==this.state.context&&X(this,xs,Qs).call(this,{type:"pending",context:T,variables:e,isPaused:i})}const C=await _(this,Yr).start();return await((u=(d=_(this,ut).config).onSuccess)==null?void 0:u.call(d,C,e,this.state.context,this)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,C,e,this.state.context)),await((v=(g=_(this,ut).config).onSettled)==null?void 0:v.call(g,C,null,this.state.variables,this.state.context,this)),await((w=(b=this.options).onSettled)==null?void 0:w.call(b,C,null,e,this.state.context)),X(this,xs,Qs).call(this,{type:"success",data:C}),C}catch(C){try{throw await((p=(x=_(this,ut).config).onError)==null?void 0:p.call(x,C,e,this.state.context,this)),await((y=(f=this.options).onError)==null?void 0:y.call(f,C,e,this.state.context)),await((E=(j=_(this,ut).config).onSettled)==null?void 0:E.call(j,void 0,C,this.state.variables,this.state.context,this)),await((S=(P=this.options).onSettled)==null?void 0:S.call(P,void 0,C,e,this.state.context)),C}finally{X(this,xs,Qs).call(this,{type:"error",error:C})}}finally{_(this,ut).runNext(this)}}},gs=new WeakMap,ut=new WeakMap,Yr=new WeakMap,xs=new WeakSet,Qs=function(e){const s=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Re.batch(()=>{_(this,gs).forEach(r=>{r.onMutationUpdate(e)}),_(this,ut).notify({mutation:this,type:"updated",action:e})})},Jf);function Dg(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ts,ss,Aa,Yf,oj=(Yf=class extends yn{constructor(e={}){super();K(this,Ts);K(this,ss);K(this,Aa);this.config=e,U(this,Ts,new Set),U(this,ss,new Map),U(this,Aa,0)}build(e,s,r){const i=new lj({mutationCache:this,mutationId:++Za(this,Aa)._,options:e.defaultMutationOptions(s),state:r});return this.add(i),i}add(e){_(this,Ts).add(e);const s=xl(e);if(typeof s=="string"){const r=_(this,ss).get(s);r?r.push(e):_(this,ss).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(_(this,Ts).delete(e)){const s=xl(e);if(typeof s=="string"){const r=_(this,ss).get(s);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&_(this,ss).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=xl(e);if(typeof s=="string"){const r=_(this,ss).get(s),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const s=xl(e);if(typeof s=="string"){const i=(r=_(this,ss).get(s))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Re.batch(()=>{_(this,Ts).forEach(e=>{this.notify({type:"removed",mutation:e})}),_(this,Ts).clear(),_(this,ss).clear()})}getAll(){return Array.from(_(this,Ts))}find(e){const s={exact:!0,...e};return this.getAll().find(r=>nf(s,r))}findAll(e={}){return this.getAll().filter(s=>nf(e,s))}notify(e){Re.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return Re.batch(()=>Promise.all(e.map(s=>s.continue().catch(at))))}},Ts=new WeakMap,ss=new WeakMap,Aa=new WeakMap,Yf);function xl(t){var e;return(e=t.options.scope)==null?void 0:e.id}function of(t){return{onFetch:(e,s)=>{var u,h,m,g,v;const r=e.options,i=(m=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,a=((g=e.state.data)==null?void 0:g.pages)||[],l=((v=e.state.data)==null?void 0:v.pageParams)||[];let c={pages:[],pageParams:[]},o=0;const d=async()=>{let b=!1;const w=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},x=Cg(e.options,e.fetchOptions),p=async(f,y,j)=>{if(b)return Promise.reject();if(y==null&&f.pages.length)return Promise.resolve(f);const P=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:y,direction:j?"backward":"forward",meta:e.options.meta};return w(R),R})(),S=await x(P),{maxPages:C}=e.options,T=j?Xw:Yw;return{pages:T(f.pages,S,C),pageParams:T(f.pageParams,y,C)}};if(i&&a.length){const f=i==="backward",y=f?cj:cf,j={pages:a,pageParams:l},E=y(r,j);c=await p(j,E,f)}else{const f=t??a.length;do{const y=o===0?l[0]??r.initialPageParam:cf(r,c);if(o>0&&y==null)break;c=await p(c,y),o++}while(o<f)}return c};e.options.persister?e.fetchFn=()=>{var b,w;return(w=(b=e.options).persister)==null?void 0:w.call(b,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=d}}}function cf(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function cj(t,{pages:e,pageParams:s}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,s[0],s):void 0}var Te,ir,ar,ti,si,lr,ri,ni,Xf,dj=(Xf=class{constructor(t={}){K(this,Te);K(this,ir);K(this,ar);K(this,ti);K(this,si);K(this,lr);K(this,ri);K(this,ni);U(this,Te,t.queryCache||new aj),U(this,ir,t.mutationCache||new oj),U(this,ar,t.defaultOptions||{}),U(this,ti,new Map),U(this,si,new Map),U(this,lr,0)}mount(){Za(this,lr)._++,_(this,lr)===1&&(U(this,ri,gh.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,Te).onFocus())})),U(this,ni,po.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,Te).onOnline())})))}unmount(){var t,e;Za(this,lr)._--,_(this,lr)===0&&((t=_(this,ri))==null||t.call(this),U(this,ri,void 0),(e=_(this,ni))==null||e.call(this),U(this,ni,void 0))}isFetching(t){return _(this,Te).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return _(this,ir).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=_(this,Te).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=_(this,Te).build(this,e),r=s.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(Sr(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return _(this,Te).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),i=_(this,Te).get(r.queryHash),a=i==null?void 0:i.state.data,l=Gw(e,a);if(l!==void 0)return _(this,Te).build(this,r).setData(l,{...s,manual:!0})}setQueriesData(t,e,s){return Re.batch(()=>_(this,Te).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=_(this,Te).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=_(this,Te);Re.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=_(this,Te);return Re.batch(()=>(s.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},r=Re.batch(()=>_(this,Te).findAll(t).map(i=>i.cancel(s)));return Promise.all(r).then(at).catch(at)}invalidateQueries(t,e={}){return Re.batch(()=>(_(this,Te).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},r=Re.batch(()=>_(this,Te).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,s);return s.throwOnError||(a=a.catch(at)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(at)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=_(this,Te).build(this,e);return s.isStaleByTime(Sr(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(at).catch(at)}fetchInfiniteQuery(t){return t.behavior=of(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(at).catch(at)}ensureInfiniteQueryData(t){return t.behavior=of(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return po.isOnline()?_(this,ir).resumePausedMutations():Promise.resolve()}getQueryCache(){return _(this,Te)}getMutationCache(){return _(this,ir)}getDefaultOptions(){return _(this,ar)}setDefaultOptions(t){U(this,ar,t)}setQueryDefaults(t,e){_(this,ti).set(dn(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[..._(this,ti).values()],s={};return e.forEach(r=>{Ea(t,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(t,e){_(this,si).set(dn(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[..._(this,si).values()],s={};return e.forEach(r=>{Ea(t,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={..._(this,ar).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=mh(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ph&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{..._(this,ar).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){_(this,Te).clear(),_(this,ir).clear()}},Te=new WeakMap,ir=new WeakMap,ar=new WeakMap,ti=new WeakMap,si=new WeakMap,lr=new WeakMap,ri=new WeakMap,ni=new WeakMap,Xf),jt,ne,Ra,ht,Xr,ii,or,cr,Da,ai,li,Zr,en,dr,oi,oe,Ki,Bd,Vd,Wd,Kd,Qd,Hd,Gd,Ig,Zf,xh=(Zf=class extends yn{constructor(e,s){super();K(this,oe);K(this,jt);K(this,ne);K(this,Ra);K(this,ht);K(this,Xr);K(this,ii);K(this,or);K(this,cr);K(this,Da);K(this,ai);K(this,li);K(this,Zr);K(this,en);K(this,dr);K(this,oi,new Set);this.options=s,U(this,jt,e),U(this,cr,null),U(this,or,zd()),this.options.experimental_prefetchInRender||_(this,or).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(_(this,ne).addObserver(this),df(_(this,ne),this.options)?X(this,oe,Ki).call(this):this.updateResult(),X(this,oe,Kd).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Jd(_(this,ne),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Jd(_(this,ne),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,X(this,oe,Qd).call(this),X(this,oe,Hd).call(this),_(this,ne).removeObserver(this)}setOptions(e){const s=this.options,r=_(this,ne);if(this.options=_(this,jt).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof as(this.options.enabled,_(this,ne))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");X(this,oe,Gd).call(this),_(this,ne).setOptions(this.options),s._defaulted&&!fo(this.options,s)&&_(this,jt).getQueryCache().notify({type:"observerOptionsUpdated",query:_(this,ne),observer:this});const i=this.hasListeners();i&&uf(_(this,ne),r,this.options,s)&&X(this,oe,Ki).call(this),this.updateResult(),i&&(_(this,ne)!==r||as(this.options.enabled,_(this,ne))!==as(s.enabled,_(this,ne))||Sr(this.options.staleTime,_(this,ne))!==Sr(s.staleTime,_(this,ne)))&&X(this,oe,Bd).call(this);const a=X(this,oe,Vd).call(this);i&&(_(this,ne)!==r||as(this.options.enabled,_(this,ne))!==as(s.enabled,_(this,ne))||a!==_(this,dr))&&X(this,oe,Wd).call(this,a)}getOptimisticResult(e){const s=_(this,jt).getQueryCache().build(_(this,jt),e),r=this.createResult(s,e);return hj(this,r)&&(U(this,ht,r),U(this,ii,this.options),U(this,Xr,_(this,ne).state)),r}getCurrentResult(){return _(this,ht)}trackResult(e,s){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),s==null||s(i),Reflect.get(r,i))})}trackProp(e){_(this,oi).add(e)}getCurrentQuery(){return _(this,ne)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=_(this,jt).defaultQueryOptions(e),r=_(this,jt).getQueryCache().build(_(this,jt),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(e){return X(this,oe,Ki).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),_(this,ht)))}createResult(e,s){var C;const r=_(this,ne),i=this.options,a=_(this,ht),l=_(this,Xr),c=_(this,ii),d=e!==r?e.state:_(this,Ra),{state:u}=e;let h={...u},m=!1,g;if(s._optimisticResults){const T=this.hasListeners(),R=!T&&df(e,s),D=T&&uf(e,r,s,i);(R||D)&&(h={...h,...Rg(u.data,e.options)}),s._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:b,status:w}=h;g=h.data;let x=!1;if(s.placeholderData!==void 0&&g===void 0&&w==="pending"){let T;a!=null&&a.isPlaceholderData&&s.placeholderData===(c==null?void 0:c.placeholderData)?(T=a.data,x=!0):T=typeof s.placeholderData=="function"?s.placeholderData((C=_(this,li))==null?void 0:C.state.data,_(this,li)):s.placeholderData,T!==void 0&&(w="success",g=Md(a==null?void 0:a.data,T,s),m=!0)}if(s.select&&g!==void 0&&!x)if(a&&g===(l==null?void 0:l.data)&&s.select===_(this,Da))g=_(this,ai);else try{U(this,Da,s.select),g=s.select(g),g=Md(a==null?void 0:a.data,g,s),U(this,ai,g),U(this,cr,null)}catch(T){U(this,cr,T)}_(this,cr)&&(v=_(this,cr),g=_(this,ai),b=Date.now(),w="error");const p=h.fetchStatus==="fetching",f=w==="pending",y=w==="error",j=f&&p,E=g!==void 0,S={status:w,fetchStatus:h.fetchStatus,isPending:f,isSuccess:w==="success",isError:y,isInitialLoading:j,isLoading:j,data:g,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:b,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:p,isRefetching:p&&!f,isLoadingError:y&&!E,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:y&&E,isStale:yh(e,s),refetch:this.refetch,promise:_(this,or)};if(this.options.experimental_prefetchInRender){const T=F=>{S.status==="error"?F.reject(S.error):S.data!==void 0&&F.resolve(S.data)},R=()=>{const F=U(this,or,S.promise=zd());T(F)},D=_(this,or);switch(D.status){case"pending":e.queryHash===r.queryHash&&T(D);break;case"fulfilled":(S.status==="error"||S.data!==D.value)&&R();break;case"rejected":(S.status!=="error"||S.error!==D.reason)&&R();break}}return S}updateResult(){const e=_(this,ht),s=this.createResult(_(this,ne),this.options);if(U(this,Xr,_(this,ne).state),U(this,ii,this.options),_(this,Xr).data!==void 0&&U(this,li,_(this,ne)),fo(s,e))return;U(this,ht,s);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!_(this,oi).size)return!0;const l=new Set(a??_(this,oi));return this.options.throwOnError&&l.add("error"),Object.keys(_(this,ht)).some(c=>{const o=c;return _(this,ht)[o]!==e[o]&&l.has(o)})};X(this,oe,Ig).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&X(this,oe,Kd).call(this)}},jt=new WeakMap,ne=new WeakMap,Ra=new WeakMap,ht=new WeakMap,Xr=new WeakMap,ii=new WeakMap,or=new WeakMap,cr=new WeakMap,Da=new WeakMap,ai=new WeakMap,li=new WeakMap,Zr=new WeakMap,en=new WeakMap,dr=new WeakMap,oi=new WeakMap,oe=new WeakSet,Ki=function(e){X(this,oe,Gd).call(this);let s=_(this,ne).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(at)),s},Bd=function(){X(this,oe,Qd).call(this);const e=Sr(this.options.staleTime,_(this,ne));if(cn||_(this,ht).isStale||!qd(e))return;const r=Sg(_(this,ht).dataUpdatedAt,e)+1;U(this,Zr,setTimeout(()=>{_(this,ht).isStale||this.updateResult()},r))},Vd=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(_(this,ne)):this.options.refetchInterval)??!1},Wd=function(e){X(this,oe,Hd).call(this),U(this,dr,e),!(cn||as(this.options.enabled,_(this,ne))===!1||!qd(_(this,dr))||_(this,dr)===0)&&U(this,en,setInterval(()=>{(this.options.refetchIntervalInBackground||gh.isFocused())&&X(this,oe,Ki).call(this)},_(this,dr)))},Kd=function(){X(this,oe,Bd).call(this),X(this,oe,Wd).call(this,X(this,oe,Vd).call(this))},Qd=function(){_(this,Zr)&&(clearTimeout(_(this,Zr)),U(this,Zr,void 0))},Hd=function(){_(this,en)&&(clearInterval(_(this,en)),U(this,en,void 0))},Gd=function(){const e=_(this,jt).getQueryCache().build(_(this,jt),this.options);if(e===_(this,ne))return;const s=_(this,ne);U(this,ne,e),U(this,Ra,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},Ig=function(e){Re.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(_(this,ht))}),_(this,jt).getQueryCache().notify({query:_(this,ne),type:"observerResultsUpdated"})})},Zf);function uj(t,e){return as(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function df(t,e){return uj(t,e)||t.state.data!==void 0&&Jd(t,e,e.refetchOnMount)}function Jd(t,e,s){if(as(e.enabled,t)!==!1&&Sr(e.staleTime,t)!=="static"){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&yh(t,e)}return!1}function uf(t,e,s,r){return(t!==e||as(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&yh(t,s)}function yh(t,e){return as(e.enabled,t)!==!1&&t.isStaleByTime(Sr(e.staleTime,t))}function hj(t,e){return!fo(t.getCurrentResult(),e)}function hf(t,e){const s=new Set(e);return t.filter(r=>!s.has(r))}function mj(t,e,s){const r=t.slice(0);return r[e]=s,r}var ci,zt,di,ui,Bt,ur,Ia,Fa,$a,tt,Yd,Xd,Zd,eu,tu,ep,fj=(ep=class extends yn{constructor(e,s,r){super();K(this,tt);K(this,ci);K(this,zt);K(this,di);K(this,ui);K(this,Bt);K(this,ur);K(this,Ia);K(this,Fa);K(this,$a,[]);U(this,ci,e),U(this,ui,r),U(this,di,[]),U(this,Bt,[]),U(this,zt,[]),this.setQueries(s)}onSubscribe(){this.listeners.size===1&&_(this,Bt).forEach(e=>{e.subscribe(s=>{X(this,tt,eu).call(this,e,s)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,_(this,Bt).forEach(e=>{e.destroy()})}setQueries(e,s){U(this,di,e),U(this,ui,s),Re.batch(()=>{const r=_(this,Bt),i=X(this,tt,Zd).call(this,_(this,di));U(this,$a,i),i.forEach(o=>o.observer.setOptions(o.defaultedQueryOptions));const a=i.map(o=>o.observer),l=a.map(o=>o.getCurrentResult()),c=a.some((o,d)=>o!==r[d]);r.length===a.length&&!c||(U(this,Bt,a),U(this,zt,l),this.hasListeners()&&(hf(r,a).forEach(o=>{o.destroy()}),hf(a,r).forEach(o=>{o.subscribe(d=>{X(this,tt,eu).call(this,o,d)})}),X(this,tt,tu).call(this)))})}getCurrentResult(){return _(this,zt)}getQueries(){return _(this,Bt).map(e=>e.getCurrentQuery())}getObservers(){return _(this,Bt)}getOptimisticResult(e,s){const r=X(this,tt,Zd).call(this,e),i=r.map(a=>a.observer.getOptimisticResult(a.defaultedQueryOptions));return[i,a=>X(this,tt,Xd).call(this,a??i,s),()=>X(this,tt,Yd).call(this,i,r)]}},ci=new WeakMap,zt=new WeakMap,di=new WeakMap,ui=new WeakMap,Bt=new WeakMap,ur=new WeakMap,Ia=new WeakMap,Fa=new WeakMap,$a=new WeakMap,tt=new WeakSet,Yd=function(e,s){return s.map((r,i)=>{const a=e[i];return r.defaultedQueryOptions.notifyOnChangeProps?a:r.observer.trackResult(a,l=>{s.forEach(c=>{c.observer.trackProp(l)})})})},Xd=function(e,s){return s?((!_(this,ur)||_(this,zt)!==_(this,Fa)||s!==_(this,Ia))&&(U(this,Ia,s),U(this,Fa,_(this,zt)),U(this,ur,fh(_(this,ur),s(e)))),_(this,ur)):e},Zd=function(e){const s=new Map(_(this,Bt).map(i=>[i.options.queryHash,i])),r=[];return e.forEach(i=>{const a=_(this,ci).defaultQueryOptions(i),l=s.get(a.queryHash);l?r.push({defaultedQueryOptions:a,observer:l}):r.push({defaultedQueryOptions:a,observer:new xh(_(this,ci),a)})}),r},eu=function(e,s){const r=_(this,Bt).indexOf(e);r!==-1&&(U(this,zt,mj(_(this,zt),r,s)),X(this,tt,tu).call(this))},tu=function(){var e;if(this.hasListeners()){const s=_(this,ur),r=X(this,tt,Yd).call(this,_(this,zt),_(this,$a)),i=X(this,tt,Xd).call(this,r,(e=_(this,ui))==null?void 0:e.combine);s!==i&&Re.batch(()=>{this.listeners.forEach(a=>{a(_(this,zt))})})}},ep),hr,mr,_t,As,Fs,Fl,su,tp,pj=(tp=class extends yn{constructor(s,r){super();K(this,Fs);K(this,hr);K(this,mr);K(this,_t);K(this,As);U(this,hr,s),this.setOptions(r),this.bindMethods(),X(this,Fs,Fl).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var i;const r=this.options;this.options=_(this,hr).defaultMutationOptions(s),fo(this.options,r)||_(this,hr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:_(this,_t),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&dn(r.mutationKey)!==dn(this.options.mutationKey)?this.reset():((i=_(this,_t))==null?void 0:i.state.status)==="pending"&&_(this,_t).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=_(this,_t))==null||s.removeObserver(this)}onMutationUpdate(s){X(this,Fs,Fl).call(this),X(this,Fs,su).call(this,s)}getCurrentResult(){return _(this,mr)}reset(){var s;(s=_(this,_t))==null||s.removeObserver(this),U(this,_t,void 0),X(this,Fs,Fl).call(this),X(this,Fs,su).call(this)}mutate(s,r){var i;return U(this,As,r),(i=_(this,_t))==null||i.removeObserver(this),U(this,_t,_(this,hr).getMutationCache().build(_(this,hr),this.options)),_(this,_t).addObserver(this),_(this,_t).execute(s)}},hr=new WeakMap,mr=new WeakMap,_t=new WeakMap,As=new WeakMap,Fs=new WeakSet,Fl=function(){var r;const s=((r=_(this,_t))==null?void 0:r.state)??Dg();U(this,mr,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},su=function(s){Re.batch(()=>{var r,i,a,l,c,o,d,u;if(_(this,As)&&this.hasListeners()){const h=_(this,mr).variables,m=_(this,mr).context;(s==null?void 0:s.type)==="success"?((i=(r=_(this,As)).onSuccess)==null||i.call(r,s.data,h,m),(l=(a=_(this,As)).onSettled)==null||l.call(a,s.data,null,h,m)):(s==null?void 0:s.type)==="error"&&((o=(c=_(this,As)).onError)==null||o.call(c,s.error,h,m),(u=(d=_(this,As)).onSettled)==null||u.call(d,void 0,s.error,h,m))}this.listeners.forEach(h=>{h(_(this,mr))})})},tp),Fg=N.createContext(void 0),le=t=>{const e=N.useContext(Fg);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},gj=({client:t,children:e})=>(N.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),n.jsx(Fg.Provider,{value:t,children:e})),$g=N.createContext(!1),Lg=()=>N.useContext($g);$g.Provider;function xj(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var yj=N.createContext(xj()),qg=()=>N.useContext(yj),Ug=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Mg=t=>{N.useEffect(()=>{t.clearReset()},[t])},zg=({result:t,errorResetBoundary:e,throwOnError:s,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||Eg(s,[t.error,r])),Bg=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),s=t.staleTime;t.staleTime=typeof s=="function"?(...r)=>e(s(...r)):e(s),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Vg=(t,e)=>t.isLoading&&t.isFetching&&!e,ru=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,go=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function vj({queries:t,...e},s){const r=le(),i=Lg(),a=qg(),l=N.useMemo(()=>t.map(b=>{const w=r.defaultQueryOptions(b);return w._optimisticResults=i?"isRestoring":"optimistic",w}),[t,r,i]);l.forEach(b=>{Bg(b),Ug(b,a)}),Mg(a);const[c]=N.useState(()=>new fj(r,l,e)),[o,d,u]=c.getOptimisticResult(l,e.combine),h=!i&&e.subscribed!==!1;N.useSyncExternalStore(N.useCallback(b=>h?c.subscribe(Re.batchCalls(b)):at,[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),N.useEffect(()=>{c.setQueries(l,e)},[l,e,c]);const g=o.some((b,w)=>ru(l[w],b))?o.flatMap((b,w)=>{const x=l[w];if(x){const p=new xh(r,x);if(ru(x,b))return go(x,p,a);Vg(b,i)&&go(x,p,a)}return[]}):[];if(g.length>0)throw Promise.all(g);const v=o.find((b,w)=>{const x=l[w];return x&&zg({result:b,errorResetBoundary:a,throwOnError:x.throwOnError,query:r.getQueryCache().get(x.queryHash),suspense:x.suspense})});if(v!=null&&v.error)throw v.error;return d(u())}function bj(t,e,s){var h,m,g,v,b;const r=Lg(),i=qg(),a=le(),l=a.defaultQueryOptions(t);(m=(h=a.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,l),l._optimisticResults=r?"isRestoring":"optimistic",Bg(l),Ug(l,i),Mg(i);const c=!a.getQueryCache().get(l.queryHash),[o]=N.useState(()=>new e(a,l)),d=o.getOptimisticResult(l),u=!r&&t.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(w=>{const x=u?o.subscribe(Re.batchCalls(w)):at;return o.updateResult(),x},[o,u]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),N.useEffect(()=>{o.setOptions(l)},[l,o]),ru(l,d))throw go(l,o,i);if(zg({result:d,errorResetBoundary:i,throwOnError:l.throwOnError,query:a.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((v=(g=a.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||v.call(g,l,d),l.experimental_prefetchInRender&&!cn&&Vg(d,r)){const w=c?go(l,o,i):(b=a.getQueryCache().get(l.queryHash))==null?void 0:b.promise;w==null||w.catch(at).finally(()=>{o.updateResult()})}return l.notifyOnChangeProps?d:o.trackResult(d)}function De(t,e){return bj(t,xh)}function he(t,e){const s=le(),[r]=N.useState(()=>new pj(s,t));N.useEffect(()=>{r.setOptions(t)},[r,t]);const i=N.useSyncExternalStore(N.useCallback(l=>r.subscribe(Re.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=N.useCallback((l,c)=>{r.mutate(l,c).catch(at)},[r]);if(i.error&&Eg(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}let wj={data:""},jj=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||wj,_j=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Nj=/\/\*[^]*?\*\/|  +/g,mf=/\n+/g,er=(t,e)=>{let s="",r="",i="";for(let a in t){let l=t[a];a[0]=="@"?a[1]=="i"?s=a+" "+l+";":r+=a[1]=="f"?er(l,a):a+"{"+er(l,a[1]=="k"?"":e)+"}":typeof l=="object"?r+=er(l,e?e.replace(/([^,])+/g,c=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,o=>/&/.test(o)?o.replace(/&/g,c):c?c+" "+o:o)):a):l!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=er.p?er.p(a,l):a+":"+l+";")}return s+(e&&i?e+"{"+i+"}":i)+r},Ns={},Wg=t=>{if(typeof t=="object"){let e="";for(let s in t)e+=s+Wg(t[s]);return e}return t},kj=(t,e,s,r,i)=>{let a=Wg(t),l=Ns[a]||(Ns[a]=(o=>{let d=0,u=11;for(;d<o.length;)u=101*u+o.charCodeAt(d++)>>>0;return"go"+u})(a));if(!Ns[l]){let o=a!==t?t:(d=>{let u,h,m=[{}];for(;u=_j.exec(d.replace(Nj,""));)u[4]?m.shift():u[3]?(h=u[3].replace(mf," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][u[1]]=u[2].replace(mf," ").trim();return m[0]})(t);Ns[l]=er(i?{["@keyframes "+l]:o}:o,s?"":"."+l)}let c=s&&Ns.g?Ns.g:null;return s&&(Ns.g=Ns[l]),((o,d,u,h)=>{h?d.data=d.data.replace(h,o):d.data.indexOf(o)===-1&&(d.data=u?o+d.data:d.data+o)})(Ns[l],e,r,c),l},Sj=(t,e,s)=>t.reduce((r,i,a)=>{let l=e[a];if(l&&l.call){let c=l(s),o=c&&c.props&&c.props.className||/^go/.test(c)&&c;l=o?"."+o:c&&typeof c=="object"?c.props?"":er(c,""):c===!1?"":c}return r+i+(l??"")},"");function Wo(t){let e=this||{},s=t.call?t(e.p):t;return kj(s.unshift?s.raw?Sj(s,[].slice.call(arguments,1),e.p):s.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):s,jj(e.target),e.g,e.o,e.k)}let Kg,nu,iu;Wo.bind({g:1});let Ms=Wo.bind({k:1});function Cj(t,e,s,r){er.p=e,Kg=t,nu=s,iu=r}function Ir(t,e){let s=this||{};return function(){let r=arguments;function i(a,l){let c=Object.assign({},a),o=c.className||i.className;s.p=Object.assign({theme:nu&&nu()},c),s.o=/ *go\d+/.test(o),c.className=Wo.apply(s,r)+(o?" "+o:"");let d=t;return t[0]&&(d=c.as||t,delete c.as),iu&&d[0]&&iu(c),Kg(d,c)}return i}}var Ej=t=>typeof t=="function",xo=(t,e)=>Ej(t)?t(e):t,Pj=(()=>{let t=0;return()=>(++t).toString()})(),Qg=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Oj=20,Hg=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,Oj)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:s}=e;return Hg(t,{type:t.toasts.find(a=>a.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},$l=[],Wr={toasts:[],pausedAt:void 0},vn=t=>{Wr=Hg(Wr,t),$l.forEach(e=>{e(Wr)})},Tj={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Aj=(t={})=>{let[e,s]=N.useState(Wr),r=N.useRef(Wr);N.useEffect(()=>(r.current!==Wr&&s(Wr),$l.push(s),()=>{let a=$l.indexOf(s);a>-1&&$l.splice(a,1)}),[]);let i=e.toasts.map(a=>{var l,c,o;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((l=t[a.type])==null?void 0:l.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((c=t[a.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||Tj[a.type],style:{...t.style,...(o=t[a.type])==null?void 0:o.style,...a.style}}});return{...e,toasts:i}},Rj=(t,e="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:(s==null?void 0:s.id)||Pj()}),Va=t=>(e,s)=>{let r=Rj(e,t,s);return vn({type:2,toast:r}),r.id},pt=(t,e)=>Va("blank")(t,e);pt.error=Va("error");pt.success=Va("success");pt.loading=Va("loading");pt.custom=Va("custom");pt.dismiss=t=>{vn({type:3,toastId:t})};pt.remove=t=>vn({type:4,toastId:t});pt.promise=(t,e,s)=>{let r=pt.loading(e.loading,{...s,...s==null?void 0:s.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let a=e.success?xo(e.success,i):void 0;return a?pt.success(a,{id:r,...s,...s==null?void 0:s.success}):pt.dismiss(r),i}).catch(i=>{let a=e.error?xo(e.error,i):void 0;a?pt.error(a,{id:r,...s,...s==null?void 0:s.error}):pt.dismiss(r)}),t};var Dj=(t,e)=>{vn({type:1,toast:{id:t,height:e}})},Ij=()=>{vn({type:5,time:Date.now()})},ra=new Map,Fj=1e3,$j=(t,e=Fj)=>{if(ra.has(t))return;let s=setTimeout(()=>{ra.delete(t),vn({type:4,toastId:t})},e);ra.set(t,s)},Lj=t=>{let{toasts:e,pausedAt:s}=Aj(t);N.useEffect(()=>{if(s)return;let a=Date.now(),l=e.map(c=>{if(c.duration===1/0)return;let o=(c.duration||0)+c.pauseDuration-(a-c.createdAt);if(o<0){c.visible&&pt.dismiss(c.id);return}return setTimeout(()=>pt.dismiss(c.id),o)});return()=>{l.forEach(c=>c&&clearTimeout(c))}},[e,s]);let r=N.useCallback(()=>{s&&vn({type:6,time:Date.now()})},[s]),i=N.useCallback((a,l)=>{let{reverseOrder:c=!1,gutter:o=8,defaultPosition:d}=l||{},u=e.filter(g=>(g.position||d)===(a.position||d)&&g.height),h=u.findIndex(g=>g.id===a.id),m=u.filter((g,v)=>v<h&&g.visible).length;return u.filter(g=>g.visible).slice(...c?[m+1]:[0,m]).reduce((g,v)=>g+(v.height||0)+o,0)},[e]);return N.useEffect(()=>{e.forEach(a=>{if(a.dismissed)$j(a.id,a.removeDelay);else{let l=ra.get(a.id);l&&(clearTimeout(l),ra.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:Dj,startPause:Ij,endPause:r,calculateOffset:i}}},qj=Ms`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Uj=Ms`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Mj=Ms`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,zj=Ir("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${qj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Uj} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Mj} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Bj=Ms`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Vj=Ir("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Bj} 1s linear infinite;
`,Wj=Ms`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Kj=Ms`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Qj=Ir("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Wj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Kj} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Hj=Ir("div")`
  position: absolute;
`,Gj=Ir("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Jj=Ms`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Yj=Ir("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Jj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Xj=({toast:t})=>{let{icon:e,type:s,iconTheme:r}=t;return e!==void 0?typeof e=="string"?N.createElement(Yj,null,e):e:s==="blank"?null:N.createElement(Gj,null,N.createElement(Vj,{...r}),s!=="loading"&&N.createElement(Hj,null,s==="error"?N.createElement(zj,{...r}):N.createElement(Qj,{...r})))},Zj=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,e_=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,t_="0%{opacity:0;} 100%{opacity:1;}",s_="0%{opacity:1;} 100%{opacity:0;}",r_=Ir("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,n_=Ir("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,i_=(t,e)=>{let s=t.includes("top")?1:-1,[r,i]=Qg()?[t_,s_]:[Zj(s),e_(s)];return{animation:e?`${Ms(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ms(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},a_=N.memo(({toast:t,position:e,style:s,children:r})=>{let i=t.height?i_(t.position||e||"top-center",t.visible):{opacity:0},a=N.createElement(Xj,{toast:t}),l=N.createElement(n_,{...t.ariaProps},xo(t.message,t));return N.createElement(r_,{className:t.className,style:{...i,...s,...t.style}},typeof r=="function"?r({icon:a,message:l}):N.createElement(N.Fragment,null,a,l))});Cj(N.createElement);var l_=({id:t,className:e,style:s,onHeightUpdate:r,children:i})=>{let a=N.useCallback(l=>{if(l){let c=()=>{let o=l.getBoundingClientRect().height;r(t,o)};c(),new MutationObserver(c).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return N.createElement("div",{ref:a,className:e,style:s},i)},o_=(t,e)=>{let s=t.includes("top"),r=s?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Qg()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(s?1:-1)}px)`,...r,...i}},c_=Wo`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,yl=16,d_=({reverseOrder:t,position:e="top-center",toastOptions:s,gutter:r,children:i,containerStyle:a,containerClassName:l})=>{let{toasts:c,handlers:o}=Lj(s);return N.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:yl,left:yl,right:yl,bottom:yl,pointerEvents:"none",...a},className:l,onMouseEnter:o.startPause,onMouseLeave:o.endPause},c.map(d=>{let u=d.position||e,h=o.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),m=o_(u,h);return N.createElement(l_,{id:d.id,key:d.id,onHeightUpdate:o.updateHeight,className:d.visible?c_:"",style:m},d.type==="custom"?xo(d.message,d):i?i(d):N.createElement(a_,{toast:d,position:u}))}))},G=pt;const u_="modulepreload",h_=function(t){return"/"+t},ff={},Wa=function(e,s,r){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(s.map(o=>{if(o=h_(o),o in ff)return;ff[o]=!0;const d=o.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":u_,d||(h.as="script"),h.crossOrigin="",h.href=o,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${o}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return i.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},m_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Wa(async()=>{const{default:r}=await Promise.resolve().then(()=>Ci);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class vh extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class f_ extends vh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class p_ extends vh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class g_ extends vh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var au;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(au||(au={}));var x_=function(t,e,s,r){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(r.next(u))}catch(h){l(h)}}function o(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((r=r.apply(t,e||[])).next())})};class y_{constructor(e,{headers:s={},customFetch:r,region:i=au.Any}={}){this.url=e,this.headers=s,this.region=i,this.fetch=m_(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return x_(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:l}=s;let c={},{region:o}=s;o||(o=this.region),o&&o!=="any"&&(c["x-region"]=o);let d;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",d=l):typeof l=="string"?(c["Content-Type"]="text/plain",d=l):typeof FormData<"u"&&l instanceof FormData?d=l:(c["Content-Type"]="application/json",d=JSON.stringify(l)));const u=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:d}).catch(v=>{throw new f_(v)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new p_(u);if(!u.ok)throw new g_(u);let m=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield u.json():m==="application/octet-stream"?g=yield u.blob():m==="text/event-stream"?g=u:m==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(i){return{data:null,error:i}}})}}var St={},bh={},Ko={},Ka={},Qo={},Ho={},v_=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},bi=v_();const b_=bi.fetch,Gg=bi.fetch.bind(bi),Jg=bi.Headers,w_=bi.Request,j_=bi.Response,Ci=Object.freeze(Object.defineProperty({__proto__:null,Headers:Jg,Request:w_,Response:j_,default:Gg,fetch:b_},Symbol.toStringTag,{value:"Module"})),__=py(Ci);var Go={};Object.defineProperty(Go,"__esModule",{value:!0});let N_=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Go.default=N_;var Yg=Ht&&Ht.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ho,"__esModule",{value:!0});const k_=Yg(__),S_=Yg(Go);let C_=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=k_.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var l,c,o;let d=null,u=null,h=null,m=a.status,g=a.statusText;if(a.ok){if(this.method!=="HEAD"){const x=await a.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=x:u=JSON.parse(x))}const b=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),w=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&w&&w.length>1&&(h=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,m=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const b=await a.text();try{d=JSON.parse(b),Array.isArray(d)&&a.status===404&&(u=[],d=null,m=200,g="OK")}catch{a.status===404&&b===""?(m=204,g="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((o=d==null?void 0:d.details)===null||o===void 0)&&o.includes("0 rows"))&&(d=null,m=200,g="OK"),d&&this.shouldThrowOnError)throw new S_.default(d)}return{error:d,data:u,count:h,status:m,statusText:g}});return this.shouldThrowOnError||(i=i.catch(a=>{var l,c,o;return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(c=a==null?void 0:a.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(o=a==null?void 0:a.code)!==null&&o!==void 0?o:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,s)}returns(){return this}overrideTypes(){return this}};Ho.default=C_;var E_=Ht&&Ht.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qo,"__esModule",{value:!0});const P_=E_(Ho);let O_=class extends P_.default{select(e){let s=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!s?"":(i==='"'&&(s=!s),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:r,foreignTable:i,referencedTable:a=i}={}){const l=a?`${a}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${e}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:r=s}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,s,{foreignTable:r,referencedTable:i=r}={}){const a=typeof i>"u"?"offset":`${i}.offset`,l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(l,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:r=!1,buffers:i=!1,wal:a=!1,format:l="text"}={}){var c;const o=[e?"analyze":null,s?"verbose":null,r?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${d}"; options=${o};`,l==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Qo.default=O_;var T_=Ht&&Ht.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ka,"__esModule",{value:!0});const A_=T_(Qo);let R_=class extends A_.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const r=Array.from(new Set(s)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:r,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const l=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${l}.${s}`),this}match(e){return Object.entries(e).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(e,s,r){return this.url.searchParams.append(e,`not.${s}.${r}`),this}or(e,{foreignTable:s,referencedTable:r=s}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,s,r){return this.url.searchParams.append(e,`${s}.${r}`),this}};Ka.default=R_;var D_=Ht&&Ht.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ko,"__esModule",{value:!0});const qi=D_(Ka);let I_=class{constructor(e,{headers:s={},schema:r,fetch:i}){this.url=e,this.headers=s,this.schema=r,this.fetch=i}select(e,{head:s=!1,count:r}={}){const i=s?"HEAD":"GET";let a=!1;const l=(e??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",l),r&&(this.headers.Prefer=`count=${r}`),new qi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:r=!0}={}){const i="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,o)=>c.concat(Object.keys(o)),[]);if(l.length>0){const c=[...new Set(l)].map(o=>`"${o}"`);this.url.searchParams.set("columns",c.join(","))}}return new qi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:i,defaultToNull:a=!0}={}){const l="POST",c=[`resolution=${r?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),a||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(e)){const o=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(o.length>0){const d=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new qi.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),this.headers.Prefer=i.join(","),new qi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new qi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ko.default=I_;var Jo={},Yo={};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.version=void 0;Yo.version="0.0.0-automated";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.DEFAULT_HEADERS=void 0;const F_=Yo;Jo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${F_.version}`};var Xg=Ht&&Ht.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bh,"__esModule",{value:!0});const $_=Xg(Ko),L_=Xg(Ka),q_=Jo;let U_=class Zg{constructor(e,{headers:s={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},q_.DEFAULT_HEADERS),s),this.schemaName=r,this.fetch=i}from(e){const s=new URL(`${this.url}/${e}`);return new $_.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Zg(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:i=!1,count:a}={}){let l;const c=new URL(`${this.url}/rpc/${e}`);let o;r||i?(l=r?"HEAD":"GET",Object.entries(s).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{c.searchParams.append(u,h)})):(l="POST",o=s);const d=Object.assign({},this.headers);return a&&(d.Prefer=`count=${a}`),new L_.default({method:l,url:c,headers:d,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};bh.default=U_;var Ei=Ht&&Ht.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(St,"__esModule",{value:!0});St.PostgrestError=St.PostgrestBuilder=St.PostgrestTransformBuilder=St.PostgrestFilterBuilder=St.PostgrestQueryBuilder=St.PostgrestClient=void 0;const ex=Ei(bh);St.PostgrestClient=ex.default;const tx=Ei(Ko);St.PostgrestQueryBuilder=tx.default;const sx=Ei(Ka);St.PostgrestFilterBuilder=sx.default;const rx=Ei(Qo);St.PostgrestTransformBuilder=rx.default;const nx=Ei(Ho);St.PostgrestBuilder=nx.default;const ix=Ei(Go);St.PostgrestError=ix.default;var M_=St.default={PostgrestClient:ex.default,PostgrestQueryBuilder:tx.default,PostgrestFilterBuilder:sx.default,PostgrestTransformBuilder:rx.default,PostgrestBuilder:nx.default,PostgrestError:ix.default};const{PostgrestClient:z_,PostgrestQueryBuilder:kS,PostgrestFilterBuilder:SS,PostgrestTransformBuilder:CS,PostgrestBuilder:ES,PostgrestError:PS}=M_;let lu;typeof window>"u"?lu=require("ws"):lu=window.WebSocket;const B_=lu,V_="2.11.10",W_={"X-Client-Info":`realtime-js/${V_}`},K_="1.0.0",ax=1e4,Q_=1e3;var Gn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Gn||(Gn={}));var dt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(dt||(dt={}));var ns;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ns||(ns={}));var ou;(function(t){t.websocket="websocket"})(ou||(ou={}));var Mr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Mr||(Mr={}));class H_{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const i=s.getUint8(1),a=s.getUint8(2);let l=this.HEADER_LENGTH+2;const c=r.decode(e.slice(l,l+i));l=l+i;const o=r.decode(e.slice(l,l+a));l=l+a;const d=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:c,event:o,payload:d}}}class lx{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(pe||(pe={}));const pf=(t,e,s={})=>{var r;const i=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,l)=>(a[l]=G_(l,t,e,i),a),{})},G_=(t,e,s,r)=>{const i=e.find(c=>c.name===t),a=i==null?void 0:i.type,l=s[t];return a&&!r.includes(a)?ox(a,l):cu(l)},ox=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Z_(e,s)}switch(t){case pe.bool:return J_(e);case pe.float4:case pe.float8:case pe.int2:case pe.int4:case pe.int8:case pe.numeric:case pe.oid:return Y_(e);case pe.json:case pe.jsonb:return X_(e);case pe.timestamp:return eN(e);case pe.abstime:case pe.date:case pe.daterange:case pe.int4range:case pe.int8range:case pe.money:case pe.reltime:case pe.text:case pe.time:case pe.timestamptz:case pe.timetz:case pe.tsrange:case pe.tstzrange:return cu(e);default:return cu(e)}},cu=t=>t,J_=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Y_=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},X_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Z_=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let a;const l=t.slice(1,s);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(c=>ox(e,c))}return t},eN=t=>typeof t=="string"?t.replace(" ","T"):t,cx=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class $c{constructor(e,s,r={},i=ax){this.channel=e,this.event=s,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var gf;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(gf||(gf={}));class na{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=na.syncState(this.state,i,a,l),this.pendingDiffs.forEach(o=>{this.state=na.syncDiff(this.state,o,a,l)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=na.syncDiff(this.state,i,a,l),c())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,i){const a=this.cloneDeep(e),l=this.transformState(s),c={},o={};return this.map(a,(d,u)=>{l[d]||(o[d]=u)}),this.map(l,(d,u)=>{const h=a[d];if(h){const m=u.map(w=>w.presence_ref),g=h.map(w=>w.presence_ref),v=u.filter(w=>g.indexOf(w.presence_ref)<0),b=h.filter(w=>m.indexOf(w.presence_ref)<0);v.length>0&&(c[d]=v),b.length>0&&(o[d]=b)}else c[d]=u}),this.syncDiff(a,{joins:c,leaves:o},r,i)}static syncDiff(e,s,r,i){const{joins:a,leaves:l}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(c,o)=>{var d;const u=(d=e[c])!==null&&d!==void 0?d:[];if(e[c]=this.cloneDeep(o),u.length>0){const h=e[c].map(g=>g.presence_ref),m=u.filter(g=>h.indexOf(g.presence_ref)<0);e[c].unshift(...m)}r(c,u,o)}),this.map(l,(c,o)=>{let d=e[c];if(!d)return;const u=o.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[c]=d,i(c,d,o),d.length===0&&delete e[c]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const i=e[r];return"metas"in i?s[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):s[r]=i,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xf;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(xf||(xf={}));var yf;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(yf||(yf={}));var Ps;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ps||(Ps={}));class wh{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=dt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new $c(this,ns.join,this.params,this.timeout),this.rejoinTimer=new lx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ns.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new na(this),this.broadcastEndpointURL=cx(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:l,private:c}}=this.params;this._onError(u=>e==null?void 0:e(Ps.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Ps.CLOSED));const o={},d={broadcast:a,presence:l,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:c};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},o)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(Ps.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,v=[];for(let b=0;b<g;b++){const w=m[b],{filter:{event:x,schema:p,table:f,filter:y}}=w,j=u&&u[b];if(j&&j.event===x&&j.schema===p&&j.table===f&&j.filter===y)v.push(Object.assign(Object.assign({},w),{id:j.id}));else{this.unsubscribe(),this.state=dt.errored,e==null||e(Ps.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Ps.SUBSCRIBED);return}}).receive("error",u=>{this.state=dt.errored,e==null||e(Ps.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ps.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:l}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,c,o;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((o=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||o===void 0)&&o.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=dt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ns.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const i=new $c(this,ns.leave,{},e);i.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(a),l}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new $c(this,e,s,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var i,a;const l=e.toLocaleLowerCase(),{close:c,error:o,leave:d,join:u}=ns;if(r&&[c,o,d,u].indexOf(l)>=0&&r!==this._joinRef())return;let m=this._onMessage(l,s,r);if(s&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var v,b,w;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(b=g.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===l}).map(g=>g.callback(m,r)):(a=this.bindings[l])===null||a===void 0||a.filter(g=>{var v,b,w,x,p,f;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in g){const y=g.id,j=(v=g.filter)===null||v===void 0?void 0:v.event;return y&&((b=s.ids)===null||b===void 0?void 0:b.includes(y))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((w=s.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const y=(p=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return y==="*"||y===((f=s==null?void 0:s.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===l}).map(g=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:b,table:w,commit_timestamp:x,type:p,errors:f}=v;m=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:x,eventType:p,new:{},old:{},errors:f}),this._getPayloadRecords(v))}g.callback(m,r)})}_isClosed(){return this.state===dt.closed}_isJoined(){return this.state===dt.joined}_isJoining(){return this.state===dt.joining}_isLeaving(){return this.state===dt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const i=e.toLocaleLowerCase(),a={type:i,filter:s,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&wh.isEqual(i.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ns.close,{},e)}_onError(e){this._on(ns.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=pf(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=pf(e.columns,e.old_record)),s}}const vf=()=>{},tN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class sN{constructor(e,s){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=W_,this.params={},this.timeout=ax,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vf,this.ref=0,this.logger=vf,this.conn=null,this.sendBuffer=[],this.serializer=new H_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...c)=>Wa(async()=>{const{default:o}=await Promise.resolve().then(()=>Ci);return{default:o}},void 0).then(({default:o})=>o(...c)):l=fetch,(...c)=>l(...c)},this.endPoint=`${e}/${ou.websocket}`,this.httpEndpoint=cx(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const i=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(a,l)=>l(JSON.stringify(a)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new lx(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=B_),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new rN(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:K_}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Gn.connecting:return Mr.Connecting;case Gn.open:return Mr.Open;case Gn.closing:return Mr.Closing;default:return Mr.Closed}}isConnected(){return this.connectionState()===Mr.Open}channel(e,s={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new wh(`realtime:${e}`,s,this);return this.channels.push(a),a}}push(e){const{topic:s,event:r,payload:i,ref:a}=e,l=()=>{this.encode(e,c=>{var o;(o=this.conn)===null||o===void 0||o.send(c)})};this.log("push",`${s} ${r} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{s&&r.updateJoinPayload({access_token:s,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(ns.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Q_,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:i,payload:a,ref:l}=s;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${r} ${i} ${l&&"("+l+")"||""}`,a),Array.from(this.channels).filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,a,l)),this.stateChangeCallbacks.message.forEach(c=>c(s))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ns.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${e}${r}${i}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([tN],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}}class rN{constructor(e,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Gn.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class jh extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ke(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class nN extends jh{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class du extends jh{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var iN=function(t,e,s,r){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(r.next(u))}catch(h){l(h)}}function o(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((r=r.apply(t,e||[])).next())})};const dx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Wa(async()=>{const{default:r}=await Promise.resolve().then(()=>Ci);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},aN=()=>iN(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Wa(()=>Promise.resolve().then(()=>Ci),void 0)).Response:Response}),uu=t=>{if(Array.isArray(t))return t.map(s=>uu(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const i=s.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=uu(r)}),e};var bn=function(t,e,s,r){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(r.next(u))}catch(h){l(h)}}function o(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((r=r.apply(t,e||[])).next())})};const Lc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),lN=(t,e,s)=>bn(void 0,void 0,void 0,function*(){const r=yield aN();t instanceof r&&!(s!=null&&s.noResolveJson)?t.json().then(i=>{e(new nN(Lc(i),t.status||500))}).catch(i=>{e(new du(Lc(i),i))}):e(new du(Lc(t),t))}),oN=(t,e,s,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),s))};function Qa(t,e,s,r,i,a){return bn(this,void 0,void 0,function*(){return new Promise((l,c)=>{t(s,oN(e,r,i,a)).then(o=>{if(!o.ok)throw o;return r!=null&&r.noResolveJson?o:o.json()}).then(o=>l(o)).catch(o=>lN(o,c,r))})})}function yo(t,e,s,r){return bn(this,void 0,void 0,function*(){return Qa(t,"GET",e,s,r)})}function Ys(t,e,s,r,i){return bn(this,void 0,void 0,function*(){return Qa(t,"POST",e,r,i,s)})}function cN(t,e,s,r,i){return bn(this,void 0,void 0,function*(){return Qa(t,"PUT",e,r,i,s)})}function dN(t,e,s,r){return bn(this,void 0,void 0,function*(){return Qa(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function ux(t,e,s,r,i){return bn(this,void 0,void 0,function*(){return Qa(t,"DELETE",e,r,i,s)})}var wt=function(t,e,s,r){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(r.next(u))}catch(h){l(h)}}function o(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((r=r.apply(t,e||[])).next())})};const uN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hN{constructor(e,s={},r,i){this.url=e,this.headers=s,this.bucketId=r,this.fetch=dx(i)}uploadOrUpdate(e,s,r,i){return wt(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},bf),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const o=l.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",l.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=r,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,o&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),i!=null&&i.headers&&(c=Object.assign(Object.assign({},c),i.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:a,headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{})),m=yield h.json();return h.ok?{data:{path:d,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(a){if(Ke(a))return{data:null,error:a};throw a}})}upload(e,s,r){return wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,i){return wt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",s);try{let o;const d=Object.assign({upsert:bf.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",d.cacheControl),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",d.cacheControl)):(o=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(c.toString(),{method:"PUT",body:o,headers:u}),m=yield h.json();return h.ok?{data:{path:a,fullPath:m.Key},error:null}:{data:null,error:m}}catch(o){if(Ke(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,s){return wt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);s!=null&&s.upsert&&(i["x-upsert"]="true");const a=yield Ys(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(this.url+a.url),c=l.searchParams.get("token");if(!c)throw new jh("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:c},error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}update(e,s,r){return wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return wt(this,void 0,void 0,function*(){try{return{data:yield Ys(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}copy(e,s,r){return wt(this,void 0,void 0,function*(){try{return{data:{path:(yield Ys(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}createSignedUrl(e,s,r){return wt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Ys(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}createSignedUrls(e,s,r){return wt(this,void 0,void 0,function*(){try{const i=yield Ys(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}download(e,s){return wt(this,void 0,void 0,function*(){const i=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),l=a?`?${a}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield yo(this.fetch,`${this.url}/${i}/${c}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(Ke(c))return{data:null,error:c};throw c}})}info(e){return wt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield yo(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:uu(r),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}exists(e){return wt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield dN(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ke(r)&&r instanceof du){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),i=[],a=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";a!==""&&i.push(a);const c=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});o!==""&&i.push(o);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(e){return wt(this,void 0,void 0,function*(){try{return{data:yield ux(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ke(s))return{data:null,error:s};throw s}})}list(e,s,r){return wt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},uN),s),{prefix:e||""});return{data:yield Ys(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const mN="2.7.1",fN={"X-Client-Info":`storage-js/${mN}`};var kn=function(t,e,s,r){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(r.next(u))}catch(h){l(h)}}function o(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((r=r.apply(t,e||[])).next())})};class pN{constructor(e,s={},r){this.url=e,this.headers=Object.assign(Object.assign({},fN),s),this.fetch=dx(r)}listBuckets(){return kn(this,void 0,void 0,function*(){try{return{data:yield yo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ke(e))return{data:null,error:e};throw e}})}getBucket(e){return kn(this,void 0,void 0,function*(){try{return{data:yield yo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ke(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return kn(this,void 0,void 0,function*(){try{return{data:yield Ys(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return kn(this,void 0,void 0,function*(){try{return{data:yield cN(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}emptyBucket(e){return kn(this,void 0,void 0,function*(){try{return{data:yield Ys(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ke(s))return{data:null,error:s};throw s}})}deleteBucket(e){return kn(this,void 0,void 0,function*(){try{return{data:yield ux(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ke(s))return{data:null,error:s};throw s}})}}class gN extends pN{constructor(e,s={},r){super(e,s,r)}from(e){return new hN(this.url,this.headers,e,this.fetch)}}const xN="2.50.0";let Qi="";typeof Deno<"u"?Qi="deno":typeof document<"u"?Qi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qi="react-native":Qi="node";const yN={"X-Client-Info":`supabase-js-${Qi}/${xN}`},vN={headers:yN},bN={schema:"public"},wN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jN={};var _N=function(t,e,s,r){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(r.next(u))}catch(h){l(h)}}function o(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((r=r.apply(t,e||[])).next())})};const NN=t=>{let e;return t?e=t:typeof fetch>"u"?e=Gg:e=fetch,(...s)=>e(...s)},kN=()=>typeof Headers>"u"?Jg:Headers,SN=(t,e,s)=>{const r=NN(s),i=kN();return(a,l)=>_N(void 0,void 0,void 0,function*(){var c;const o=(c=yield e())!==null&&c!==void 0?c:t;let d=new i(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${o}`),r(a,Object.assign(Object.assign({},l),{headers:d}))})};var CN=function(t,e,s,r){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(r.next(u))}catch(h){l(h)}}function o(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((r=r.apply(t,e||[])).next())})};function EN(t){return t.endsWith("/")?t:t+"/"}function PN(t,e){var s,r;const{db:i,auth:a,realtime:l,global:c}=t,{db:o,auth:d,realtime:u,global:h}=e,m={db:Object.assign(Object.assign({},o),i),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},u),l),global:Object.assign(Object.assign(Object.assign({},h),c),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>CN(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const hx="2.70.0",On=30*1e3,hu=3,qc=hu*On,ON="http://localhost:9999",TN="supabase.auth.token",AN={"X-Client-Info":`gotrue-js/${hx}`},mu="X-Supabase-Api-Version",mx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},RN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,DN=6e5;class _h extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function ee(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class IN extends _h{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function FN(t){return ee(t)&&t.name==="AuthApiError"}class fx extends _h{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Fr extends _h{constructor(e,s,r,i){super(e,r,i),this.name=s,this.status=r}}class Hs extends Fr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $N(t){return ee(t)&&t.name==="AuthSessionMissingError"}class vl extends Fr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bl extends Fr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class wl extends Fr{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function LN(t){return ee(t)&&t.name==="AuthImplicitGrantRedirectError"}class wf extends Fr{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fu extends Fr{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Uc(t){return ee(t)&&t.name==="AuthRetryableFetchError"}class jf extends Fr{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class ia extends Fr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const vo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_f=` 	
\r=`.split(""),qN=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<_f.length;e+=1)t[_f[e].charCodeAt(0)]=-2;for(let e=0;e<vo.length;e+=1)t[vo[e].charCodeAt(0)]=e;return t})();function Nf(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(vo[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(vo[r]),e.queuedBits-=6}}function px(t,e,s){const r=qN[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function kf(t){const e=[],s=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{zN(l,r,s)};for(let l=0;l<t.length;l+=1)px(t.charCodeAt(l),i,a);return e.join("")}function UN(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function MN(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}UN(r,e)}}function zN(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function BN(t){const e=[],s={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)px(t.charCodeAt(i),s,r);return new Uint8Array(e)}function VN(t){const e=[];return MN(t,s=>e.push(s)),new Uint8Array(e)}function WN(t){const e=[],s={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Nf(i,s,r)),Nf(null,s,r),e.join("")}function KN(t){return Math.round(Date.now()/1e3)+t}function QN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Zt=()=>typeof window<"u"&&typeof document<"u",$r={tested:!1,writable:!1},aa=()=>{if(!Zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($r.tested)return $r.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),$r.tested=!0,$r.writable=!0}catch{$r.tested=!0,$r.writable=!1}return $r.writable};function HN(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return s.searchParams.forEach((r,i)=>{e[i]=r}),e}const gx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Wa(async()=>{const{default:r}=await Promise.resolve().then(()=>Ci);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},GN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",xx=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},jl=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},_l=async(t,e)=>{await t.removeItem(e)};class Xo{constructor(){this.promise=new Xo.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Xo.promiseConstructor=Promise;function Mc(t){const e=t.split(".");if(e.length!==3)throw new ia("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!RN.test(e[r]))throw new ia("JWT not in base64url format");return{header:JSON.parse(kf(e[0])),payload:JSON.parse(kf(e[1])),signature:BN(e[2]),raw:{header:e[0],payload:e[1]}}}async function JN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function YN(t,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){r(l);return}}catch(l){if(!e(a,l)){i(l);return}}})()})}function XN(t){return("0"+t.toString(16)).substr(-2)}function ZN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let i="";for(let a=0;a<56;a++)i+=s.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,XN).join("")}async function e1(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function t1(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await e1(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sn(t,e,s=!1){const r=ZN();let i=r;s&&(i+="/PASSWORD_RECOVERY"),await xx(t,`${e}-code-verifier`,i);const a=await t1(r);return[a,r===a?"plain":"s256"]}const s1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function r1(t){const e=t.headers.get(mu);if(!e||!e.match(s1))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function n1(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function i1(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const a1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Cn(t){if(!a1.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var l1=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s};const Ur=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),o1=[502,503,504];async function Sf(t){var e;if(!GN(t))throw new fu(Ur(t),0);if(o1.includes(t.status))throw new fu(Ur(t),t.status);let s;try{s=await t.json()}catch(a){throw new fx(Ur(a),a)}let r;const i=r1(t);if(i&&i.getTime()>=mx["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new jf(Ur(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Hs}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new jf(Ur(s),t.status,s.weak_password.reasons);throw new IN(Ur(s),t.status||500,r)}const c1=(t,e,s,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),s))};async function se(t,e,s,r){var i;const a=Object.assign({},r==null?void 0:r.headers);a[mu]||(a[mu]=mx["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",o=await d1(t,e,s+c,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(o):{data:Object.assign({},o),error:null}}async function d1(t,e,s,r,i,a){const l=c1(e,r,i,a);let c;try{c=await t(s,Object.assign({},l))}catch(o){throw console.error(o),new fu(Ur(o),0)}if(c.ok||await Sf(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(o){await Sf(o)}}function Cs(t){var e;let s=null;f1(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=KN(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function Cf(t){const e=Cs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function tr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function u1(t){return{data:t,error:null}}function h1(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:i,verification_type:a}=t,l=l1(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:s,hashed_token:r,redirect_to:i,verification_type:a},o=Object.assign({},l);return{data:{properties:c,user:o},error:null}}function m1(t){return t}function f1(t){return t.access_token&&t.refresh_token&&t.expires_in}const zc=["global","local","others"];var p1=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s};class g1{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=gx(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=zc[0]){if(zc.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zc.join(", ")}`);try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:tr})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=p1(e,["options"]),i=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:h1,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ee(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:tr})}catch(s){if(ee(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,i,a,l,c,o;try{const d={nextPage:null,lastPage:0,total:0},u=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:m1});if(u.error)throw u.error;const h=await u.json(),m=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,g=(o=(c=u.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&o!==void 0?o:[];return g.length>0&&(g.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);d[`${w}Page`]=b}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(ee(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Cn(e);try{return await se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:tr})}catch(s){if(ee(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Cn(e);try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:tr})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){Cn(e);try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:tr})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Cn(e.userId);try{const{data:s,error:r}=await se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:r}}catch(s){if(ee(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Cn(e.userId),Cn(e.id);try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}}}const x1={getItem:t=>aa()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{aa()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{aa()&&globalThis.localStorage.removeItem(t)}};function Ef(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function y1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const En={debug:!!(globalThis&&aa()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class v1 extends yx{}async function b1(t,e,s){En.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),En.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){En.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await s()}finally{En.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw En.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new v1(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(En.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}y1();const w1={url:ON,storageKey:TN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:AN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Pf(t,e,s){return await s()}class Pa{constructor(e){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Pa.nextInstanceID,Pa.nextInstanceID+=1,this.instanceID>0&&Zt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},w1),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new g1({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=gx(i.fetch),this.lock=i.lock||Pf,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Zt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=b1:this.lock=Pf,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:aa()?this.storage=x1:(this.memoryStorage={},this.storage=Ef(this.memoryStorage)):(this.memoryStorage={},this.storage=Ef(this.memoryStorage)),Zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hx}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=HN(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),Zt()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(s,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),LN(a)){const o=(e=a.details)===null||e===void 0?void 0:e.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ee(s)?{error:s}:{error:new fx("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,i;try{const a=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Cs}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const o=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:d,session:o},error:null}}catch(a){if(ee(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var s,r,i;try{let a;if("email"in e){const{email:u,password:h,options:m}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Sn(this.storage,this.storageKey)),a=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},xform:Cs})}else if("phone"in e){const{phone:u,password:h,options:m}=e;a=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Cs})}else throw new bl("You must provide either an email or phone number and a password");const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const o=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:d,session:o},error:null}}catch(a){if(ee(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let s;if("email"in e){const{email:a,password:l,options:c}=e;s=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Cf})}else if("phone"in e){const{phone:a,password:l,options:c}=e;s=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Cf})}else throw new bl("You must provide either an email or phone number and a password");const{data:r,error:i}=s;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new vl}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,r,i,a,l,c,o,d,u,h,m,g;let v,b;if("message"in e)v=e.message,b=e.signature;else{const{chain:w,wallet:x,statement:p,options:f}=e;let y;if(Zt())if(typeof x=="object")y=x;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))y=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=x}const j=new URL((s=f==null?void 0:f.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in y&&y.signIn){const E=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),p?{statement:p}:null));let P;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")P=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)P=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)v=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),b=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in y)||typeof y.signMessage!="function"||!("publicKey"in y)||typeof y!="object"||!y.publicKey||!("toBase58"in y.publicKey)||typeof y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${j.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(i=(r=f==null?void 0:f.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=f==null?void 0:f.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((d=f==null?void 0:f.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((h=(u=f==null?void 0:f.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...f.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const E=await y.signMessage(new TextEncoder().encode(v),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=E}}try{const{data:w,error:x}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:WN(b)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Cs});if(x)throw x;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new vl}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:x})}catch(w){if(ee(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const s=await jl(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(s??"").split("/");try{const{data:a,error:l}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Cs});if(await _l(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new vl}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(ee(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:s,provider:r,token:i,access_token:a,nonce:l}=e,c=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Cs}),{data:o,error:d}=c;return d?{data:{user:null,session:null},error:d}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new vl}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:d})}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,i,a,l;try{if("email"in e){const{email:c,options:o}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Sn(this.storage,this.storageKey));const{error:h}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(s=o==null?void 0:o.data)!==null&&s!==void 0?s:{},create_user:(r=o==null?void 0:o.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:c,options:o}=e,{data:d,error:u}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=o==null?void 0:o.data)!==null&&i!==void 0?i:{},create_user:(a=o==null?void 0:o.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(l=o==null?void 0:o.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new bl("You must provide either an email or phone number.")}catch(c){if(ee(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var s,r;try{let i,a;"options"in e&&(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:c}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Cs});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const o=l.session,d=l.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:d,session:o},error:null}}catch(i){if(ee(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var s,r,i;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Sn(this.storage,this.storageKey)),await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:u1})}catch(a){if(ee(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Hs;const{error:i}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(ee(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:l}=await se(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:l,error:c}=await se(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c}}throw new bl("You must provide either an email or phone number and a type")}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await jl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<qc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(o,d,u)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(o,d,u))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:tr}):await this._useSession(async s=>{var r,i,a;const{data:l,error:c}=s;if(c)throw c;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hs}:await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:tr})})}catch(s){if(ee(s))return $N(s)&&(await this._removeSession(),await _l(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new Hs;const l=i.session;let c=null,o=null;this.flowType==="pkce"&&e.email!=null&&([c,o]=await Sn(this.storage,this.storageKey));const{data:d,error:u}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:o}),jwt:l.access_token,xform:tr});if(u)throw u;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Hs;const s=Date.now()/1e3;let r=s,i=!0,a=null;const{payload:l}=Mc(e.access_token);if(l.exp&&(r=l.exp,i=r<=s),i){const{session:c,error:o}=await this._callRefreshToken(e.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:o}=await this._getUser(e.access_token);if(o)throw o;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(s){if(ee(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:l,error:c}=s;if(c)throw c;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Hs;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Zt())throw new wl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new wl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new wf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wl("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new wf("No code detected.");const{data:p,error:f}=await this._exchangeCodeForSession(e.code);if(f)throw f;const y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:c,expires_at:o,token_type:d}=e;if(!a||!c||!l||!d)throw new wl("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(c);let m=u+h;o&&(m=parseInt(o));const g=m-u;g*1e3<=On&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const v=m-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,u);const{data:b,error:w}=await this._getUser(a);if(w)throw w;const x={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:h,expires_at:m,refresh_token:l,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(ee(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await jl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:i,error:a}=s;if(a)return{error:a};const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(FN(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await _l(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=QN(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,i;try{const{data:{session:a},error:l}=s;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,s={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Sn(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(a){if(ee(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:i}=await this._useSession(async a=>{var l,c,o,d,u;const{data:h,error:m}=a;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Zt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ee(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,i;const{data:a,error:l}=s;if(l)throw l;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(ee(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await YN(async i=>(i>0&&await JN(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Cs})),(i,a)=>{const l=200*Math.pow(2,i);return a&&Uc(a)&&Date.now()+l-r<On})}catch(r){if(this._debug(s,"error",r),ee(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),Zt()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await jl(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<qc;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${qc}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Uc(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Hs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Xo;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new Hs;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={session:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),ee(a)){const l={session:null,error:a};return Uc(a)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,s,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,s)}catch(o){a.push(o)}});if(await Promise.all(l),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await xx(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await _l(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Zt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),On);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/On);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${On}ms, refresh threshold is ${hu} ticks`),i<=hu&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof yx)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const i=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,l]=await Sn(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(c.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:i,error:a}=s;return a?{data:null,error:a}:await se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ee(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,i;const{data:a,error:l}=s;if(l)return{data:null,error:l};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:d}=await se(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((i=o==null?void 0:o.totp)===null||i===void 0)&&i.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(s){if(ee(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:i,error:a}=s;if(a)return{data:null,error:a};const{data:l,error:c}=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(s){if(ee(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:i,error:a}=s;return a?{data:null,error:a}:await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ee(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],i=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Mc(i.access_token);let c=null;l.aal&&(c=l.aal);let o=c;((r=(s=i.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=l.amr||[];return{data:{currentLevel:c,nextLevel:o,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(l=>l.kid===e);if(r||(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+DN>Date.now()))return r;const{data:i,error:a}=await se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!i.keys||i.keys.length===0)throw new ia("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(l=>l.kid===e),!r)throw new ia("No matching signing key found in JWKS");return r}async getClaims(e,s={keys:[]}){try{let r=e;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return{data:null,error:v};r=g.session.access_token}const{header:i,payload:a,signature:l,raw:{header:c,payload:o}}=Mc(r);if(n1(a.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:a,header:i,signature:l},error:null}}const d=i1(i.alg),u=await this.fetchJwk(i.kid,s),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,l,VN(`${c}.${o}`)))throw new ia("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}}Pa.nextInstanceID=0;const j1=Pa;class _1 extends j1{constructor(e){super(e)}}var N1=function(t,e,s,r){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(r.next(u))}catch(h){l(h)}}function o(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((r=r.apply(t,e||[])).next())})};class k1{constructor(e,s,r){var i,a,l;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const c=EN(e),o=new URL(c);this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const d=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:bN,realtime:jN,auth:Object.assign(Object.assign({},wN),{storageKey:d}),global:vN},h=PN(r??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=SN(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new z_(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new y_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new gN(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return N1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:i,storageKey:a,flowType:l,lock:c,debug:o},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _1({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:a,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:i,flowType:l,lock:c,debug:o,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new sN(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const S1=(t,e,s)=>new k1(t,e,s),vx="https://trcrjinrdjgizqhjdgvc.supabase.co",bx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRyY3JqaW5yZGpnaXpxaGpkZ3ZjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkwNDE2NTAsImV4cCI6MjA2NDYxNzY1MH0.2-y5r5UzIfcGoHc6BPkRy5rnxWxl4SJwxUehPWBxAao";console.log("Supabase configuration:",{url:vx,key:`${bx.substring(0,20)}...`});const I=S1(vx,bx,{auth:{persistSession:!0,autoRefreshToken:!0}});I.from("customers").select("count",{count:"exact",head:!0}).then(({count:t,error:e})=>{e?console.error("Supabase connection test failed:",e):console.log("Supabase connected successfully. Customer count:",t)});const wx=N.createContext(void 0),Zo=()=>{const t=N.useContext(wx);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},C1=({children:t})=>{const[e,s]=N.useState({user:null,adminUser:null,loading:!0,error:null}),r=async c=>{const{data:o,error:d}=await I.from("admin_users").select("*").eq("email",c.email).eq("active",!0).single();return d||!o?null:o},i=async(c,o)=>{s(d=>({...d,loading:!0,error:null}));try{const{data:d,error:u}=await I.auth.signInWithPassword({email:c,password:o});if(u)throw u;if(d.user){const h={id:d.user.id,email:d.user.email,created_at:d.user.created_at},m=await r(h);if(!m)throw await I.auth.signOut(),new Error("Unauthorized: You do not have admin access");s({user:h,adminUser:m,loading:!1,error:null})}}catch(d){throw s(u=>({...u,loading:!1,error:d instanceof Error?d.message:"Authentication failed"})),d}},a=async()=>{s(c=>({...c,loading:!0})),await I.auth.signOut(),s({user:null,adminUser:null,loading:!1,error:null})};N.useEffect(()=>{(async()=>{const{data:{session:d}}=await I.auth.getSession();if(d!=null&&d.user){const u={id:d.user.id,email:d.user.email,created_at:d.user.created_at},h=await r(u);if(!h){await I.auth.signOut(),s({user:null,adminUser:null,loading:!1,error:"Unauthorized: You do not have admin access"});return}s({user:u,adminUser:h,loading:!1,error:null})}else s(u=>({...u,loading:!1}))})();const{data:{subscription:o}}=I.auth.onAuthStateChange(async(d,u)=>{(d==="SIGNED_OUT"||!u)&&s({user:null,adminUser:null,loading:!1,error:null})});return()=>o.unsubscribe()},[]);const l={...e,signIn:i,signOut:a};return n.jsx(wx.Provider,{value:l,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var E1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),H=(t,e)=>{const s=N.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:c="",children:o,...d},u)=>N.createElement("svg",{ref:u,...E1,width:i,height:i,stroke:r,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${P1(t)}`,c].join(" "),...d},[...e.map(([h,m])=>N.createElement(h,m)),...Array.isArray(o)?o:[o]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=H("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=H("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=H("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=H("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=H("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=H("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=H("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=H("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=H("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=H("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=H("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=H("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=H("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=H("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=H("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=H("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=H("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=H("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=H("Cylinder",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5v14a9 3 0 0 0 18 0V5",key:"aqi0yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=H("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=H("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=H("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=H("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=H("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=H("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=H("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2h0a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"8ur5zv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=H("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=H("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=H("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=H("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=H("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=H("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=H("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=H("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=H("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=H("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=H("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=H("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=H("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=H("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=H("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=H("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=H("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=H("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=H("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=H("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=H("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=H("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=H("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=H("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=H("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=H("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=H("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=H("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=H("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=H("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=H("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),G1=({children:t})=>{const{user:e,adminUser:s,loading:r}=Zo();return r?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-6 w-6 animate-spin text-blue-600"}),n.jsx("span",{className:"text-gray-600",children:"Loading..."})]})}):!e||!s?n.jsx(Ng,{to:"/login",replace:!0}):n.jsx(n.Fragment,{children:t})},J1=({onMenuClick:t})=>{const{adminUser:e,signOut:s}=Zo(),r=async()=>{try{await s()}catch(i){console.error("Error signing out:",i)}};return n.jsxs("header",{className:"bg-white border-b border-gray-200 h-16 flex items-center justify-between px-6 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:t,className:"lg:hidden p-2 rounded-md hover:bg-gray-100 transition-colors",children:n.jsx(V1,{className:"h-6 w-6 text-gray-600"})}),n.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"LPG Order Management"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"flex items-center space-x-3",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[n.jsx(tc,{className:"h-4 w-4"}),n.jsxs("div",{className:"flex flex-col items-end",children:[n.jsx("span",{className:"font-medium text-gray-900",children:e==null?void 0:e.name}),n.jsx("span",{className:"text-xs capitalize",children:e==null?void 0:e.role})]})]})}),n.jsxs("button",{onClick:r,className:"flex items-center space-x-2 px-3 py-2 text-sm text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[n.jsx(z1,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Sign Out"})]})]})]})},Y1=[{name:"Dashboard",href:"/",icon:U1},{name:"Customers",href:"/customers",icon:Ga},{name:"Products",href:"/products",icon:ye},{name:"Warehouses",href:"/warehouses",icon:Or},{name:"Inventory",href:"/inventory",icon:un},{name:"Pricing",href:"/pricing",icon:zs},{name:"Orders",href:"/orders",icon:Oa}],X1=({isOpen:t,onClose:e})=>n.jsxs(n.Fragment,{children:[t&&n.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:e}),n.jsxs("aside",{className:`
          fixed top-0 left-0 z-50 h-full w-64 bg-gray-900 transform transition-transform duration-300 ease-in-out
          ${t?"translate-x-0":"-translate-x-full"}
          lg:translate-x-0 lg:static lg:z-auto lg:flex-shrink-0
        `,children:[n.jsxs("div",{className:"flex items-center justify-between p-4 lg:hidden border-b border-gray-700",children:[n.jsx("span",{className:"text-lg font-semibold text-white",children:"Menu"}),n.jsx("button",{onClick:e,className:"p-2 rounded-md hover:bg-gray-800 transition-colors",children:n.jsx(ot,{className:"h-5 w-5 text-gray-300"})})]}),n.jsx("div",{className:"hidden lg:flex items-center justify-center h-16 bg-gray-800 border-b border-gray-700",children:n.jsx("span",{className:"text-lg font-semibold text-white",children:"LPG Admin"})}),n.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:Y1.map(s=>n.jsxs(Ww,{to:s.href,onClick:e,className:({isActive:r})=>`flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${r?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-800"}`,children:[n.jsx(s.icon,{className:"h-5 w-5"}),n.jsx("span",{children:s.name})]},s.name))})]})]}),Z1=()=>{const[t,e]=N.useState(!1);return n.jsxs("div",{className:"h-screen flex overflow-hidden bg-gray-50",children:[n.jsx(X1,{isOpen:t,onClose:()=>e(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsx(J1,{onMenuClick:()=>e(!t)}),n.jsx("main",{className:"flex-1 overflow-y-auto",children:n.jsx("div",{className:"p-6",children:n.jsx(Tw,{})})})]})]})},e2=()=>{const{user:t,signIn:e,loading:s,error:r}=Zo(),[i,a]=N.useState({email:"",password:""}),[l,c]=N.useState(!1);if(t)return n.jsx(Ng,{to:"/",replace:!0});const o=async u=>{u.preventDefault(),c(!0);try{await e(i.email,i.password)}catch{}finally{c(!1)}},d=u=>{a(h=>({...h,[u.target.name]:u.target.value}))};return s?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-6 w-6 animate-spin text-blue-600"}),n.jsx("span",{className:"text-gray-600",children:"Loading..."})]})}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-600 rounded-full flex items-center justify-center",children:n.jsx(q1,{className:"h-8 w-8 text-white"})}),n.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Admin Portal"}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"LPG Order Management System"})]}),n.jsxs("form",{className:"mt-8 space-y-6",onSubmit:o,children:[r&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(O1,{className:"h-4 w-4 text-red-600"}),n.jsx("span",{className:"text-sm text-red-600",children:r})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),n.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i.email,onChange:d,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter your email"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),n.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:i.password,onChange:d,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter your password"})]})]}),n.jsx("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Signing in..."})]}):"Sign In"})]}),n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-xs text-gray-500",children:"Authorized personnel only. Please contact your administrator if you need access."})})]})})},t2=()=>De({queryKey:["dashboard-stats"],queryFn:async()=>{console.log("Fetching dashboard statistics");const{data:t,error:e}=await I.from("customers").select("account_status");e&&console.error("Error fetching customers:",e);const{data:s,error:r}=await I.from("products").select("status");r&&console.error("Error fetching products:",r);const{data:i,error:a}=await I.from("warehouses").select("id");a&&console.error("Error fetching warehouses:",a);const{data:l,error:c}=await I.from("inventory_balance").select("qty_full, qty_empty, qty_reserved");c&&console.error("Error fetching inventory:",c);const o={totalCustomers:(t==null?void 0:t.length)||0,activeCustomers:(t==null?void 0:t.filter(d=>d.account_status==="active").length)||0,totalProducts:(s==null?void 0:s.length)||0,activeProducts:(s==null?void 0:s.filter(d=>d.status==="active").length)||0,totalWarehouses:(i==null?void 0:i.length)||0,totalOrders:0,totalCylinders:(l==null?void 0:l.reduce((d,u)=>d+u.qty_full+u.qty_empty,0))||0,lowStockProducts:(l==null?void 0:l.filter(d=>d.qty_full-d.qty_reserved<=10).length)||0};return console.log("Dashboard stats calculated:",o),o},staleTime:6e4,refetchInterval:3e5}),s2=()=>De({queryKey:["recent-activity"],queryFn:async()=>{console.log("Fetching recent activity");const{data:t,error:e}=await I.from("customers").select("name, created_at").order("created_at",{ascending:!1}).limit(5);e&&console.error("Error fetching recent customers:",e);const{data:s,error:r}=await I.from("products").select("name, created_at").order("created_at",{ascending:!1}).limit(3);r&&console.error("Error fetching recent products:",r);const{data:i,error:a}=await I.from("inventory_balance").select(`
          updated_at,
          qty_full,
          qty_empty,
          product:products!inventory_balance_product_id_fkey(name, sku),
          warehouse:warehouses!inventory_balance_warehouse_id_fkey(name)
        `).order("updated_at",{ascending:!1}).limit(3);a&&console.error("Error fetching recent inventory:",a);const l=[];t==null||t.forEach(o=>{l.push({id:`customer-${o.name}`,type:"customer",message:`New customer registration: ${o.name}`,timestamp:o.created_at,color:"blue"})}),s==null||s.forEach(o=>{l.push({id:`product-${o.name}`,type:"product",message:`New product added: ${o.name}`,timestamp:o.created_at,color:"green"})}),i==null||i.forEach(o=>{o.product&&o.warehouse&&l.push({id:`inventory-${o.product.sku}-${o.warehouse.name}`,type:"inventory",message:`Stock updated: ${o.product.name} at ${o.warehouse.name}`,timestamp:o.updated_at,color:"orange"})});const c=l.sort((o,d)=>new Date(d.timestamp).getTime()-new Date(o.timestamp).getTime()).slice(0,10);return console.log("Recent activities:",c),c},staleTime:3e4,refetchInterval:6e4}),r2=()=>{const{adminUser:t}=Zo(),{data:e,isLoading:s,refetch:r}=t2(),{data:i,isLoading:a}=s2(),l=d=>{const u=new Date,h=new Date(d),m=Math.floor((u.getTime()-h.getTime())/(1e3*60));if(m<1)return"Just now";if(m<60)return`${m} minute${m>1?"s":""} ago`;const g=Math.floor(m/60);if(g<24)return`${g} hour${g>1?"s":""} ago`;const v=Math.floor(g/24);return`${v} day${v>1?"s":""} ago`},c=d=>{switch(d){case"blue":return"bg-blue-500";case"green":return"bg-green-500";case"orange":return"bg-orange-500";case"red":return"bg-red-500";default:return"bg-gray-500"}},o=[{name:"Active Customers",value:s?"...":((e==null?void 0:e.activeCustomers)||0).toLocaleString(),total:s?"...":((e==null?void 0:e.totalCustomers)||0).toLocaleString(),change:s?"...":`${(e==null?void 0:e.totalCustomers)||0} total`,changeType:"neutral",icon:Ga},{name:"Active Products",value:s?"...":((e==null?void 0:e.activeProducts)||0).toLocaleString(),total:s?"...":((e==null?void 0:e.totalProducts)||0).toLocaleString(),change:s?"...":`${(e==null?void 0:e.totalProducts)||0} total`,changeType:"neutral",icon:ye},{name:"Total Cylinders",value:s?"...":((e==null?void 0:e.totalCylinders)||0).toLocaleString(),change:s?"...":"across all warehouses",changeType:"positive",icon:fn},{name:"Warehouses",value:s?"...":((e==null?void 0:e.totalWarehouses)||0).toLocaleString(),change:s?"...":"storage locations",changeType:"neutral",icon:Or}];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),n.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",t==null?void 0:t.name,"!"]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("button",{onClick:()=>r(),disabled:s,className:"flex items-center space-x-2 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:[n.jsx(wn,{className:`h-4 w-4 ${s?"animate-spin":""}`}),n.jsx("span",{children:"Refresh"})]}),n.jsx(un,{className:"h-8 w-8 text-blue-600"})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map(d=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:d.name}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.value})]}),n.jsx("div",{className:"p-3 bg-blue-50 rounded-full",children:n.jsx(d.icon,{className:"h-6 w-6 text-blue-600"})})]}),n.jsx("div",{className:"mt-4 flex items-center",children:n.jsx("span",{className:"text-sm text-gray-500",children:d.change})})]},d.name))}),!s&&e&&e.lowStockProducts>0&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ve,{className:"h-5 w-5 text-red-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Low Stock Alert"}),n.jsxs("p",{className:"text-sm text-red-700",children:[e.lowStockProducts," product",e.lowStockProducts>1?"s have":" has"," low stock levels (10 available)"]})]})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),n.jsx(Of,{className:"h-5 w-5 text-gray-400"})]}),a?n.jsx("div",{className:"space-y-4",children:[...Array(3)].map((d,u)=>n.jsxs("div",{className:"animate-pulse flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-1"}),n.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/4"})]})]},u))}):i&&i.length>0?n.jsx("div",{className:"space-y-4",children:i.slice(0,6).map(d=>n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:`flex-shrink-0 w-2 h-2 rounded-full ${c(d.color)}`}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:d.message}),n.jsx("p",{className:"text-xs text-gray-500",children:l(d.timestamp)})]})]},d.id))}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Of,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No recent activity to display"})]})]})]})},n2=50,Cx=(t={})=>De({queryKey:["customers",t],queryFn:async()=>{console.log("Fetching customers with filters:",t);let e=I.from("customers").select(`
          *,
          primary_address:addresses!inner(
            id,
            line1,
            line2,
            city,
            state,
            postal_code,
            country
          )
        `,{count:"exact"}).eq("addresses.is_primary",!0).order("created_at",{ascending:!1});t.search&&(e=e.or(`name.ilike.%${t.search}%,email.ilike.%${t.search}%,tax_id.ilike.%${t.search}%`)),t.account_status&&(e=e.eq("account_status",t.account_status));const s=t.page||1,r=t.limit||n2,i=(s-1)*r,a=i+r-1;e=e.range(i,a);const{data:l,error:c,count:o}=await e;if(console.log("Customers with address response:",{customersWithAddress:l,errorWithAddress:c,countWithAddress:o}),c)throw console.error("Supabase error (with address):",c),new Error(c.message);let d=I.from("customers").select("*",{count:"exact"}).order("created_at",{ascending:!1});if(l&&l.length>0){const b=l.map(w=>w.id).filter(w=>w);b.length>0&&(d=d.not("id","in",`(${b.join(",")})`))}t.search&&(d=d.or(`name.ilike.%${t.search}%,email.ilike.%${t.search}%,tax_id.ilike.%${t.search}%`)),t.account_status&&(d=d.eq("account_status",t.account_status));const{data:u,error:h,count:m}=await d;console.log("Customers without address response:",{customersWithoutAddress:u,errorWithoutAddress:h,countWithoutAddress:m}),h&&console.error("Supabase error (without address):",h);const g=[...l||[],...(u||[]).map(b=>({...b,primary_address:null}))].sort((b,w)=>new Date(w.created_at).getTime()-new Date(b.created_at).getTime()),v=(o||0)+(m||0);return{customers:g,totalCount:v,totalPages:Math.ceil(v/r),currentPage:s}},retry:1,staleTime:3e4}),i2=t=>De({queryKey:["customer",t],queryFn:async()=>{if(console.log("Fetching customer:",t),!t||t==="null"||t==="undefined")throw new Error("Invalid customer ID");const{data:e,error:s}=await I.from("customers").select("*").eq("id",t).single();if(console.log("Customer fetch result:",{data:e,error:s}),s)throw console.error("Customer fetch error:",s),new Error(s.message);return e},enabled:!!t&&t!=="null"&&t!=="undefined"}),a2=()=>{const t=le();return he({mutationFn:async e=>{console.log("Creating customer:",e);const{data:s,error:r}=await I.from("customers").insert([{...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(console.log("Create customer result:",{data:s,error:r}),r)throw console.error("Create customer error:",r),new Error(r.message);return s},onSuccess:e=>{console.log("Customer created successfully:",e),t.invalidateQueries({queryKey:["customers"]}),G.success("Customer created successfully")},onError:e=>{console.error("Create customer mutation error:",e),G.error(e.message||"Failed to create customer")}})},Ex=()=>{const t=le();return he({mutationFn:async({id:e,...s})=>{if(console.log("Updating customer:",e,s),!e||e==="null"||e==="undefined")throw new Error("Invalid customer ID");const{data:r,error:i}=await I.from("customers").update({...s,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(console.log("Update customer result:",{data:r,error:i}),i)throw console.error("Update customer error:",i),new Error(i.message);return r},onSuccess:e=>{console.log("Customer updated successfully:",e),t.invalidateQueries({queryKey:["customers"]}),t.invalidateQueries({queryKey:["customer",e.id]}),G.success("Customer updated successfully")},onError:e=>{console.error("Update customer mutation error:",e),G.error(e.message||"Failed to update customer")}})},l2=()=>{const t=le();return he({mutationFn:async e=>{if(console.log("Deleting customer:",e),!e||e==="null"||e==="undefined")throw new Error("Invalid customer ID");const{error:s}=await I.from("customers").delete().eq("id",e);if(console.log("Delete customer result:",{error:s}),s)throw console.error("Delete customer error:",s),new Error(s.message);return e},onSuccess:e=>{console.log("Customer deleted successfully:",e),t.invalidateQueries({queryKey:["customers"]}),G.success("Customer deleted successfully")},onError:e=>{console.error("Delete customer mutation error:",e),G.error(e.message||"Failed to delete customer")}})},rc=({status:t,className:e="",children:s})=>{const r=()=>{switch(t){case"active":return"bg-green-100 text-green-800 border-green-200";case"credit_hold":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"closed":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},i=()=>{if(s)return s;switch(t){case"active":return"Active";case"credit_hold":return"Credit Hold";case"closed":return"Closed";default:return t}};return n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${r()} ${e}`,children:i()})},Px=t=>[t.line1,t.line2,t.city,t.state,t.postal_code].filter(Boolean).join(", "),o2=t=>{const e=t.label||`Address #${t.id.slice(-4)}`,s=Px(t);return`${e} - ${s}`},c2=(t,e)=>{if(!t||!e)return"";const s=r=>{const[i,a]=r.split(":"),l=parseInt(i,10),c=l>=12?"PM":"AM";return`${l===0?12:l>12?l-12:l}:${a} ${c}`};return`${s(t)} - ${s(e)}`},Af=(t,e)=>{if(!t||!e)return!0;const s=new Date(`1970-01-01T${t}`),r=new Date(`1970-01-01T${e}`);return s<r},Ox=()=>[{value:"US",label:"United States"},{value:"CA",label:"Canada"},{value:"MX",label:"Mexico"},{value:"GB",label:"United Kingdom"},{value:"AU",label:"Australia"},{value:"IN",label:"India"},{value:"KE",label:"Kenya"},{value:"NG",label:"Nigeria"},{value:"ZA",label:"South Africa"}],d2=async t=>{try{const e=[t.line1,t.line2,t.city,t.state,t.postal_code].filter(Boolean).join(", "),r=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}&limit=1`)).json();return r&&r.length>0?{latitude:parseFloat(r[0].lat),longitude:parseFloat(r[0].lon)}:null}catch(e){return console.error("Geocoding error:",e),null}},u2=t=>t?[t.city,t.state].filter(Boolean).join(", ")||"Address incomplete":"No address",h2=({customers:t,loading:e=!1,onView:s,onEdit:r,onDelete:i})=>{const a=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return console.log("CustomerTable render:",{customers:t,loading:e}),e?n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-6 w-6 animate-spin text-blue-600"}),n.jsx("span",{className:"text-gray-600",children:"Loading customers..."})]})})}):!t||t.length===0?n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"mb-4",children:n.jsx(Ga,{className:"h-12 w-12 text-gray-300 mx-auto"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No customers found"}),n.jsx("p",{className:"text-gray-500",children:t===null?"Failed to load customers. Please check your connection.":"Get started by adding your first customer."})]})}):n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Customers (",t.length,")"]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Primary Address"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credit Terms"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(l=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:l.name}),l.external_id&&n.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",l.external_id]}),l.tax_id&&n.jsxs("div",{className:"text-sm text-gray-500",children:["Tax ID: ",l.tax_id]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"text-sm text-gray-900",children:[l.email&&n.jsx("div",{className:"mb-1",children:l.email}),l.phone&&n.jsx("div",{className:"text-gray-500",children:l.phone}),!l.email&&!l.phone&&n.jsx("span",{className:"text-gray-400",children:"No contact info"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Yt,{className:"h-4 w-4 text-gray-400"}),n.jsx("div",{className:"text-sm text-gray-900",children:l.primary_address?n.jsx("button",{onClick:()=>s(l),className:"text-blue-600 hover:text-blue-800 hover:underline",children:u2(l.primary_address)}):n.jsx("span",{className:"text-gray-400",children:"No address"})})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx(rc,{status:l.account_status})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[l.credit_terms_days," days"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a(l.created_at)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx("button",{onClick:()=>s(l),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50 transition-colors",title:"View customer",children:n.jsx(Ha,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>r(l),className:"text-gray-600 hover:text-gray-900 p-1 rounded hover:bg-gray-50 transition-colors",title:"Edit customer",children:n.jsx(Tt,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>i(l),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50 transition-colors",title:"Delete customer",children:n.jsx(_n,{className:"h-4 w-4"})})]})})]},l.id))})]})})]})},m2=({filters:t,onFiltersChange:e})=>{const s=i=>{e({...t,search:i.target.value||void 0,page:1})},r=i=>{e({...t,account_status:i.target.value||void 0,page:1})};return n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by name, email, or tax ID...",value:t.search||"",onChange:s,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),n.jsx("div",{className:"sm:w-48",children:n.jsxs("div",{className:"relative",children:[n.jsx(bo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsxs("select",{value:t.account_status||"",onChange:r,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white",children:[n.jsx("option",{value:"",children:"All Statuses"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"credit_hold",children:"Credit Hold"}),n.jsx("option",{value:"closed",children:"Closed"})]})]})})]})})},Pi=({currentPage:t,totalPages:e,totalCount:s,onPageChange:r})=>{if(e<=1)return null;const a=(()=>{const c=[],o=[];for(let d=Math.max(2,t-2);d<=Math.min(e-1,t+2);d++)c.push(d);return t-2>2?o.push(1,"..."):o.push(1),o.push(...c),t+2<e-1?o.push("...",e):o.push(e),o})();return n.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[n.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[n.jsx("button",{onClick:()=>r(t-1),disabled:t===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),n.jsx("button",{onClick:()=>r(t+1),disabled:t===e,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),n.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[n.jsx("div",{children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",n.jsx("span",{className:"font-medium",children:Math.min((t-1)*50+1,s)})," ","to"," ",n.jsx("span",{className:"font-medium",children:Math.min(t*50,s)})," ","of ",n.jsx("span",{className:"font-medium",children:s})," results"]})}),n.jsx("div",{children:n.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[n.jsx("button",{onClick:()=>r(t-1),disabled:t===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(jx,{className:"h-5 w-5"})}),a.map((l,c)=>n.jsx(At.Fragment,{children:l==="..."?n.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."}):n.jsx("button",{onClick:()=>r(l),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${t===l?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:l})},c)),n.jsx("button",{onClick:()=>r(t+1),disabled:t===e,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(_x,{className:"h-5 w-5"})})]})})]})]})};var Ja=t=>t.type==="checkbox",Kr=t=>t instanceof Date,ft=t=>t==null;const Tx=t=>typeof t=="object";var Fe=t=>!ft(t)&&!Array.isArray(t)&&Tx(t)&&!Kr(t),f2=t=>Fe(t)&&t.target?Ja(t.target)?t.target.checked:t.target.value:t,p2=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,g2=(t,e)=>t.has(p2(e)),x2=t=>{const e=t.constructor&&t.constructor.prototype;return Fe(e)&&e.hasOwnProperty("isPrototypeOf")},Eh=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function nt(t){let e;const s=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Eh&&(t instanceof Blob||r))&&(s||Fe(t)))if(e=s?[]:{},!s&&!x2(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=nt(t[i]));else return t;return e}var nc=t=>Array.isArray(t)?t.filter(Boolean):[],Le=t=>t===void 0,Q=(t,e,s)=>{if(!e||!Fe(t))return s;const r=nc(e.split(/[,[\].]+?/)).reduce((i,a)=>ft(i)?i:i[a],t);return Le(r)||r===t?Le(t[e])?s:t[e]:r},fs=t=>typeof t=="boolean",Ph=t=>/^\w*$/.test(t),Ax=t=>nc(t.replace(/["|']|\]/g,"").split(/\.|\[/)),we=(t,e,s)=>{let r=-1;const i=Ph(e)?[e]:Ax(e),a=i.length,l=a-1;for(;++r<a;){const c=i[r];let o=s;if(r!==l){const d=t[c];o=Fe(d)||Array.isArray(d)?d:isNaN(+i[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=o,t=t[c]}};const Rf={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ls={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ks={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};At.createContext(null);var y2=(t,e,s,r=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const l=a;return e._proxyFormState[l]!==ls.all&&(e._proxyFormState[l]=!r||ls.all),t[l]}});return i};const v2=typeof window<"u"?N.useLayoutEffect:N.useEffect;var vs=t=>typeof t=="string",b2=(t,e,s,r,i)=>vs(t)?(r&&e.watch.add(t),Q(s,t,i)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),Q(s,a))):(r&&(e.watchAll=!0),s),w2=(t,e,s,r,i)=>e?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[r]:i||!0}}:{},la=t=>Array.isArray(t)?t:[t],Df=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},pu=t=>ft(t)||!Tx(t);function sr(t,e){if(pu(t)||pu(e))return t===e;if(Kr(t)&&Kr(e))return t.getTime()===e.getTime();const s=Object.keys(t),r=Object.keys(e);if(s.length!==r.length)return!1;for(const i of s){const a=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const l=e[i];if(Kr(a)&&Kr(l)||Fe(a)&&Fe(l)||Array.isArray(a)&&Array.isArray(l)?!sr(a,l):a!==l)return!1}}return!0}var Nt=t=>Fe(t)&&!Object.keys(t).length,Oh=t=>t.type==="file",os=t=>typeof t=="function",jo=t=>{if(!Eh)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Rx=t=>t.type==="select-multiple",Th=t=>t.type==="radio",j2=t=>Th(t)||Ja(t),Bc=t=>jo(t)&&t.isConnected;function _2(t,e){const s=e.slice(0,-1).length;let r=0;for(;r<s;)t=Le(t)?r++:t[e[r++]];return t}function N2(t){for(const e in t)if(t.hasOwnProperty(e)&&!Le(t[e]))return!1;return!0}function Me(t,e){const s=Array.isArray(e)?e:Ph(e)?[e]:Ax(e),r=s.length===1?t:_2(t,s),i=s.length-1,a=s[i];return r&&delete r[a],i!==0&&(Fe(r)&&Nt(r)||Array.isArray(r)&&N2(r))&&Me(t,s.slice(0,-1)),t}var Dx=t=>{for(const e in t)if(os(t[e]))return!0;return!1};function _o(t,e={}){const s=Array.isArray(t);if(Fe(t)||s)for(const r in t)Array.isArray(t[r])||Fe(t[r])&&!Dx(t[r])?(e[r]=Array.isArray(t[r])?[]:{},_o(t[r],e[r])):ft(t[r])||(e[r]=!0);return e}function Ix(t,e,s){const r=Array.isArray(t);if(Fe(t)||r)for(const i in t)Array.isArray(t[i])||Fe(t[i])&&!Dx(t[i])?Le(e)||pu(s[i])?s[i]=Array.isArray(t[i])?_o(t[i],[]):{..._o(t[i])}:Ix(t[i],ft(e)?{}:e[i],s[i]):s[i]=!sr(t[i],e[i]);return s}var Ui=(t,e)=>Ix(t,e,_o(e));const If={value:!1,isValid:!1},Ff={value:!0,isValid:!0};var Fx=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Le(t[0].attributes.value)?Le(t[0].value)||t[0].value===""?Ff:{value:t[0].value,isValid:!0}:Ff:If}return If},$x=(t,{valueAsNumber:e,valueAsDate:s,setValueAs:r})=>Le(t)?t:e?t===""?NaN:t&&+t:s&&vs(t)?new Date(t):r?r(t):t;const $f={isValid:!1,value:null};var Lx=t=>Array.isArray(t)?t.reduce((e,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:e,$f):$f;function Lf(t){const e=t.ref;return Oh(e)?e.files:Th(e)?Lx(t.refs).value:Rx(e)?[...e.selectedOptions].map(({value:s})=>s):Ja(e)?Fx(t.refs).value:$x(Le(e.value)?t.ref.value:e.value,t)}var k2=(t,e,s,r)=>{const i={};for(const a of t){const l=Q(e,a);l&&we(i,a,l._f)}return{criteriaMode:s,names:[...t],fields:i,shouldUseNativeValidation:r}},No=t=>t instanceof RegExp,Mi=t=>Le(t)?t:No(t)?t.source:Fe(t)?No(t.value)?t.value.source:t.value:t,qf=t=>({isOnSubmit:!t||t===ls.onSubmit,isOnBlur:t===ls.onBlur,isOnChange:t===ls.onChange,isOnAll:t===ls.all,isOnTouch:t===ls.onTouched});const Uf="AsyncFunction";var S2=t=>!!t&&!!t.validate&&!!(os(t.validate)&&t.validate.constructor.name===Uf||Fe(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Uf)),C2=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Mf=(t,e,s)=>!s&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const oa=(t,e,s,r)=>{for(const i of s||Object.keys(t)){const a=Q(t,i);if(a){const{_f:l,...c}=a;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],i)&&!r)return!0;if(l.ref&&e(l.ref,l.name)&&!r)return!0;if(oa(c,e))break}else if(Fe(c)&&oa(c,e))break}}};function zf(t,e,s){const r=Q(t,s);if(r||Ph(s))return{error:r,name:s};const i=s.split(".");for(;i.length;){const a=i.join("."),l=Q(e,a),c=Q(t,a);if(l&&!Array.isArray(l)&&s!==a)return{name:s};if(c&&c.type)return{name:a,error:c};if(c&&c.root&&c.root.type)return{name:`${a}.root`,error:c.root};i.pop()}return{name:s}}var E2=(t,e,s,r)=>{s(t);const{name:i,...a}=t;return Nt(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(l=>e[l]===(!r||ls.all))},P2=(t,e,s)=>!t||!e||t===e||la(t).some(r=>r&&(s?r===e:r.startsWith(e)||e.startsWith(r))),O2=(t,e,s,r,i)=>i.isOnAll?!1:!s&&i.isOnTouch?!(e||t):(s?r.isOnBlur:i.isOnBlur)?!t:(s?r.isOnChange:i.isOnChange)?t:!0,T2=(t,e)=>!nc(Q(t,e)).length&&Me(t,e),A2=(t,e,s)=>{const r=la(Q(t,s));return we(r,"root",e[s]),we(t,s,r),t},Ll=t=>vs(t);function Bf(t,e,s="validate"){if(Ll(t)||Array.isArray(t)&&t.every(Ll)||fs(t)&&!t)return{type:s,message:Ll(t)?t:"",ref:e}}var Pn=t=>Fe(t)&&!No(t)?t:{value:t,message:""},Vf=async(t,e,s,r,i,a)=>{const{ref:l,refs:c,required:o,maxLength:d,minLength:u,min:h,max:m,pattern:g,validate:v,name:b,valueAsNumber:w,mount:x}=t._f,p=Q(s,b);if(!x||e.has(b))return{};const f=c?c[0]:l,y=D=>{i&&f.reportValidity&&(f.setCustomValidity(fs(D)?"":D||""),f.reportValidity())},j={},E=Th(l),P=Ja(l),S=E||P,C=(w||Oh(l))&&Le(l.value)&&Le(p)||jo(l)&&l.value===""||p===""||Array.isArray(p)&&!p.length,T=w2.bind(null,b,r,j),R=(D,F,M,ce=ks.maxLength,Ne=ks.minLength)=>{const Je=D?F:M;j[b]={type:D?ce:Ne,message:Je,ref:l,...T(D?ce:Ne,Je)}};if(a?!Array.isArray(p)||!p.length:o&&(!S&&(C||ft(p))||fs(p)&&!p||P&&!Fx(c).isValid||E&&!Lx(c).isValid)){const{value:D,message:F}=Ll(o)?{value:!!o,message:o}:Pn(o);if(D&&(j[b]={type:ks.required,message:F,ref:f,...T(ks.required,F)},!r))return y(F),j}if(!C&&(!ft(h)||!ft(m))){let D,F;const M=Pn(m),ce=Pn(h);if(!ft(p)&&!isNaN(p)){const Ne=l.valueAsNumber||p&&+p;ft(M.value)||(D=Ne>M.value),ft(ce.value)||(F=Ne<ce.value)}else{const Ne=l.valueAsDate||new Date(p),Je=Z=>new Date(new Date().toDateString()+" "+Z),B=l.type=="time",Y=l.type=="week";vs(M.value)&&p&&(D=B?Je(p)>Je(M.value):Y?p>M.value:Ne>new Date(M.value)),vs(ce.value)&&p&&(F=B?Je(p)<Je(ce.value):Y?p<ce.value:Ne<new Date(ce.value))}if((D||F)&&(R(!!D,M.message,ce.message,ks.max,ks.min),!r))return y(j[b].message),j}if((d||u)&&!C&&(vs(p)||a&&Array.isArray(p))){const D=Pn(d),F=Pn(u),M=!ft(D.value)&&p.length>+D.value,ce=!ft(F.value)&&p.length<+F.value;if((M||ce)&&(R(M,D.message,F.message),!r))return y(j[b].message),j}if(g&&!C&&vs(p)){const{value:D,message:F}=Pn(g);if(No(D)&&!p.match(D)&&(j[b]={type:ks.pattern,message:F,ref:l,...T(ks.pattern,F)},!r))return y(F),j}if(v){if(os(v)){const D=await v(p,s),F=Bf(D,f);if(F&&(j[b]={...F,...T(ks.validate,F.message)},!r))return y(F.message),j}else if(Fe(v)){let D={};for(const F in v){if(!Nt(D)&&!r)break;const M=Bf(await v[F](p,s),f,F);M&&(D={...M,...T(F,M.message)},y(M.message),r&&(j[b]=D))}if(!Nt(D)&&(j[b]={ref:f,...D},!r))return j}}return y(!0),j};const R2={mode:ls.onSubmit,reValidateMode:ls.onChange,shouldFocusError:!0};function D2(t={}){let e={...R2,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:os(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let i=Fe(e.defaultValues)||Fe(e.values)?nt(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:nt(i),l={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},o,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const m={array:Df(),state:Df()},g=e.criteriaMode===ls.all,v=k=>O=>{clearTimeout(d),d=setTimeout(k,O)},b=async k=>{if(!e.disabled&&(u.isValid||h.isValid||k)){const O=e.resolver?Nt((await P()).errors):await C(r,!0);O!==s.isValid&&m.state.next({isValid:O})}},w=(k,O)=>{!e.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((k||Array.from(c.mount)).forEach(A=>{A&&(O?we(s.validatingFields,A,O):Me(s.validatingFields,A))}),m.state.next({validatingFields:s.validatingFields,isValidating:!Nt(s.validatingFields)}))},x=(k,O=[],A,V,z=!0,q=!0)=>{if(V&&A&&!e.disabled){if(l.action=!0,q&&Array.isArray(Q(r,k))){const J=A(Q(r,k),V.argA,V.argB);z&&we(r,k,J)}if(q&&Array.isArray(Q(s.errors,k))){const J=A(Q(s.errors,k),V.argA,V.argB);z&&we(s.errors,k,J),T2(s.errors,k)}if((u.touchedFields||h.touchedFields)&&q&&Array.isArray(Q(s.touchedFields,k))){const J=A(Q(s.touchedFields,k),V.argA,V.argB);z&&we(s.touchedFields,k,J)}(u.dirtyFields||h.dirtyFields)&&(s.dirtyFields=Ui(i,a)),m.state.next({name:k,isDirty:R(k,O),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else we(a,k,O)},p=(k,O)=>{we(s.errors,k,O),m.state.next({errors:s.errors})},f=k=>{s.errors=k,m.state.next({errors:s.errors,isValid:!1})},y=(k,O,A,V)=>{const z=Q(r,k);if(z){const q=Q(a,k,Le(A)?Q(i,k):A);Le(q)||V&&V.defaultChecked||O?we(a,k,O?q:Lf(z._f)):M(k,q),l.mount&&b()}},j=(k,O,A,V,z)=>{let q=!1,J=!1;const de={name:k};if(!e.disabled){if(!A||V){(u.isDirty||h.isDirty)&&(J=s.isDirty,s.isDirty=de.isDirty=R(),q=J!==de.isDirty);const fe=sr(Q(i,k),O);J=!!Q(s.dirtyFields,k),fe?Me(s.dirtyFields,k):we(s.dirtyFields,k,!0),de.dirtyFields=s.dirtyFields,q=q||(u.dirtyFields||h.dirtyFields)&&J!==!fe}if(A){const fe=Q(s.touchedFields,k);fe||(we(s.touchedFields,k,A),de.touchedFields=s.touchedFields,q=q||(u.touchedFields||h.touchedFields)&&fe!==A)}q&&z&&m.state.next(de)}return q?de:{}},E=(k,O,A,V)=>{const z=Q(s.errors,k),q=(u.isValid||h.isValid)&&fs(O)&&s.isValid!==O;if(e.delayError&&A?(o=v(()=>p(k,A)),o(e.delayError)):(clearTimeout(d),o=null,A?we(s.errors,k,A):Me(s.errors,k)),(A?!sr(z,A):z)||!Nt(V)||q){const J={...V,...q&&fs(O)?{isValid:O}:{},errors:s.errors,name:k};s={...s,...J},m.state.next(J)}},P=async k=>{w(k,!0);const O=await e.resolver(a,e.context,k2(k||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return w(k),O},S=async k=>{const{errors:O}=await P(k);if(k)for(const A of k){const V=Q(O,A);V?we(s.errors,A,V):Me(s.errors,A)}else s.errors=O;return O},C=async(k,O,A={valid:!0})=>{for(const V in k){const z=k[V];if(z){const{_f:q,...J}=z;if(q){const de=c.array.has(q.name),fe=z._f&&S2(z._f);fe&&u.validatingFields&&w([V],!0);const Ut=await Vf(z,c.disabled,a,g,e.shouldUseNativeValidation&&!O,de);if(fe&&u.validatingFields&&w([V]),Ut[q.name]&&(A.valid=!1,O))break;!O&&(Q(Ut,q.name)?de?A2(s.errors,Ut,q.name):we(s.errors,q.name,Ut[q.name]):Me(s.errors,q.name))}!Nt(J)&&await C(J,O,A)}}return A.valid},T=()=>{for(const k of c.unMount){const O=Q(r,k);O&&(O._f.refs?O._f.refs.every(A=>!Bc(A)):!Bc(O._f.ref))&&Ue(k)}c.unMount=new Set},R=(k,O)=>!e.disabled&&(k&&O&&we(a,k,O),!sr(Z(),i)),D=(k,O,A)=>b2(k,c,{...l.mount?a:Le(O)?i:vs(k)?{[k]:O}:O},A,O),F=k=>nc(Q(l.mount?a:i,k,e.shouldUnregister?Q(i,k,[]):[])),M=(k,O,A={})=>{const V=Q(r,k);let z=O;if(V){const q=V._f;q&&(!q.disabled&&we(a,k,$x(O,q)),z=jo(q.ref)&&ft(O)?"":O,Rx(q.ref)?[...q.ref.options].forEach(J=>J.selected=z.includes(J.value)):q.refs?Ja(q.ref)?q.refs.forEach(J=>{(!J.defaultChecked||!J.disabled)&&(Array.isArray(z)?J.checked=!!z.find(de=>de===J.value):J.checked=z===J.value||!!z)}):q.refs.forEach(J=>J.checked=J.value===z):Oh(q.ref)?q.ref.value="":(q.ref.value=z,q.ref.type||m.state.next({name:k,values:nt(a)})))}(A.shouldDirty||A.shouldTouch)&&j(k,z,A.shouldTouch,A.shouldDirty,!0),A.shouldValidate&&Y(k)},ce=(k,O,A)=>{for(const V in O){if(!O.hasOwnProperty(V))return;const z=O[V],q=k+"."+V,J=Q(r,q);(c.array.has(k)||Fe(z)||J&&!J._f)&&!Kr(z)?ce(q,z,A):M(q,z,A)}},Ne=(k,O,A={})=>{const V=Q(r,k),z=c.array.has(k),q=nt(O);we(a,k,q),z?(m.array.next({name:k,values:nt(a)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&A.shouldDirty&&m.state.next({name:k,dirtyFields:Ui(i,a),isDirty:R(k,q)})):V&&!V._f&&!ft(q)?ce(k,q,A):M(k,q,A),Mf(k,c)&&m.state.next({...s}),m.state.next({name:l.mount?k:void 0,values:nt(a)})},Je=async k=>{l.mount=!0;const O=k.target;let A=O.name,V=!0;const z=Q(r,A),q=fe=>{V=Number.isNaN(fe)||Kr(fe)&&isNaN(fe.getTime())||sr(fe,Q(a,A,fe))},J=qf(e.mode),de=qf(e.reValidateMode);if(z){let fe,Ut;const Xa=O.type?Lf(z._f):f2(k),Ws=k.type===Rf.BLUR||k.type===Rf.FOCUS_OUT,dy=!C2(z._f)&&!e.resolver&&!Q(s.errors,A)&&!z._f.deps||O2(Ws,Q(s.touchedFields,A),s.isSubmitted,de,J),ac=Mf(A,c,Ws);we(a,A,Xa),Ws?(z._f.onBlur&&z._f.onBlur(k),o&&o(0)):z._f.onChange&&z._f.onChange(k);const lc=j(A,Xa,Ws),uy=!Nt(lc)||ac;if(!Ws&&m.state.next({name:A,type:k.type,values:nt(a)}),dy)return(u.isValid||h.isValid)&&(e.mode==="onBlur"?Ws&&b():Ws||b()),uy&&m.state.next({name:A,...ac?{}:lc});if(!Ws&&ac&&m.state.next({...s}),e.resolver){const{errors:qh}=await P([A]);if(q(Xa),V){const hy=zf(s.errors,r,A),Uh=zf(qh,r,hy.name||A);fe=Uh.error,A=Uh.name,Ut=Nt(qh)}}else w([A],!0),fe=(await Vf(z,c.disabled,a,g,e.shouldUseNativeValidation))[A],w([A]),q(Xa),V&&(fe?Ut=!1:(u.isValid||h.isValid)&&(Ut=await C(r,!0)));V&&(z._f.deps&&Y(z._f.deps),E(A,Ut,fe,lc))}},B=(k,O)=>{if(Q(s.errors,O)&&k.focus)return k.focus(),1},Y=async(k,O={})=>{let A,V;const z=la(k);if(e.resolver){const q=await S(Le(k)?k:z);A=Nt(q),V=k?!z.some(J=>Q(q,J)):A}else k?(V=(await Promise.all(z.map(async q=>{const J=Q(r,q);return await C(J&&J._f?{[q]:J}:J)}))).every(Boolean),!(!V&&!s.isValid)&&b()):V=A=await C(r);return m.state.next({...!vs(k)||(u.isValid||h.isValid)&&A!==s.isValid?{}:{name:k},...e.resolver||!k?{isValid:A}:{},errors:s.errors}),O.shouldFocus&&!V&&oa(r,B,k?z:c.mount),V},Z=k=>{const O={...l.mount?a:i};return Le(k)?O:vs(k)?Q(O,k):k.map(A=>Q(O,A))},me=(k,O)=>({invalid:!!Q((O||s).errors,k),isDirty:!!Q((O||s).dirtyFields,k),error:Q((O||s).errors,k),isValidating:!!Q(s.validatingFields,k),isTouched:!!Q((O||s).touchedFields,k)}),Oe=k=>{k&&la(k).forEach(O=>Me(s.errors,O)),m.state.next({errors:k?s.errors:{}})},L=(k,O,A)=>{const V=(Q(r,k,{_f:{}})._f||{}).ref,z=Q(s.errors,k)||{},{ref:q,message:J,type:de,...fe}=z;we(s.errors,k,{...fe,...O,ref:V}),m.state.next({name:k,errors:s.errors,isValid:!1}),A&&A.shouldFocus&&V&&V.focus&&V.focus()},te=(k,O)=>os(k)?m.state.subscribe({next:A=>k(D(void 0,O),A)}):D(k,O,!0),ae=k=>m.state.subscribe({next:O=>{P2(k.name,O.name,k.exact)&&E2(O,k.formState||u,cy,k.reRenderRoot)&&k.callback({values:{...a},...s,...O})}}).unsubscribe,ve=k=>(l.mount=!0,h={...h,...k.formState},ae({...k,formState:h})),Ue=(k,O={})=>{for(const A of k?la(k):c.mount)c.mount.delete(A),c.array.delete(A),O.keepValue||(Me(r,A),Me(a,A)),!O.keepError&&Me(s.errors,A),!O.keepDirty&&Me(s.dirtyFields,A),!O.keepTouched&&Me(s.touchedFields,A),!O.keepIsValidating&&Me(s.validatingFields,A),!e.shouldUnregister&&!O.keepDefaultValue&&Me(i,A);m.state.next({values:nt(a)}),m.state.next({...s,...O.keepDirty?{isDirty:R()}:{}}),!O.keepIsValid&&b()},Ye=({disabled:k,name:O})=>{(fs(k)&&l.mount||k||c.disabled.has(O))&&(k?c.disabled.add(O):c.disabled.delete(O))},qt=(k,O={})=>{let A=Q(r,k);const V=fs(O.disabled)||fs(e.disabled);return we(r,k,{...A||{},_f:{...A&&A._f?A._f:{ref:{name:k}},name:k,mount:!0,...O}}),c.mount.add(k),A?Ye({disabled:fs(O.disabled)?O.disabled:e.disabled,name:k}):y(k,!0,O.value),{...V?{disabled:O.disabled||e.disabled}:{},...e.progressive?{required:!!O.required,min:Mi(O.min),max:Mi(O.max),minLength:Mi(O.minLength),maxLength:Mi(O.maxLength),pattern:Mi(O.pattern)}:{},name:k,onChange:Je,onBlur:Je,ref:z=>{if(z){qt(k,O),A=Q(r,k);const q=Le(z.value)&&z.querySelectorAll&&z.querySelectorAll("input,select,textarea")[0]||z,J=j2(q),de=A._f.refs||[];if(J?de.find(fe=>fe===q):q===A._f.ref)return;we(r,k,{_f:{...A._f,...J?{refs:[...de.filter(Bc),q,...Array.isArray(Q(i,k))?[{}]:[]],ref:{type:q.type,name:k}}:{ref:q}}}),y(k,!1,void 0,q)}else A=Q(r,k,{}),A._f&&(A._f.mount=!1),(e.shouldUnregister||O.shouldUnregister)&&!(g2(c.array,k)&&l.action)&&c.unMount.add(k)}}},ic=()=>e.shouldFocusError&&oa(r,B,c.mount),ay=k=>{fs(k)&&(m.state.next({disabled:k}),oa(r,(O,A)=>{const V=Q(r,A);V&&(O.disabled=V._f.disabled||k,Array.isArray(V._f.refs)&&V._f.refs.forEach(z=>{z.disabled=V._f.disabled||k}))},0,!1))},Ih=(k,O)=>async A=>{let V;A&&(A.preventDefault&&A.preventDefault(),A.persist&&A.persist());let z=nt(a);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:q,values:J}=await P();s.errors=q,z=J}else await C(r);if(c.disabled.size)for(const q of c.disabled)we(z,q,void 0);if(Me(s.errors,"root"),Nt(s.errors)){m.state.next({errors:{}});try{await k(z,A)}catch(q){V=q}}else O&&await O({...s.errors},A),ic(),setTimeout(ic);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Nt(s.errors)&&!V,submitCount:s.submitCount+1,errors:s.errors}),V)throw V},ly=(k,O={})=>{Q(r,k)&&(Le(O.defaultValue)?Ne(k,nt(Q(i,k))):(Ne(k,O.defaultValue),we(i,k,nt(O.defaultValue))),O.keepTouched||Me(s.touchedFields,k),O.keepDirty||(Me(s.dirtyFields,k),s.isDirty=O.defaultValue?R(k,nt(Q(i,k))):R()),O.keepError||(Me(s.errors,k),u.isValid&&b()),m.state.next({...s}))},Fh=(k,O={})=>{const A=k?nt(k):i,V=nt(A),z=Nt(k),q=z?i:V;if(O.keepDefaultValues||(i=A),!O.keepValues){if(O.keepDirtyValues){const J=new Set([...c.mount,...Object.keys(Ui(i,a))]);for(const de of Array.from(J))Q(s.dirtyFields,de)?we(q,de,Q(a,de)):Ne(de,Q(q,de))}else{if(Eh&&Le(k))for(const J of c.mount){const de=Q(r,J);if(de&&de._f){const fe=Array.isArray(de._f.refs)?de._f.refs[0]:de._f.ref;if(jo(fe)){const Ut=fe.closest("form");if(Ut){Ut.reset();break}}}}for(const J of c.mount)Ne(J,Q(q,J))}a=nt(q),m.array.next({values:{...q}}),m.state.next({values:{...q}})}c={mount:O.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!O.keepIsValid||!!O.keepDirtyValues,l.watch=!!e.shouldUnregister,m.state.next({submitCount:O.keepSubmitCount?s.submitCount:0,isDirty:z?!1:O.keepDirty?s.isDirty:!!(O.keepDefaultValues&&!sr(k,i)),isSubmitted:O.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:z?{}:O.keepDirtyValues?O.keepDefaultValues&&a?Ui(i,a):s.dirtyFields:O.keepDefaultValues&&k?Ui(i,k):O.keepDirty?s.dirtyFields:{},touchedFields:O.keepTouched?s.touchedFields:{},errors:O.keepErrors?s.errors:{},isSubmitSuccessful:O.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},$h=(k,O)=>Fh(os(k)?k(a):k,O),oy=(k,O={})=>{const A=Q(r,k),V=A&&A._f;if(V){const z=V.refs?V.refs[0]:V.ref;z.focus&&(z.focus(),O.shouldSelect&&os(z.select)&&z.select())}},cy=k=>{s={...s,...k}},Lh={control:{register:qt,unregister:Ue,getFieldState:me,handleSubmit:Ih,setError:L,_subscribe:ae,_runSchema:P,_focusError:ic,_getWatch:D,_getDirty:R,_setValid:b,_setFieldArray:x,_setDisabledField:Ye,_setErrors:f,_getFieldArray:F,_reset:Fh,_resetDefaultValues:()=>os(e.defaultValues)&&e.defaultValues().then(k=>{$h(k,e.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:T,_disableForm:ay,_subjects:m,_proxyFormState:u,get _fields(){return r},get _formValues(){return a},get _state(){return l},set _state(k){l=k},get _defaultValues(){return i},get _names(){return c},set _names(k){c=k},get _formState(){return s},get _options(){return e},set _options(k){e={...e,...k}}},subscribe:ve,trigger:Y,register:qt,handleSubmit:Ih,watch:te,setValue:Ne,getValues:Z,reset:$h,resetField:ly,clearErrors:Oe,unregister:Ue,setError:L,setFocus:oy,getFieldState:me};return{...Lh,formControl:Lh}}function _s(t={}){const e=At.useRef(void 0),s=At.useRef(void 0),[r,i]=At.useState({isDirty:!1,isValidating:!1,isLoading:os(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:os(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:D2(t),formState:r},t.formControl&&t.defaultValues&&!os(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const a=e.current.control;return a._options=t,v2(()=>{const l=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(c=>({...c,isReady:!0})),a._formState.isReady=!0,l},[a]),At.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),At.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),At.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),At.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),At.useEffect(()=>{if(a._proxyFormState.isDirty){const l=a._getDirty();l!==r.isDirty&&a._subjects.state.next({isDirty:l})}},[a,r.isDirty]),At.useEffect(()=>{t.values&&!sr(t.values,s.current)?(a._reset(t.values,a._options.resetOptions),s.current=t.values,i(l=>({...l}))):a._resetDefaultValues()},[a,t.values]),At.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=y2(r,a),e.current}const qx=({isOpen:t,onClose:e,onSubmit:s,customer:r,loading:i=!1,title:a})=>{const{register:l,handleSubmit:c,reset:o,formState:{errors:d}}=_s({defaultValues:{name:"",external_id:"",tax_id:"",phone:"",email:"",account_status:"active",credit_terms_days:30}});N.useEffect(()=>{o(r?{name:r.name,external_id:r.external_id||"",tax_id:r.tax_id||"",phone:r.phone||"",email:r.email||"",account_status:r.account_status,credit_terms_days:r.credit_terms_days}:{name:"",external_id:"",tax_id:"",phone:"",email:"",account_status:"active",credit_terms_days:30})},[r,o]);const u=h=>{s(h)};return t?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:e}),n.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:n.jsxs("form",{onSubmit:c(u),children:[n.jsxs("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:a}),n.jsx("button",{type:"button",onClick:e,className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.jsx(ot,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Business Name *"}),n.jsx("input",{type:"text",id:"name",...l("name",{required:"Business name is required"}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),d.name&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.name.message})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"external_id",className:"block text-sm font-medium text-gray-700",children:"External ID"}),n.jsx("input",{type:"text",id:"external_id",...l("external_id"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"QuickBooks ID"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"tax_id",className:"block text-sm font-medium text-gray-700",children:"Tax ID (VAT/EIN)"}),n.jsx("input",{type:"text",id:"tax_id",...l("tax_id"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),n.jsx("input",{type:"tel",id:"phone",...l("phone"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),n.jsx("input",{type:"email",id:"email",...l("email",{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),d.email&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email.message})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"account_status",className:"block text-sm font-medium text-gray-700",children:"Account Status"}),n.jsxs("select",{id:"account_status",...l("account_status"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"credit_hold",children:"Credit Hold"}),n.jsx("option",{value:"closed",children:"Closed"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"credit_terms_days",className:"block text-sm font-medium text-gray-700",children:"Credit Terms (Days)"}),n.jsx("input",{type:"number",id:"credit_terms_days",min:"0",...l("credit_terms_days",{required:"Credit terms is required",min:{value:0,message:"Credit terms must be positive"}}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),d.credit_terms_days&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.credit_terms_days.message})]})]})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsx("button",{type:"submit",disabled:i,className:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:i?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Saving..."})]}):"Save Customer"}),n.jsx("button",{type:"button",onClick:e,disabled:i,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}):null},Oi=({isOpen:t,onClose:e,onConfirm:s,title:r,message:i,confirmText:a="Confirm",cancelText:l="Cancel",type:c="danger",loading:o=!1})=>{if(!t)return null;const u=(()=>{switch(c){case"danger":return{icon:"text-red-600",button:"bg-red-600 hover:bg-red-700 focus:ring-red-500"};case"warning":return{icon:"text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"};default:return{icon:"text-blue-600",button:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}}})();return n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:e}),n.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[n.jsx("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:n.jsxs("div",{className:"sm:flex sm:items-start",children:[n.jsx("div",{className:`mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full ${c==="danger"?"bg-red-100":c==="warning"?"bg-yellow-100":"bg-blue-100"} sm:mx-0 sm:h-10 sm:w-10`,children:n.jsx(Ve,{className:`h-6 w-6 ${u.icon}`})}),n.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[n.jsx("h3",{className:"text-base font-semibold leading-6 text-gray-900",children:r}),n.jsx("div",{className:"mt-2",children:n.jsx("p",{className:"text-sm text-gray-500",children:i})})]})]})}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsx("button",{type:"button",onClick:s,disabled:o,className:`inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold text-white shadow-sm sm:ml-3 sm:w-auto ${u.button} disabled:opacity-50 disabled:cursor-not-allowed`,children:o?"Processing...":a}),n.jsx("button",{type:"button",onClick:e,disabled:o,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:l})]})]})]})})},I2=()=>{const t=bt(),[e,s]=N.useState({page:1}),[r,i]=N.useState(!1),[a,l]=N.useState(null),[c,o]=N.useState(null),{data:d,isLoading:u,error:h,refetch:m}=Cx(e),g=a2(),v=Ex(),b=l2();N.useEffect(()=>{console.log("CustomersPage state:",{filters:e,data:d,isLoading:u,error:h,isFormOpen:r,editingCustomer:a})},[e,d,u,h,r,a]);const w=()=>{console.log("Adding new customer"),l(null),i(!0)},x=S=>{console.log("Editing customer:",S),l(S),i(!0)},p=S=>{console.log("Viewing customer:",S),t(`/customers/${S.id}`)},f=S=>{console.log("Deleting customer:",S),o(S)},y=async S=>{console.log("Form submit:",S);try{a?await v.mutateAsync({id:a.id,...S}):await g.mutateAsync(S),i(!1),l(null)}catch(C){console.error("Form submit error:",C)}},j=async()=>{if(c){console.log("Confirming delete:",c);try{await b.mutateAsync(c.id),o(null)}catch(S){console.error("Delete error:",S)}}},E=S=>{console.log("Page change:",S),s(C=>({...C,page:S}))},P=()=>{console.log("Refreshing customers"),m()};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Customers"}),n.jsx("p",{className:"text-gray-600",children:"Manage your customer database"}),h&&n.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["Error: ",h.message]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("button",{onClick:P,disabled:u,className:"flex items-center space-x-2 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:[n.jsx(wn,{className:`h-4 w-4 ${u?"animate-spin":""}`}),n.jsx("span",{children:"Refresh"})]}),n.jsxs("button",{onClick:w,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(xt,{className:"h-4 w-4"}),n.jsx("span",{children:"Add Customer"})]})]})]}),n.jsx(m2,{filters:e,onFiltersChange:s}),n.jsx(h2,{customers:(d==null?void 0:d.customers)||[],loading:u,onView:p,onEdit:x,onDelete:f}),d&&d.totalPages>1&&n.jsx(Pi,{currentPage:d.currentPage,totalPages:d.totalPages,totalCount:d.totalCount,onPageChange:E}),n.jsx(qx,{isOpen:r,onClose:()=>{console.log("Closing form"),i(!1),l(null)},onSubmit:y,customer:a||void 0,loading:g.isPending||v.isPending,title:a?"Edit Customer":"Add New Customer"}),n.jsx(Oi,{isOpen:!!c,onClose:()=>o(null),onConfirm:j,title:"Delete Customer",message:`Are you sure you want to delete "${c==null?void 0:c.name}"? This action cannot be undone.`,confirmText:"Delete",type:"danger",loading:b.isPending})]})},Ux=t=>De({queryKey:["addresses",t],queryFn:async()=>{if(!t||t==="null"||t==="undefined")return[];const{data:e,error:s}=await I.from("addresses").select("*").eq("customer_id",t).order("is_primary",{ascending:!1}).order("created_at",{ascending:!0});if(s)throw new Error(s.message);return e},enabled:!!t&&t!=="null"&&t!=="undefined"}),F2=()=>{const t=le();return he({mutationFn:async e=>{if(!e.customer_id||e.customer_id==="null"||e.customer_id==="undefined")throw new Error("Invalid customer ID");e.is_primary&&await I.from("addresses").update({is_primary:!1}).eq("customer_id",e.customer_id).eq("is_primary",!0);const{data:s,error:r}=await I.from("addresses").insert([e]).select().single();if(r)throw new Error(r.message);return s},onSuccess:e=>{t.invalidateQueries({queryKey:["addresses",e.customer_id]}),t.invalidateQueries({queryKey:["customers"]}),G.success("Address added successfully")},onError:e=>{G.error(e.message||"Failed to add address")}})},$2=()=>{const t=le();return he({mutationFn:async({id:e,...s})=>{if(!e||e==="null"||e==="undefined")throw new Error("Invalid address ID");s.is_primary&&s.customer_id&&await I.from("addresses").update({is_primary:!1}).eq("customer_id",s.customer_id).eq("is_primary",!0).neq("id",e);const{data:r,error:i}=await I.from("addresses").update(s).eq("id",e).select().single();if(i)throw new Error(i.message);return r},onSuccess:e=>{t.invalidateQueries({queryKey:["addresses",e.customer_id]}),t.invalidateQueries({queryKey:["customers"]}),G.success("Address updated successfully")},onError:e=>{G.error(e.message||"Failed to update address")}})},L2=()=>{const t=le();return he({mutationFn:async e=>{if(!e.id||e.id==="null"||e.id==="undefined")throw new Error("Invalid address ID");const{error:s}=await I.from("addresses").delete().eq("id",e.id);if(s)throw new Error(s.message);return e},onSuccess:e=>{t.invalidateQueries({queryKey:["addresses",e.customer_id]}),t.invalidateQueries({queryKey:["customers"]}),G.success("Address deleted successfully")},onError:e=>{G.error(e.message||"Failed to delete address")}})},q2=()=>{const t=le();return he({mutationFn:async e=>{if(!e.id||e.id==="null"||e.id==="undefined")throw new Error("Invalid address ID");if(!e.customer_id||e.customer_id==="null"||e.customer_id==="undefined")throw new Error("Invalid customer ID");await I.from("addresses").update({is_primary:!1}).eq("customer_id",e.customer_id).eq("is_primary",!0);const{data:s,error:r}=await I.from("addresses").update({is_primary:!0}).eq("id",e.id).select().single();if(r)throw new Error(r.message);return s},onSuccess:e=>{t.invalidateQueries({queryKey:["addresses",e.customer_id]}),t.invalidateQueries({queryKey:["customers"]}),G.success("Primary address updated")},onError:e=>{G.error(e.message||"Failed to set primary address")}})},U2=({address:t,onEdit:e,onDelete:s,onSetPrimary:r})=>{const i=c2(t.delivery_window_start,t.delivery_window_end);return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Yt,{className:"h-4 w-4 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:t.label||`Address #${t.id.slice(-4)}`}),t.is_primary&&n.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:[n.jsx(wo,{className:"h-3 w-3 mr-1"}),"Primary"]})]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[t.latitude&&t.longitude&&n.jsx("div",{className:"p-1 text-green-600",title:"Geocoded",children:n.jsx(kx,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(t),className:"p-1 text-gray-400 hover:text-blue-600 rounded hover:bg-blue-50 transition-colors",title:"Edit address",children:n.jsx(Tt,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>s(t),className:"p-1 text-gray-400 hover:text-red-600 rounded hover:bg-red-50 transition-colors",title:"Delete address",children:n.jsx(_n,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-gray-900",children:Px(t)}),i&&n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[n.jsx(Cr,{className:"h-4 w-4"}),n.jsxs("span",{children:["Delivery: ",i]})]}),t.instructions&&n.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-600",children:[n.jsx(Nx,{className:"h-4 w-4 mt-0.5"}),n.jsx("p",{className:"line-clamp-2",children:t.instructions})]}),!t.is_primary&&n.jsx("button",{onClick:()=>r(t),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Set as Primary"})]})]})},M2=({isOpen:t,onClose:e,onSubmit:s,address:r,customerId:i,loading:a=!1,title:l,isFirstAddress:c=!1})=>{const[o,d]=N.useState(!1),[u,h]=N.useState(!1),{register:m,handleSubmit:g,reset:v,watch:b,setValue:w,formState:{errors:x}}=_s({defaultValues:{customer_id:i,label:"",line1:"",line2:"",city:"",state:"",postal_code:"",country:"US",delivery_window_start:"",delivery_window_end:"",is_primary:c,instructions:""}}),p=b(["line1","city","state","postal_code"]),f=b("delivery_window_start"),y=b("delivery_window_end");N.useEffect(()=>{r?(v({customer_id:r.customer_id,label:r.label||"",line1:r.line1,line2:r.line2||"",city:r.city,state:r.state||"",postal_code:r.postal_code||"",country:r.country,delivery_window_start:r.delivery_window_start||"",delivery_window_end:r.delivery_window_end||"",is_primary:r.is_primary,instructions:r.instructions||"",latitude:r.latitude,longitude:r.longitude}),h(!!(r.latitude&&r.longitude))):(v({customer_id:i,label:"",line1:"",line2:"",city:"",state:"",postal_code:"",country:"US",delivery_window_start:"",delivery_window_end:"",is_primary:c,instructions:""}),h(!1))},[r,i,c,v]);const j=async()=>{const[S,C,T,R]=p;if(!(!S||!C)){d(!0);try{const D=await d2({line1:S,city:C,state:T,postal_code:R});D&&(w("latitude",D.latitude),w("longitude",D.longitude),h(!0))}catch(D){console.error("Geocoding failed:",D)}finally{d(!1)}}},E=S=>{S.delivery_window_start&&S.delivery_window_end&&!Af(S.delivery_window_start,S.delivery_window_end)||s(S)},P=Ox();return t?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:e}),n.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl",children:n.jsxs("form",{onSubmit:g(E),children:[n.jsxs("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:l}),n.jsx("button",{type:"button",onClick:e,className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.jsx(ot,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Address Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{htmlFor:"label",className:"block text-sm font-medium text-gray-700",children:"Address Label"}),n.jsx("input",{type:"text",id:"label",...m("label"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Main Location, Loading Dock, etc."})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{htmlFor:"line1",className:"block text-sm font-medium text-gray-700",children:"Address Line 1 *"}),n.jsx("input",{type:"text",id:"line1",...m("line1",{required:"Address line 1 is required"}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),x.line1&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.line1.message})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{htmlFor:"line2",className:"block text-sm font-medium text-gray-700",children:"Address Line 2"}),n.jsx("input",{type:"text",id:"line2",...m("line2"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Apartment, suite, unit, etc."})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City *"}),n.jsx("input",{type:"text",id:"city",...m("city",{required:"City is required"}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),x.city&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.city.message})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700",children:"State/Province"}),n.jsx("input",{type:"text",id:"state",...m("state"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"postal_code",className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),n.jsx("input",{type:"text",id:"postal_code",...m("postal_code"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700",children:"Country"}),n.jsx("select",{id:"country",...m("country"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:P.map(S=>n.jsx("option",{value:S.value,children:S.label},S.value))})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Geocoding"}),n.jsxs("button",{type:"button",onClick:j,disabled:o||!p[0]||!p[1],className:"flex items-center space-x-2 text-sm text-blue-600 hover:text-blue-800 disabled:text-gray-400 disabled:cursor-not-allowed",children:[o?n.jsx($e,{className:"h-4 w-4 animate-spin"}):u?n.jsx(kx,{className:"h-4 w-4 text-green-600"}):n.jsx(Yt,{className:"h-4 w-4"}),n.jsx("span",{children:o?"Geocoding...":u?"Geocoded":"Geocode Address"})]})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Geocoding helps with delivery route optimization"})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Delivery Preferences"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"delivery_window_start",className:"block text-sm font-medium text-gray-700",children:"Delivery Window Start"}),n.jsx("input",{type:"time",id:"delivery_window_start",...m("delivery_window_start"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"delivery_window_end",className:"block text-sm font-medium text-gray-700",children:"Delivery Window End"}),n.jsx("input",{type:"time",id:"delivery_window_end",...m("delivery_window_end"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),f&&y&&!Af(f,y)&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:"End time must be after start time"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"is_primary",...m("is_primary"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"is_primary",className:"ml-2 block text-sm text-gray-900",children:"Set as primary address"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Primary address will be used as the default for orders"})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Delivery Instructions"}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"instructions",className:"block text-sm font-medium text-gray-700",children:"Special Instructions"}),n.jsx("textarea",{id:"instructions",rows:3,...m("instructions"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Gate codes, delivery notes, special handling instructions..."})]})]})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsx("button",{type:"submit",disabled:a,className:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:a?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Saving..."})]}):"Save Address"}),n.jsx("button",{type:"button",onClick:e,disabled:a,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}):null},z2=({customerId:t})=>{const[e,s]=N.useState(!1),[r,i]=N.useState(null),[a,l]=N.useState(null),{data:c=[],isLoading:o}=Ux(t),d=F2(),u=$2(),h=L2(),m=q2(),g=()=>{i(null),s(!0)},v=f=>{i(f),s(!0)},b=f=>{l(f)},w=async f=>{if(!f.is_primary)try{await m.mutateAsync(f)}catch{}},x=async f=>{try{r?await u.mutateAsync({id:r.id,...f}):await d.mutateAsync(f),s(!1),i(null)}catch{}},p=async()=>{if(a)try{await h.mutateAsync(a),l(null)}catch{}};return o?n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"h-20 bg-gray-200 rounded"}),n.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})]})}):n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Yt,{className:"h-5 w-5 text-gray-400"}),n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Delivery Addresses (",c.length,")"]})]}),n.jsxs("button",{onClick:g,className:"flex items-center space-x-2 bg-blue-600 text-white px-3 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm",children:[n.jsx(xt,{className:"h-4 w-4"}),n.jsx("span",{children:"Add Address"})]})]}),c.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Yt,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"No delivery addresses added yet"}),n.jsx("button",{onClick:g,className:"text-blue-600 hover:text-blue-800 font-medium",children:"Add the first address"})]}):n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:c.map(f=>n.jsx(U2,{address:f,onEdit:v,onDelete:b,onSetPrimary:w},f.id))}),n.jsx(M2,{isOpen:e,onClose:()=>{s(!1),i(null)},onSubmit:x,address:r||void 0,customerId:t,loading:d.isPending||u.isPending,title:r?"Edit Address":"Add New Address",isFirstAddress:c.length===0}),n.jsx(Oi,{isOpen:!!a,onClose:()=>l(null),onConfirm:p,title:"Delete Address",message:`Are you sure you want to delete this address? ${a!=null&&a.is_primary?"This is the primary address for this customer.":""}`,confirmText:"Delete",type:"danger",loading:h.isPending})]})},B2=()=>{const{id:t}=Ba(),e=bt(),[s,r]=N.useState(!1),{data:i,isLoading:a,error:l}=i2(t),c=Ex(),o=async u=>{if(i)try{await c.mutateAsync({id:i.id,...u}),r(!1)}catch{}},d=u=>new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return a?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/customers"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Customers"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})]})})]}):l||!i?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/customers"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Customers"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-red-600",children:"Customer not found or error loading customer details."})})})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>e("/customers"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Customers"})]}),n.jsx("div",{className:"text-gray-400",children:"/"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i.name})]}),n.jsxs("button",{onClick:()=>r(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(Tt,{className:"h-4 w-4"}),n.jsx("span",{children:"Edit Customer"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Business Name"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(D1,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-gray-900",children:i.name})]})]}),i.external_id&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"External ID"}),n.jsx("span",{className:"text-gray-900",children:i.external_id})]}),i.tax_id&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Tax ID (VAT/EIN)"}),n.jsx("span",{className:"text-gray-900",children:i.tax_id})]}),i.email&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Email"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(B1,{className:"h-4 w-4 text-gray-400"}),n.jsx("a",{href:`mailto:${i.email}`,className:"text-blue-600 hover:text-blue-800",children:i.email})]})]}),i.phone&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Phone"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Q1,{className:"h-4 w-4 text-gray-400"}),n.jsx("a",{href:`tel:${i.phone}`,className:"text-blue-600 hover:text-blue-800",children:i.phone})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Account Status"}),n.jsx(rc,{status:i.account_status})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Credit Terms"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($1,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{className:"text-gray-900",children:[i.credit_terms_days," days"]})]})]})]})]})}),n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Details"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Created"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ee,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:d(i.created_at)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Last Updated"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ee,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:d(i.updated_at)})]})]})]})]})})]}),n.jsx(z2,{customerId:i.id}),n.jsx(qx,{isOpen:s,onClose:()=>r(!1),onSubmit:o,customer:i,loading:c.isPending,title:"Edit Customer"})]})},V2=50,Ya=(t={})=>De({queryKey:["products",t],queryFn:async()=>{console.log("Fetching products with filters:",t);let e=I.from("products").select("*",{count:"exact"});t.show_obsolete||(e=e.in("status",["active","end_of_sale"])),t.search&&(e=e.or(`sku.ilike.%${t.search}%,name.ilike.%${t.search}%,description.ilike.%${t.search}%`)),t.status&&(e=e.eq("status",t.status)),t.unit_of_measure&&(e=e.eq("unit_of_measure",t.unit_of_measure));const s=t.sort_by||"created_at",r=t.sort_order||"desc";e=e.order(s,{ascending:r==="asc"});const i=t.page||1,a=t.limit||V2,l=(i-1)*a,c=l+a-1;e=e.range(l,c);const{data:o,error:d,count:u}=await e;if(console.log("Supabase products response:",{data:o,error:d,count:u}),d)throw console.error("Supabase products error:",d),new Error(d.message);return{products:o||[],totalCount:u||0,totalPages:Math.ceil((u||0)/a),currentPage:i}},retry:1,staleTime:3e4}),W2=t=>De({queryKey:["product",t],queryFn:async()=>{if(console.log("Fetching product:",t),!t||t==="null"||t==="undefined")throw new Error("Invalid product ID");const{data:e,error:s}=await I.from("products").select("*").eq("id",t).single();if(console.log("Product fetch result:",{data:e,error:s}),s)throw console.error("Product fetch error:",s),new Error(s.message);return e},enabled:!!t&&t!=="null"&&t!=="undefined"}),K2=()=>De({queryKey:["product-stats"],queryFn:async()=>{console.log("Fetching product statistics");const{data:t,error:e}=await I.from("products").select("status, unit_of_measure");if(e)throw console.error("Product stats error:",e),new Error(e.message);const s={total:t.filter(r=>r.status!=="obsolete").length,active:t.filter(r=>r.status==="active").length,end_of_sale:t.filter(r=>r.status==="end_of_sale").length,obsolete:t.filter(r=>r.status==="obsolete").length,cylinders:t.filter(r=>r.unit_of_measure==="cylinder"&&r.status!=="obsolete").length,kg_products:t.filter(r=>r.unit_of_measure==="kg"&&r.status!=="obsolete").length};return console.log("Product stats:",s),s},staleTime:6e4}),Q2=()=>{const t=le();return he({mutationFn:async e=>{console.log("Creating product:",e);const{data:s}=await I.from("products").select("id").eq("sku",e.sku).neq("status","obsolete").maybeSingle();if(s)throw new Error("SKU already exists. Please use a unique SKU.");if(e.barcode_uid){const{data:a}=await I.from("products").select("id").eq("barcode_uid",e.barcode_uid).neq("status","obsolete").maybeSingle();if(a)throw new Error("Barcode UID already exists. Please use a unique barcode.")}const{data:r,error:i}=await I.from("products").insert([{...e,created_at:new Date().toISOString()}]).select().single();if(console.log("Create product result:",{data:r,error:i}),i)throw console.error("Create product error:",i),new Error(i.message);return r},onSuccess:e=>{console.log("Product created successfully:",e),t.invalidateQueries({queryKey:["products"]}),t.invalidateQueries({queryKey:["product-stats"]}),G.success("Product created successfully")},onError:e=>{console.error("Create product mutation error:",e),G.error(e.message||"Failed to create product")}})},Mx=()=>{const t=le();return he({mutationFn:async({id:e,...s})=>{if(console.log("Updating product:",e,s),!e||e==="null"||e==="undefined")throw new Error("Invalid product ID");if(s.sku){const{data:a}=await I.from("products").select("id").eq("sku",s.sku).neq("id",e).neq("status","obsolete").maybeSingle();if(a)throw new Error("SKU already exists. Please use a unique SKU.")}if(s.barcode_uid){const{data:a}=await I.from("products").select("id").eq("barcode_uid",s.barcode_uid).neq("id",e).neq("status","obsolete").maybeSingle();if(a)throw new Error("Barcode UID already exists. Please use a unique barcode.")}const{data:r,error:i}=await I.from("products").update(s).eq("id",e).select().single();if(console.log("Update product result:",{data:r,error:i}),i)throw console.error("Update product error:",i),new Error(i.message);return r},onSuccess:e=>{console.log("Product updated successfully:",e),t.invalidateQueries({queryKey:["products"]}),t.invalidateQueries({queryKey:["product",e.id]}),t.invalidateQueries({queryKey:["product-stats"]}),G.success("Product updated successfully")},onError:e=>{console.error("Update product mutation error:",e),G.error(e.message||"Failed to update product")}})},H2=()=>{const t=le();return he({mutationFn:async e=>{if(console.log("Marking product as obsolete:",e),!e||e==="null"||e==="undefined")throw new Error("Invalid product ID");const{data:s,error:r}=await I.from("products").update({status:"obsolete"}).eq("id",e).select().single();if(console.log("Mark product obsolete result:",{data:s,error:r}),r)throw console.error("Mark product obsolete error:",r),new Error(r.message);return s},onSuccess:e=>{console.log("Product marked as obsolete successfully:",e),t.invalidateQueries({queryKey:["products"]}),t.invalidateQueries({queryKey:["product-stats"]}),G.success("Product marked as obsolete and hidden from active lists")},onError:e=>{console.error("Mark product obsolete mutation error:",e),G.error(e.message||"Failed to mark product as obsolete")}})},G2=()=>{const t=le();return he({mutationFn:async({productIds:e,status:s})=>{console.log("Bulk updating product status:",e,s);const r=e.filter(l=>l&&l!=="null"&&l!=="undefined");if(r.length===0)throw new Error("No valid product IDs provided");const{data:i,error:a}=await I.from("products").update({status:s}).in("id",r).select();if(console.log("Bulk update result:",{data:i,error:a}),a)throw console.error("Bulk update error:",a),new Error(a.message);return i},onSuccess:e=>{console.log("Products updated successfully:",e),t.invalidateQueries({queryKey:["products"]}),t.invalidateQueries({queryKey:["product-stats"]}),G.success(`${e.length} products updated successfully`)},onError:e=>{console.error("Bulk update mutation error:",e),G.error(e.message||"Failed to update products")}})},J2=()=>{const t=le();return he({mutationFn:async e=>{if(console.log("Reactivating product:",e),!e||e==="null"||e==="undefined")throw new Error("Invalid product ID");const{data:s,error:r}=await I.from("products").update({status:"active"}).eq("id",e).select().single();if(r)throw new Error(r.message);return s},onSuccess:e=>{t.invalidateQueries({queryKey:["products"]}),t.invalidateQueries({queryKey:["product",e.id]}),t.invalidateQueries({queryKey:["product-stats"]}),G.success("Product reactivated successfully")},onError:e=>{G.error(e.message||"Failed to reactivate product")}})},Y2=({products:t,loading:e=!1,onView:s,onEdit:r,onDelete:i,selectedProducts:a=[],onSelectionChange:l})=>{const[c,o]=N.useState(!1),d=J2(),u=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),h=w=>w==="cylinder"?kh:Ch,m=w=>{switch(w){case"active":return"active";case"end_of_sale":return"credit_hold";case"obsolete":return"closed";default:return"active"}},g=w=>{o(w),l&&l(w?t.map(x=>x.id):[])},v=(w,x)=>{if(l){const p=x?[...a,w]:a.filter(f=>f!==w);l(p),o(p.length===t.length)}},b=async w=>{try{await d.mutateAsync(w.id)}catch{}};return console.log("ProductTable render:",{products:t,loading:e}),e?n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-6 w-6 animate-spin text-blue-600"}),n.jsx("span",{className:"text-gray-600",children:"Loading products..."})]})})}):!t||t.length===0?n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"mb-4",children:n.jsx(ye,{className:"h-12 w-12 text-gray-300 mx-auto"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products found"}),n.jsx("p",{className:"text-gray-500",children:t===null?"Failed to load products. Please check your connection.":"Get started by adding your first product."})]})}):n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Products (",t.length,")"]}),a.length>0&&n.jsxs("span",{className:"text-sm text-blue-600",children:[a.length," selected"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[l&&n.jsx("th",{className:"px-6 py-3 text-left",children:n.jsx("input",{type:"checkbox",checked:c,onChange:w=>g(w.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type & Specs"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(w=>{const x=h(w.unit_of_measure),p=w.status==="obsolete";return n.jsxs("tr",{className:`hover:bg-gray-50 ${p?"opacity-60":""}`,children:[l&&n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("input",{type:"checkbox",checked:a.includes(w.id),onChange:f=>v(w.id,f.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[w.name,p&&n.jsx("span",{className:"ml-2 text-xs text-red-600",children:"(Obsolete)"})]}),n.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",w.sku]}),w.description&&n.jsx("div",{className:"text-xs text-gray-400 mt-1 max-w-xs truncate",children:w.description})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(x,{className:"h-4 w-4 text-gray-400"}),n.jsxs("div",{className:"text-sm text-gray-900",children:[n.jsx("div",{className:"capitalize",children:w.unit_of_measure}),w.unit_of_measure==="cylinder"&&n.jsxs("div",{className:"text-xs text-gray-500",children:[w.capacity_kg&&`${w.capacity_kg} kg capacity`,w.tare_weight_kg&&`  ${w.tare_weight_kg} kg tare`]}),w.valve_type&&n.jsxs("div",{className:"text-xs text-gray-500",children:["Valve: ",w.valve_type]})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx(rc,{status:m(w.status),className:"capitalize",children:w.status.replace("_"," ")})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u(w.created_at)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx("button",{onClick:()=>s(w),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50 transition-colors",title:"View product",children:n.jsx(Ha,{className:"h-4 w-4"})}),!p&&n.jsx("button",{onClick:()=>r(w),className:"text-gray-600 hover:text-gray-900 p-1 rounded hover:bg-gray-50 transition-colors",title:"Edit product",children:n.jsx(Tt,{className:"h-4 w-4"})}),p?n.jsx("button",{onClick:()=>b(w),disabled:d.isPending,className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50 transition-colors disabled:opacity-50",title:"Reactivate product",children:n.jsx(mn,{className:"h-4 w-4"})}):n.jsx("button",{onClick:()=>i(w),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50 transition-colors",title:"Mark as obsolete",children:n.jsx(_n,{className:"h-4 w-4"})})]})})]},w.id)})})]})})]})},X2=({filters:t,onFiltersChange:e})=>{const s=o=>{e({...t,search:o.target.value||void 0,page:1})},r=o=>{e({...t,status:o.target.value||void 0,page:1})},i=o=>{e({...t,unit_of_measure:o.target.value||void 0,page:1})},a=o=>{const[d,u]=o.target.value.split(":");e({...t,sort_by:d||"created_at",sort_order:u||"desc",page:1})},l=()=>{e({...t,show_obsolete:!t.show_obsolete,page:1})},c=()=>{e({page:1})};return n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by SKU, name, or description...",value:t.search||"",onChange:s,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"sm:w-40",children:n.jsxs("div",{className:"relative",children:[n.jsx(bo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsxs("select",{value:t.status||"",onChange:r,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white",children:[n.jsx("option",{value:"",children:"All Statuses"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"end_of_sale",children:"End of Sale"}),n.jsx("option",{value:"obsolete",children:"Obsolete"})]})]})}),n.jsx("div",{className:"sm:w-40",children:n.jsxs("div",{className:"relative",children:[n.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsxs("select",{value:t.unit_of_measure||"",onChange:i,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white",children:[n.jsx("option",{value:"",children:"All Types"}),n.jsx("option",{value:"cylinder",children:"Cylinders"}),n.jsx("option",{value:"kg",children:"By Weight (kg)"})]})]})}),n.jsx("div",{className:"sm:w-48",children:n.jsxs("select",{value:`${t.sort_by||"created_at"}:${t.sort_order||"desc"}`,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white",children:[n.jsx("option",{value:"created_at:desc",children:"Newest First"}),n.jsx("option",{value:"created_at:asc",children:"Oldest First"}),n.jsx("option",{value:"name:asc",children:"Name A-Z"}),n.jsx("option",{value:"name:desc",children:"Name Z-A"}),n.jsx("option",{value:"sku:asc",children:"SKU A-Z"}),n.jsx("option",{value:"sku:desc",children:"SKU Z-A"}),n.jsx("option",{value:"capacity_kg:desc",children:"Capacity High-Low"}),n.jsx("option",{value:"capacity_kg:asc",children:"Capacity Low-High"})]})}),n.jsxs("button",{onClick:l,className:`flex items-center space-x-2 px-3 py-2 rounded-md transition-colors ${t.show_obsolete?"bg-red-100 text-red-800 border border-red-200":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"}`,title:t.show_obsolete?"Hide obsolete products":"Show obsolete products",children:[t.show_obsolete?n.jsx(L1,{className:"h-4 w-4"}):n.jsx(Ha,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:t.show_obsolete?"Hide Obsolete":"Show Obsolete"})]}),n.jsxs("button",{onClick:c,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-md transition-colors",title:"Reset filters",children:[n.jsx(mn,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Reset"})]})]})]})})},zx=({isOpen:t,onClose:e,onSubmit:s,product:r,loading:i=!1,title:a})=>{const[l,c]=N.useState(!1),{register:o,handleSubmit:d,reset:u,watch:h,formState:{errors:m}}=_s({defaultValues:{sku:"",name:"",description:"",unit_of_measure:"cylinder",capacity_kg:void 0,tare_weight_kg:void 0,valve_type:"",status:"active",barcode_uid:""}}),g=h("unit_of_measure"),v=h("status");N.useEffect(()=>{u(r?{sku:r.sku,name:r.name,description:r.description||"",unit_of_measure:r.unit_of_measure,capacity_kg:r.capacity_kg,tare_weight_kg:r.tare_weight_kg,valve_type:r.valve_type||"",status:r.status,barcode_uid:r.barcode_uid||""}:{sku:"",name:"",description:"",unit_of_measure:"cylinder",capacity_kg:void 0,tare_weight_kg:void 0,valve_type:"",status:"active",barcode_uid:""})},[r,u]),N.useEffect(()=>{c(v==="obsolete")},[v]);const b=p=>/^[A-Z0-9-]+$/.test(p)?!0:"SKU must contain only uppercase letters, numbers, and hyphens",w=(p,f)=>{if(p!==void 0){if(p<=0)return`${f} must be greater than 0`;if(p>500)return`${f} must be 500 kg or less`}return!0},x=p=>{const f={...p};p.unit_of_measure!=="cylinder"&&(f.capacity_kg=void 0,f.tare_weight_kg=void 0,f.valve_type=void 0),Object.keys(f).forEach(y=>{f[y]===""&&(f[y]=void 0)}),s(f)};return t?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:e}),n.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl",children:n.jsxs("form",{onSubmit:d(x),children:[n.jsxs("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:a}),n.jsx("button",{type:"button",onClick:e,className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.jsx(ot,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700",children:"SKU *"}),n.jsx("input",{type:"text",id:"sku",...o("sku",{required:"SKU is required",validate:b}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 uppercase",placeholder:"CYL-50KG-S"}),m.sku&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.sku.message})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),n.jsxs("select",{id:"status",...o("status"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"end_of_sale",children:"End of Sale"}),n.jsx("option",{value:"obsolete",children:"Obsolete"})]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Product Name *"}),n.jsx("input",{type:"text",id:"name",...o("name",{required:"Product name is required"}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"LPG Cylinder 50kg"}),m.name&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.name.message})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),n.jsx("textarea",{id:"description",rows:3,...o("description"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Detailed product description..."})]})]}),l&&n.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ve,{className:"h-4 w-4 text-red-600"}),n.jsx("span",{className:"text-sm text-red-800",children:'Warning: Setting status to "Obsolete" will make this product unavailable for future orders.'})]})})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Physical Properties"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"unit_of_measure",className:"block text-sm font-medium text-gray-700",children:"Unit of Measure"}),n.jsxs("select",{id:"unit_of_measure",...o("unit_of_measure"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[n.jsx("option",{value:"cylinder",children:"Cylinder"}),n.jsx("option",{value:"kg",children:"By Weight (kg)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"barcode_uid",className:"block text-sm font-medium text-gray-700",children:"Barcode/RFID UID"}),n.jsx("input",{type:"text",id:"barcode_uid",...o("barcode_uid"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Optional unique identifier"})]}),g==="cylinder"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"capacity_kg",className:"block text-sm font-medium text-gray-700",children:"Capacity (kg)"}),n.jsx("input",{type:"number",step:"0.1",min:"0.1",max:"500",id:"capacity_kg",...o("capacity_kg",{valueAsNumber:!0,validate:p=>w(p,"Capacity")}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"50.0"}),m.capacity_kg&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.capacity_kg.message})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"tare_weight_kg",className:"block text-sm font-medium text-gray-700",children:"Tare Weight (kg)"}),n.jsx("input",{type:"number",step:"0.1",min:"0.1",max:"500",id:"tare_weight_kg",...o("tare_weight_kg",{valueAsNumber:!0,validate:p=>w(p,"Tare weight")}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"15.0"}),m.tare_weight_kg&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.tare_weight_kg.message})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{htmlFor:"valve_type",className:"block text-sm font-medium text-gray-700",children:"Valve Type"}),n.jsx("input",{type:"text",id:"valve_type",...o("valve_type"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Standard valve specifications"})]})]})]})]})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsx("button",{type:"submit",disabled:i,className:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:i?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Saving..."})]}):"Save Product"}),n.jsx("button",{type:"button",onClick:e,disabled:i,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}):null},Z2=()=>{const{data:t,isLoading:e}=K2();if(e)return n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((r,i)=>n.jsx("div",{className:"h-16 bg-gray-200 rounded"},i))})]})});if(!t)return null;const s=[{name:"Total Products",value:t.total,icon:ye,color:"text-blue-600",bgColor:"bg-blue-50"},{name:"Active",value:t.active,icon:hn,color:"text-green-600",bgColor:"bg-green-50"},{name:"End of Sale",value:t.end_of_sale,icon:Ve,color:"text-yellow-600",bgColor:"bg-yellow-50"},{name:"Obsolete",value:t.obsolete,icon:sc,color:"text-red-600",bgColor:"bg-red-50"},{name:"Cylinders",value:t.cylinders,icon:kh,color:"text-purple-600",bgColor:"bg-purple-50"},{name:"By Weight",value:t.kg_products,icon:Ch,color:"text-indigo-600",bgColor:"bg-indigo-50"}];return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Product Overview"}),n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-4",children:s.map(r=>n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full ${r.bgColor} mb-2`,children:n.jsx(r.icon,{className:`h-6 w-6 ${r.color}`})}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.value}),n.jsx("div",{className:"text-sm text-gray-600",children:r.name})]},r.name))})]})},ek=({selectedProducts:t,onClearSelection:e})=>{const[s,r]=N.useState(!1),i=G2(),a=async c=>{try{await i.mutateAsync({productIds:t,status:c}),e(),r(!1)}catch{}},l=()=>{console.log("Exporting products:",t),r(!1)};return t.length===0?null:n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[t.length," product",t.length>1?"s":""," selected"]}),n.jsx("button",{onClick:e,className:"text-sm text-blue-600 hover:text-blue-800",children:"Clear selection"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>r(!s),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[n.jsx(K1,{className:"h-4 w-4"}),n.jsx("span",{children:"Bulk Actions"}),n.jsx(Nh,{className:"h-4 w-4"})]}),s&&n.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-10",children:n.jsxs("div",{className:"py-1",children:[n.jsx("div",{className:"px-4 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-100",children:"Change Status"}),n.jsx("button",{onClick:()=>a("active"),disabled:i.isPending,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Set as Active"}),n.jsx("button",{onClick:()=>a("end_of_sale"),disabled:i.isPending,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Set as End of Sale"}),n.jsx("button",{onClick:()=>a("obsolete"),disabled:i.isPending,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Set as Obsolete"}),n.jsx("div",{className:"border-t border-gray-100 mt-1",children:n.jsxs("button",{onClick:l,className:"flex items-center space-x-2 w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[n.jsx(Sh,{className:"h-4 w-4"}),n.jsx("span",{children:"Export Selected"})]})})]})})]})]})})},tk=()=>{const t=bt(),[e,s]=N.useState({page:1}),[r,i]=N.useState(!1),[a,l]=N.useState(null),[c,o]=N.useState(null),[d,u]=N.useState([]),{data:h,isLoading:m,error:g,refetch:v}=Ya(e),b=Q2(),w=Mx(),x=H2();N.useEffect(()=>{console.log("ProductsPage state:",{filters:e,data:h,isLoading:m,error:g,isFormOpen:r,editingProduct:a,selectedProducts:d})},[e,h,m,g,r,a,d]);const p=()=>{console.log("Adding new product"),l(null),i(!0)},f=M=>{console.log("Editing product:",M),l(M),i(!0)},y=M=>{console.log("Viewing product:",M),t(`/products/${M.id}`)},j=M=>{console.log("Marking product as obsolete:",M),o(M)},E=async M=>{console.log("Form submit:",M);try{a?await w.mutateAsync({id:a.id,...M}):await b.mutateAsync(M),i(!1),l(null)}catch(ce){console.error("Form submit error:",ce)}},P=async()=>{if(c){console.log("Confirming mark as obsolete:",c);try{await x.mutateAsync(c.id),o(null)}catch(M){console.error("Mark obsolete error:",M)}}},S=M=>{console.log("Page change:",M),s(ce=>({...ce,page:M}))},C=()=>{console.log("Refreshing products"),v()},T=M=>{u(M)},R=()=>{u([])},F=c?c.status==="obsolete"?{title:"Product Already Obsolete",message:`"${c.name}" is already marked as obsolete and hidden from active lists.`}:{title:"Mark Product as Obsolete",message:`Are you sure you want to mark "${c.name}" as obsolete? This will hide it from active product lists but preserve all historical data including price lists, inventory records, and order history. The product can be reactivated later if needed.`}:{title:"",message:""};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Products"}),n.jsx("p",{className:"text-gray-600",children:"Manage your LPG product catalog"}),g&&n.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["Error: ",g.message]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("button",{onClick:C,disabled:m,className:"flex items-center space-x-2 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:[n.jsx(wn,{className:`h-4 w-4 ${m?"animate-spin":""}`}),n.jsx("span",{children:"Refresh"})]}),n.jsxs("button",{onClick:p,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(xt,{className:"h-4 w-4"}),n.jsx("span",{children:"Add Product"})]})]})]}),n.jsx(Z2,{}),n.jsx(X2,{filters:e,onFiltersChange:s}),n.jsx(ek,{selectedProducts:d,onClearSelection:R}),n.jsx(Y2,{products:(h==null?void 0:h.products)||[],loading:m,onView:y,onEdit:f,onDelete:j,selectedProducts:d,onSelectionChange:T}),h&&h.totalPages>1&&n.jsx(Pi,{currentPage:h.currentPage,totalPages:h.totalPages,totalCount:h.totalCount,onPageChange:S}),n.jsx(zx,{isOpen:r,onClose:()=>{console.log("Closing form"),i(!1),l(null)},onSubmit:E,product:a||void 0,loading:b.isPending||w.isPending,title:a?"Edit Product":"Add New Product"}),n.jsx(Oi,{isOpen:!!c,onClose:()=>o(null),onConfirm:P,title:F.title,message:F.message,confirmText:(c==null?void 0:c.status)==="obsolete"?"OK":"Mark as Obsolete",type:(c==null?void 0:c.status)==="obsolete"?"info":"warning",loading:x.isPending})]})},sk=50,Ah=(t={})=>De({queryKey:["price-lists",t],queryFn:async()=>{console.log("Fetching price lists with filters:",t);let e=I.from("price_list").select(`
          *,
          price_list_item(count)
        `,{count:"exact"}).order("created_at",{ascending:!1});t.search&&(e=e.or(`name.ilike.%${t.search}%,description.ilike.%${t.search}%`)),t.currency_code&&(e=e.eq("currency_code",t.currency_code));const s=t.page||1,r=t.limit||sk,i=(s-1)*r,a=i+r-1;e=e.range(i,a);const{data:l,error:c,count:o}=await e;if(console.log("Supabase price lists response:",{data:l,error:c,count:o}),c)throw console.error("Supabase price lists error:",c),new Error(c.message);let d=l||[];const u=new Date().toISOString().split("T")[0];return{priceLists:d.map(m=>{var g,v;return{...m,product_count:((v=(g=m.price_list_item)==null?void 0:g[0])==null?void 0:v.count)||0,status:dk(m.start_date,m.end_date,u)}}).filter(m=>t.status?m.status===t.status:!0),totalCount:o||0,totalPages:Math.ceil((o||0)/r),currentPage:s}},retry:1,staleTime:3e4}),rk=t=>De({queryKey:["price-list",t],queryFn:async()=>{console.log("Fetching price list:",t);const{data:e,error:s}=await I.from("price_list").select("*").eq("id",t).single();if(console.log("Price list fetch result:",{data:e,error:s}),s)throw console.error("Price list fetch error:",s),new Error(s.message);return e},enabled:!!t}),Bx=async(t,e)=>{console.log("Fetching price list items:",t,e);let s=I.from("price_list_item").select(`
      *,
      product:products(id, sku, name, unit_of_measure)
    `).eq("price_list_id",t).order("unit_price",{ascending:!1});const{data:r,error:i}=await s;if(i)throw console.error("Price list items error:",i),new Error(i.message);return r||[]},Rh=(t,e)=>De({queryKey:["price-list-items",t,e],queryFn:()=>Bx(t,e),enabled:!!t,staleTime:3e4}),nk=(t,e)=>vj({queries:t.map(s=>({queryKey:["price-list-items",s,e],queryFn:()=>Bx(s,e),enabled:!!s,staleTime:3e4}))}),ik=()=>De({queryKey:["pricing-stats"],queryFn:async()=>{console.log("Fetching pricing statistics");const{data:t,error:e}=await I.from("price_list").select("start_date, end_date");if(e)throw console.error("Pricing stats error:",e),new Error(e.message);const s=new Date().toISOString().split("T")[0],r=new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],i={total_price_lists:t.length,active_price_lists:t.filter(a=>uk(a.start_date,a.end_date,s)).length,future_price_lists:t.filter(a=>a.start_date>s).length,expired_price_lists:t.filter(a=>a.end_date&&a.end_date<s).length,expiring_soon:t.filter(a=>a.end_date&&a.end_date<=r&&a.end_date>=s).length,products_without_pricing:0};return console.log("Pricing stats:",i),i},staleTime:6e4}),ak=()=>{const t=le();return he({mutationFn:async e=>{console.log("Creating price list:",e);const{data:s}=await I.from("price_list").select("id").eq("name",e.name).maybeSingle();if(s)throw new Error("Price list name already exists. Please use a unique name.");e.is_default&&await I.from("price_list").update({is_default:!1}).eq("is_default",!0);const{data:r,error:i}=await I.from("price_list").insert([{...e,created_at:new Date().toISOString()}]).select().single();if(console.log("Create price list result:",{data:r,error:i}),i)throw console.error("Create price list error:",i),new Error(i.message);return r},onSuccess:e=>{console.log("Price list created successfully:",e),t.invalidateQueries({queryKey:["price-lists"]}),t.invalidateQueries({queryKey:["pricing-stats"]}),G.success("Price list created successfully")},onError:e=>{console.error("Create price list mutation error:",e),G.error(e.message||"Failed to create price list")}})},Vx=()=>{const t=le();return he({mutationFn:async({id:e,...s})=>{if(console.log("Updating price list:",e,s),s.name){const{data:a}=await I.from("price_list").select("id").eq("name",s.name).neq("id",e).maybeSingle();if(a)throw new Error("Price list name already exists. Please use a unique name.")}s.is_default&&await I.from("price_list").update({is_default:!1}).eq("is_default",!0).neq("id",e);const{data:r,error:i}=await I.from("price_list").update(s).eq("id",e).select().single();if(console.log("Update price list result:",{data:r,error:i}),i)throw console.error("Update price list error:",i),new Error(i.message);return r},onSuccess:e=>{console.log("Price list updated successfully:",e),t.invalidateQueries({queryKey:["price-lists"]}),t.invalidateQueries({queryKey:["price-list",e.id]}),t.invalidateQueries({queryKey:["pricing-stats"]}),G.success("Price list updated successfully")},onError:e=>{console.error("Update price list mutation error:",e),G.error(e.message||"Failed to update price list")}})},lk=()=>{const t=le();return he({mutationFn:async e=>{console.log("Deleting price list:",e);const{error:s}=await I.from("price_list").delete().eq("id",e);if(console.log("Delete price list result:",{error:s}),s)throw console.error("Delete price list error:",s),new Error(s.message);return e},onSuccess:e=>{console.log("Price list deleted successfully:",e),t.invalidateQueries({queryKey:["price-lists"]}),t.invalidateQueries({queryKey:["pricing-stats"]}),G.success("Price list deleted successfully")},onError:e=>{console.error("Delete price list mutation error:",e),G.error(e.message||"Failed to delete price list")}})},ok=()=>{const t=le();return he({mutationFn:async e=>{console.log("Setting default price list:",e),await I.from("price_list").update({is_default:!1}).eq("is_default",!0);const{data:s,error:r}=await I.from("price_list").update({is_default:!0}).eq("id",e).select().single();if(r)throw new Error(r.message);return s},onSuccess:e=>{t.invalidateQueries({queryKey:["price-lists"]}),t.invalidateQueries({queryKey:["price-list",e.id]}),G.success("Default price list updated")},onError:e=>{G.error(e.message||"Failed to set default price list")}})},Wx=()=>{const t=le();return he({mutationFn:async e=>{console.log("Creating price list item:",e);const{data:s,error:r}=await I.from("price_list_item").insert([e]).select(`
          *,
          product:products(id, sku, name, unit_of_measure)
        `).single();if(r)throw new Error(r.message);return s},onSuccess:e=>{t.invalidateQueries({queryKey:["price-list-items",e.price_list_id]}),t.invalidateQueries({queryKey:["price-lists"]}),G.success("Product pricing added successfully")},onError:e=>{G.error(e.message||"Failed to add product pricing")}})},Kx=()=>{const t=le();return he({mutationFn:async({id:e,...s})=>{console.log("Updating price list item:",e,s);const{data:r,error:i}=await I.from("price_list_item").update(s).eq("id",e).select(`
          *,
          product:products(id, sku, name, unit_of_measure)
        `).single();if(i)throw new Error(i.message);return r},onSuccess:e=>{t.invalidateQueries({queryKey:["price-list-items",e.price_list_id]}),t.invalidateQueries({queryKey:["price-lists"]}),G.success("Product pricing updated successfully")},onError:e=>{G.error(e.message||"Failed to update product pricing")}})},ck=()=>{const t=le();return he({mutationFn:async e=>{console.log("Deleting price list item:",e);const{error:s}=await I.from("price_list_item").delete().eq("id",e.id);if(s)throw new Error(s.message);return e},onSuccess:e=>{t.invalidateQueries({queryKey:["price-list-items",e.price_list_id]}),t.invalidateQueries({queryKey:["price-lists"]}),G.success("Product removed from price list")},onError:e=>{G.error(e.message||"Failed to remove product from price list")}})},dk=(t,e,s)=>t>s?"future":e&&e<s?"expired":"active",uk=(t,e,s)=>t<=s&&(!e||e>=s),hk=()=>[{code:"KES",name:"Kenyan Shilling",symbol:"KSh"},{code:"USD",name:"US Dollar",symbol:"$"},{code:"EUR",name:"Euro",symbol:""},{code:"GBP",name:"British Pound",symbol:""},{code:"NGN",name:"Nigerian Naira",symbol:""},{code:"ZAR",name:"South African Rand",symbol:"R"},{code:"INR",name:"Indian Rupee",symbol:""},{code:"CAD",name:"Canadian Dollar",symbol:"C$"},{code:"AUD",name:"Australian Dollar",symbol:"A$"}],Tr=(t,e="KES")=>{const s=hk().find(a=>a.code===e),r=(s==null?void 0:s.symbol)||"KSh",i=t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return`${r}${i}`},mk=(t,e)=>e?t*(1+e/100):t,Qx=(t,e)=>{const s=new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});if(!e)return`${s} - Ongoing`;const r=new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return`${s} - ${r}`},ko=(t,e)=>{const s=new Date().toISOString().split("T")[0],r=t,i=e;return r>s?{status:"future",label:"Future",color:"bg-blue-100 text-blue-800 border-blue-200"}:i&&i<s?{status:"expired",label:"Expired",color:"bg-red-100 text-red-800 border-red-200"}:{status:"active",label:"Active",color:"bg-green-100 text-green-800 border-green-200"}},fk=(t,e)=>e?new Date(t)<=new Date(e):!0,pk=(t,e=30)=>{if(!t)return!1;const s=new Date,r=new Date(t),i=Math.ceil((r.getTime()-s.getTime())/(1e3*60*60*24));return i<=e&&i>=0},gk=({isOpen:t,onClose:e,onSubmit:s,priceListId:r,item:i,loading:a=!1,title:l,existingProductIds:c=[]})=>{const[o,d]=N.useState([]),[u,h]=N.useState(0),[m,g]=N.useState(!1),{register:v,handleSubmit:b,reset:w,watch:x,setValue:p,formState:{errors:f}}=_s({defaultValues:{price_list_id:r,product_id:"",unit_price:0,min_qty:1,surcharge_pct:0}}),{data:y}=Ya({limit:1e3}),E=((y==null?void 0:y.products)||[]).filter(D=>D.status==="active"&&!c.includes(D.id)),P=x("unit_price"),S=x("surcharge_pct");N.useEffect(()=>{w(i?{price_list_id:i.price_list_id,product_id:i.product_id,unit_price:i.unit_price,min_qty:i.min_qty,surcharge_pct:i.surcharge_pct||0}:{price_list_id:r,product_id:"",unit_price:0,min_qty:1,surcharge_pct:0})},[i,r,w]);const C=D=>{i?s(D):o.length>0?o.forEach(F=>{s({...D,product_id:F,unit_price:m?u:D.unit_price})}):s(D)},T=D=>{d(F=>F.includes(D)?F.filter(M=>M!==D):[...F,D])},R=(D,F)=>D*(1+(F||0)/100);return t?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:e}),n.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:n.jsxs("form",{onSubmit:b(C),children:[n.jsxs("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:l}),n.jsx("button",{type:"button",onClick:e,className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.jsx(ot,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-4",children:[!i&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Products"}),n.jsx("div",{className:"border border-gray-300 rounded-md p-2 max-h-60 overflow-y-auto",children:E.length===0?n.jsx("div",{className:"text-center py-4 text-gray-500",children:"No available products to add"}):n.jsx("div",{className:"space-y-2",children:E.map(D=>n.jsxs("div",{className:`flex items-center p-2 rounded-md ${o.includes(D.id)?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:[n.jsx("input",{type:"checkbox",id:`product-${D.id}`,checked:o.includes(D.id),onChange:()=>T(D.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsxs("label",{htmlFor:`product-${D.id}`,className:"ml-2 block text-sm text-gray-900 cursor-pointer flex-1",children:[n.jsx("div",{className:"font-medium",children:D.name}),n.jsxs("div",{className:"text-xs text-gray-500",children:["SKU: ",D.sku]})]})]},D.id))})}),o.length>0&&n.jsxs("div",{className:"mt-2 text-sm text-blue-600",children:[o.length," product",o.length!==1?"s":""," selected"]})]}),!i&&o.length>0&&n.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx("input",{type:"checkbox",id:"use-bulk-price",checked:m,onChange:()=>g(!m),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"use-bulk-price",className:"ml-2 block text-sm font-medium text-blue-800",children:"Apply same price to all selected products"})]}),m&&n.jsxs("div",{className:"mt-2",children:[n.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-1",children:"Bulk Price (KSh)"}),n.jsx("input",{type:"number",min:"0",step:"0.01",value:u,onChange:D=>h(parseFloat(D.target.value)||0),className:"w-full rounded-md border border-blue-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"0.00"})]})]}),(i||!m)&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"unit_price",className:"block text-sm font-medium text-gray-700",children:"Unit Price (KSh) *"}),n.jsx("input",{type:"number",id:"unit_price",min:"0",step:"0.01",...v("unit_price",{required:"Unit price is required",min:{value:0,message:"Price must be positive"}}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"0.00"}),f.unit_price&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.unit_price.message})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"min_qty",className:"block text-sm font-medium text-gray-700",children:"Minimum Quantity"}),n.jsx("input",{type:"number",id:"min_qty",min:"1",...v("min_qty",{required:"Minimum quantity is required",min:{value:1,message:"Minimum quantity must be at least 1"}}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),f.min_qty&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.min_qty.message})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"surcharge_pct",className:"block text-sm font-medium text-gray-700",children:"Surcharge %"}),n.jsx("input",{type:"number",id:"surcharge_pct",min:"0",step:"0.1",...v("surcharge_pct",{min:{value:0,message:"Surcharge must be positive"}}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"0.0"}),f.surcharge_pct&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.surcharge_pct.message})]})]}),(P>0||u>0)&&S>0&&n.jsx("div",{className:"p-3 bg-green-50 rounded-lg",children:n.jsxs("div",{className:"text-sm text-green-800",children:[n.jsx("strong",{children:"Final Price:"})," ",Tr(R(m?u:P,S)),n.jsxs("div",{className:"text-xs mt-1",children:["(Base price + ",S,"% surcharge)"]})]})}),i&&n.jsx("input",{type:"hidden",...v("product_id"),value:i.product_id}),n.jsx("input",{type:"hidden",...v("price_list_id"),value:r})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsx("button",{type:"submit",disabled:a||o.length===0&&!i,className:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:a?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Saving..."})]}):i?"Update Price":"Add Products"}),n.jsx("button",{type:"button",onClick:e,disabled:a,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}):null},xk=({productId:t})=>{const[e,s]=N.useState(null),[r,i]=N.useState(!1),[a,l]=N.useState(null),{data:c={priceLists:[]}}=Ah(),o=c.priceLists||[],d=o.map(j=>j.id),u=nk(d),h={};u.forEach((j,E)=>{const P=d[E];if(j.data&&j.data.length>0){const S=j.data.filter(C=>C.product_id===t);S.length>0&&(h[P]=S)}});const m=Wx(),g=Kx(),v=j=>{s(j),l(null),i(!0)},b=j=>{s(j.price_list_id),l(j),i(!0)},w=async j=>{try{a?await g.mutateAsync({id:a.id,...j}):await m.mutateAsync({...j,product_id:t}),i(!1),l(null)}catch{}},x=o.filter(j=>!Object.keys(h).includes(j.id));new Date().toISOString().split("T")[0];const p=o.filter(j=>ko(j.start_date,j.end_date).status==="active"),f=Object.keys(h).length===0,y=!p.some(j=>Object.keys(h).includes(j.id));return n.jsxs("div",{className:"space-y-6",children:[(f||y)&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(zs,{className:"h-5 w-5 text-yellow-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:f?"No Pricing Defined":"No Active Pricing"}),n.jsx("p",{className:"text-sm text-yellow-700",children:f?"This product has no pricing defined in any price list.":"This product has pricing defined, but not in any active price list."})]})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Current Pricing"}),x.length>0&&n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:"",onChange:j=>{j.target.value&&v(j.target.value)},className:"appearance-none bg-blue-600 text-white px-3 py-1 pr-8 rounded text-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[n.jsx("option",{value:"",children:"Add to Price List..."}),x.map(j=>n.jsx("option",{value:j.id,children:j.name},j.id))]}),n.jsx(xt,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-white pointer-events-none"})]})]}),Object.keys(h).length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(zs,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"No pricing defined for this product"}),x.length>0&&n.jsx("button",{onClick:()=>v(x[0].id),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Add pricing to a price list"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price List"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Min Qty"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Surcharge"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Final Price"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(h).map(([j,E])=>{const P=o.find(R=>R.id===j);if(!P||!E.length)return null;const S=E[0],C=ko(P.start_date,P.end_date),T=mk(S.unit_price,S.surcharge_pct);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:P.name}),P.is_default&&n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Default"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${C.color}`,children:C.label})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:Tr(S.unit_price)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsx("span",{className:"text-sm text-gray-900",children:S.min_qty})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsx("span",{className:"text-sm text-gray-900",children:S.surcharge_pct?`${S.surcharge_pct}%`:"-"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:n.jsx("span",{className:"text-sm font-medium text-green-600",children:Tr(T)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsx("button",{onClick:()=>b(S),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50 transition-colors",title:"Edit price",children:n.jsx(Tt,{className:"h-4 w-4"})})})]},j)})})]})})]}),r&&e&&n.jsx(gk,{isOpen:r,onClose:()=>{i(!1),l(null)},onSubmit:w,priceListId:e,item:a||void 0,loading:m.isPending||g.isPending,title:a?"Edit Product Price":"Add Product to Price List"})]})},yk=()=>{const{id:t}=Ba(),e=bt(),[s,r]=N.useState(!1),[i,a]=N.useState("details"),{data:l,isLoading:c,error:o}=W2(t),d=Mx(),u=async v=>{if(l)try{await d.mutateAsync({id:l.id,...v}),r(!1)}catch{}},h=v=>new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),m=v=>{switch(v){case"active":return"active";case"end_of_sale":return"credit_hold";case"obsolete":return"closed";default:return"active"}};if(c)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/products"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Products"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})]})})]});if(o||!l)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/products"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Products"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-red-600",children:"Product not found or error loading product details."})})})]});const g=l.unit_of_measure==="cylinder"?kh:Ch;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>e("/products"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Products"})]}),n.jsx("div",{className:"text-gray-400",children:"/"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:l.name})]}),n.jsxs("button",{onClick:()=>r(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(Tt,{className:"h-4 w-4"}),n.jsx("span",{children:"Edit Product"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[n.jsx("div",{className:"border-b border-gray-200",children:n.jsxs("nav",{className:"flex space-x-8 px-6",children:[n.jsxs("button",{onClick:()=>a("details"),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${i==="details"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(ye,{className:"h-4 w-4"}),n.jsx("span",{children:"Product Details"})]}),n.jsxs("button",{onClick:()=>a("pricing"),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${i==="pricing"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(zs,{className:"h-4 w-4"}),n.jsx("span",{children:"Pricing"})]})]})}),n.jsxs("div",{className:"p-6",children:[i==="details"&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Product Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Product Name"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ye,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-gray-900",children:l.name})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"SKU"}),n.jsx("span",{className:"text-gray-900 font-mono",children:l.sku})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Unit of Measure"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(g,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-gray-900 capitalize",children:l.unit_of_measure})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Status"}),n.jsx(rc,{status:m(l.status),className:"capitalize",children:l.status.replace("_"," ")})]}),l.unit_of_measure==="cylinder"&&n.jsxs(n.Fragment,{children:[l.capacity_kg&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Capacity"}),n.jsxs("span",{className:"text-gray-900",children:[l.capacity_kg," kg"]})]}),l.tare_weight_kg&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Tare Weight"}),n.jsxs("span",{className:"text-gray-900",children:[l.tare_weight_kg," kg"]})]}),l.valve_type&&n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Valve Type"}),n.jsx("span",{className:"text-gray-900",children:l.valve_type})]})]}),l.barcode_uid&&n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Barcode/RFID UID"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(R1,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-gray-900 font-mono",children:l.barcode_uid})]})]}),l.description&&n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-900",children:l.description})]})]}),l.status==="obsolete"&&n.jsx("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-md",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ve,{className:"h-5 w-5 text-red-600"}),n.jsx("span",{className:"text-sm font-medium text-red-800",children:"This product is marked as obsolete and is no longer available for new orders."})]})})]}),n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Product Details"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Created"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ee,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:h(l.created_at)})]})]})})]})})]}),i==="pricing"&&n.jsx(xk,{productId:l.id})]})]}),n.jsx(zx,{isOpen:s,onClose:()=>r(!1),onSubmit:u,product:l,loading:d.isPending,title:"Edit Product"})]})},vk=50,Hx=(t={})=>De({queryKey:["warehouses",t],queryFn:async()=>{console.log("Fetching warehouses with filters:",t);let e=I.from("warehouses").select(`
          *,
          address:addresses(
            id,
            line1,
            line2,
            city,
            state,
            postal_code,
            country,
            instructions
          )
        `,{count:"exact"}).order("created_at",{ascending:!1});t.search&&(e=e.ilike("name",`%${t.search}%`));const s=t.page||1,r=t.limit||vk,i=(s-1)*r,a=i+r-1;e=e.range(i,a);const{data:l,error:c,count:o}=await e;if(console.log("Supabase warehouses response:",{data:l,error:c,count:o}),c)throw console.error("Supabase warehouses error:",c),new Error(c.message);return{warehouses:l||[],totalCount:o||0,totalPages:Math.ceil((o||0)/r),currentPage:s}},retry:1,staleTime:3e4}),bk=t=>De({queryKey:["warehouse",t],queryFn:async()=>{console.log("Fetching warehouse:",t);const{data:e,error:s}=await I.from("warehouses").select(`
          *,
          address:addresses(
            id,
            line1,
            line2,
            city,
            state,
            postal_code,
            country,
            instructions
          )
        `).eq("id",t).single();if(console.log("Warehouse fetch result:",{data:e,error:s}),s)throw console.error("Warehouse fetch error:",s),new Error(s.message);return e},enabled:!!t}),wk=()=>De({queryKey:["warehouse-stats"],queryFn:async()=>{console.log("Fetching warehouse statistics");const{data:t,error:e}=await I.from("warehouses").select("capacity_cylinders");if(e)throw console.error("Warehouse stats error:",e),new Error(e.message);const s=t.map(i=>i.capacity_cylinders).filter(i=>i!=null),r={total:t.length,total_capacity:s.reduce((i,a)=>i+a,0),average_capacity:s.length>0?Math.round(s.reduce((i,a)=>i+a,0)/s.length):0};return console.log("Warehouse stats:",r),r},staleTime:6e4}),jk=()=>De({queryKey:["warehouse-options"],queryFn:async()=>{console.log("Fetching warehouse options");const{data:t,error:e}=await I.from("warehouses").select(`
          id,
          name,
          address:addresses(city, state)
        `).order("name");if(e)throw console.error("Warehouse options error:",e),new Error(e.message);return(t||[]).map(s=>{var r,i;return{id:s.id,name:s.name,city:(r=s.address)==null?void 0:r.city,state:(i=s.address)==null?void 0:i.state}})},staleTime:3e5}),_k=()=>{const t=le();return he({mutationFn:async e=>{console.log("Creating warehouse:",e);const{data:s}=await I.from("warehouses").select("id").eq("name",e.name).single();if(s)throw new Error("Warehouse name already exists. Please use a unique name.");let r=null;if(e.address){const{data:l,error:c}=await I.from("addresses").insert([{...e.address,customer_id:null,is_primary:!1,created_at:new Date().toISOString()}]).select().single();if(c)throw console.error("Address creation error:",c),new Error(`Failed to create address: ${c.message}`);r=l.id}const{data:i,error:a}=await I.from("warehouses").insert([{name:e.name,capacity_cylinders:e.capacity_cylinders,address_id:r,created_at:new Date().toISOString()}]).select(`
          *,
          address:addresses(
            id,
            line1,
            line2,
            city,
            state,
            postal_code,
            country,
            instructions
          )
        `).single();if(console.log("Create warehouse result:",{data:i,error:a}),a)throw r&&await I.from("addresses").delete().eq("id",r),console.error("Create warehouse error:",a),new Error(a.message);return i},onSuccess:e=>{console.log("Warehouse created successfully:",e),t.invalidateQueries({queryKey:["warehouses"]}),t.invalidateQueries({queryKey:["warehouse-stats"]}),t.invalidateQueries({queryKey:["warehouse-options"]}),G.success("Warehouse created successfully")},onError:e=>{console.error("Create warehouse mutation error:",e),G.error(e.message||"Failed to create warehouse")}})},Gx=()=>{const t=le();return he({mutationFn:async({id:e,...s})=>{if(console.log("Updating warehouse:",e,s),s.name){const{data:o}=await I.from("warehouses").select("id").eq("name",s.name).neq("id",e).single();if(o)throw new Error("Warehouse name already exists. Please use a unique name.")}const{data:r}=await I.from("warehouses").select("address_id").eq("id",e).single();let i=r==null?void 0:r.address_id;if(s.address)if(i){const{error:o}=await I.from("addresses").update(s.address).eq("id",i);if(o)throw console.error("Address update error:",o),new Error(`Failed to update address: ${o.message}`)}else{const{data:o,error:d}=await I.from("addresses").insert([{...s.address,customer_id:null,is_primary:!1,created_at:new Date().toISOString()}]).select().single();if(d)throw console.error("Address creation error:",d),new Error(`Failed to create address: ${d.message}`);i=o.id}const a={name:s.name,capacity_cylinders:s.capacity_cylinders};i&&(a.address_id=i);const{data:l,error:c}=await I.from("warehouses").update(a).eq("id",e).select(`
          *,
          address:addresses(
            id,
            line1,
            line2,
            city,
            state,
            postal_code,
            country,
            instructions
          )
        `).single();if(console.log("Update warehouse result:",{data:l,error:c}),c)throw console.error("Update warehouse error:",c),new Error(c.message);return l},onSuccess:e=>{console.log("Warehouse updated successfully:",e),t.invalidateQueries({queryKey:["warehouses"]}),t.invalidateQueries({queryKey:["warehouse",e.id]}),t.invalidateQueries({queryKey:["warehouse-stats"]}),t.invalidateQueries({queryKey:["warehouse-options"]}),G.success("Warehouse updated successfully")},onError:e=>{console.error("Update warehouse mutation error:",e),G.error(e.message||"Failed to update warehouse")}})},Nk=()=>{const t=le();return he({mutationFn:async e=>{console.log("Deleting warehouse:",e);const{data:s}=await I.from("warehouses").select("address_id").eq("id",e).single(),{error:r}=await I.from("warehouses").delete().eq("id",e);if(r)throw console.error("Delete warehouse error:",r),new Error(r.message);return s!=null&&s.address_id&&await I.from("addresses").delete().eq("id",s.address_id),e},onSuccess:e=>{console.log("Warehouse deleted successfully:",e),t.invalidateQueries({queryKey:["warehouses"]}),t.invalidateQueries({queryKey:["warehouse-stats"]}),t.invalidateQueries({queryKey:["warehouse-options"]}),G.success("Warehouse deleted successfully")},onError:e=>{console.error("Delete warehouse mutation error:",e),G.error(e.message||"Failed to delete warehouse")}})},kk=({warehouses:t,loading:e=!1,onView:s,onEdit:r,onDelete:i})=>{const a=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),l=o=>o?o.toLocaleString()+" cylinders":"-",c=o=>o?[o.city,o.state].filter(Boolean).join(", ")||"Address incomplete":"No address";return console.log("WarehouseTable render:",{warehouses:t,loading:e}),e?n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-6 w-6 animate-spin text-blue-600"}),n.jsx("span",{className:"text-gray-600",children:"Loading warehouses..."})]})})}):!t||t.length===0?n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"mb-4",children:n.jsx(Or,{className:"h-12 w-12 text-gray-300 mx-auto"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No warehouses found"}),n.jsx("p",{className:"text-gray-500",children:t===null?"Failed to load warehouses. Please check your connection.":"Get started by adding your first warehouse."})]})}):n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Warehouses (",t.length,")"]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Warehouse"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capacity"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(o=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"h-10 w-10 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx(Or,{className:"h-5 w-5 text-blue-600"})})}),n.jsx("div",{children:n.jsx("div",{className:"text-sm font-medium text-gray-900",children:o.name})})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Yt,{className:"h-4 w-4 text-gray-400"}),n.jsx("div",{className:"text-sm text-gray-900",children:c(o.address)})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:l(o.capacity_cylinders)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a(o.created_at)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx("button",{onClick:()=>s(o),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50 transition-colors",title:"View warehouse",children:n.jsx(Ha,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>r(o),className:"text-gray-600 hover:text-gray-900 p-1 rounded hover:bg-gray-50 transition-colors",title:"Edit warehouse",children:n.jsx(Tt,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>i(o),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50 transition-colors",title:"Delete warehouse",children:n.jsx(_n,{className:"h-4 w-4"})})]})})]},o.id))})]})})]})},Sk=({filters:t,onFiltersChange:e})=>{const s=i=>{e({...t,search:i.target.value||void 0,page:1})},r=()=>{e({page:1})};return n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by warehouse name...",value:t.search||"",onChange:s,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),n.jsxs("button",{onClick:r,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-md transition-colors",title:"Reset filters",children:[n.jsx(mn,{className:"h-4 w-4"}),n.jsx("span",{children:"Reset"})]})]})})},Jx=({isOpen:t,onClose:e,onSubmit:s,warehouse:r,loading:i=!1,title:a})=>{var b,w;const[l,c]=N.useState(!1),{register:o,handleSubmit:d,reset:u,watch:h,formState:{errors:m}}=_s({defaultValues:{name:"",capacity_cylinders:void 0,address:{line1:"",line2:"",city:"",state:"",postal_code:"",country:"US",instructions:""}}});N.useEffect(()=>{if(r){const x=!!r.address;c(x),u({name:r.name,capacity_cylinders:r.capacity_cylinders,address:r.address?{line1:r.address.line1,line2:r.address.line2||"",city:r.address.city,state:r.address.state||"",postal_code:r.address.postal_code||"",country:r.address.country,instructions:r.address.instructions||""}:{line1:"",line2:"",city:"",state:"",postal_code:"",country:"US",instructions:""}})}else c(!1),u({name:"",capacity_cylinders:void 0,address:{line1:"",line2:"",city:"",state:"",postal_code:"",country:"US",instructions:""}})},[r,u]);const g=x=>{const p={name:x.name,capacity_cylinders:x.capacity_cylinders};l&&x.address&&x.address.line1&&x.address.city&&(p.address=x.address),s(p)},v=Ox();return t?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:e}),n.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl",children:n.jsxs("form",{onSubmit:d(g),children:[n.jsxs("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:a}),n.jsx("button",{type:"button",onClick:e,className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.jsx(ot,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Warehouse Name *"}),n.jsx("input",{type:"text",id:"name",...o("name",{required:"Warehouse name is required"}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Main Depot"}),m.name&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.name.message})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"capacity_cylinders",className:"block text-sm font-medium text-gray-700",children:"Storage Capacity (cylinders)"}),n.jsx("input",{type:"number",min:"1",id:"capacity_cylinders",...o("capacity_cylinders",{valueAsNumber:!0,min:{value:1,message:"Capacity must be at least 1"}}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"1000"}),m.capacity_cylinders&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.capacity_cylinders.message})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Location"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"include_address",checked:l,onChange:x=>c(x.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"include_address",className:"ml-2 block text-sm text-gray-900",children:"Add physical address"})]})]}),l&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{htmlFor:"address.line1",className:"block text-sm font-medium text-gray-700",children:"Address Line 1 *"}),n.jsx("input",{type:"text",...o("address.line1",{required:l?"Address line 1 is required":!1}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"123 Industrial Way"}),((b=m.address)==null?void 0:b.line1)&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.address.line1.message})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{htmlFor:"address.line2",className:"block text-sm font-medium text-gray-700",children:"Address Line 2"}),n.jsx("input",{type:"text",...o("address.line2"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Building B, Unit 5"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"address.city",className:"block text-sm font-medium text-gray-700",children:"City *"}),n.jsx("input",{type:"text",...o("address.city",{required:l?"City is required":!1}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),((w=m.address)==null?void 0:w.city)&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.address.city.message})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"address.state",className:"block text-sm font-medium text-gray-700",children:"State/Province"}),n.jsx("input",{type:"text",...o("address.state"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"address.postal_code",className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),n.jsx("input",{type:"text",...o("address.postal_code"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"address.country",className:"block text-sm font-medium text-gray-700",children:"Country"}),n.jsx("select",{...o("address.country"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:v.map(x=>n.jsx("option",{value:x.value,children:x.label},x.value))})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{htmlFor:"address.instructions",className:"block text-sm font-medium text-gray-700",children:"Access Instructions"}),n.jsx("textarea",{rows:3,...o("address.instructions"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Gate codes, special access requirements, loading dock information..."})]})]})]})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsx("button",{type:"submit",disabled:i,className:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:i?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Saving..."})]}):"Save Warehouse"}),n.jsx("button",{type:"button",onClick:e,disabled:i,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}):null},Ck=()=>{const{data:t,isLoading:e}=wk();if(e)return n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[...Array(3)].map((r,i)=>n.jsx("div",{className:"h-16 bg-gray-200 rounded"},i))})]})});if(!t)return null;const s=[{name:"Total Warehouses",value:t.total,icon:Or,color:"text-blue-600",bgColor:"bg-blue-50"},{name:"Total Capacity",value:t.total_capacity.toLocaleString()+" cylinders",icon:un,color:"text-green-600",bgColor:"bg-green-50"},{name:"Average Capacity",value:t.average_capacity.toLocaleString()+" cylinders",icon:Ga,color:"text-purple-600",bgColor:"bg-purple-50"}];return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Warehouse Overview"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:s.map(r=>n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full ${r.bgColor} mb-2`,children:n.jsx(r.icon,{className:`h-6 w-6 ${r.color}`})}),n.jsx("div",{className:"text-lg font-bold text-gray-900",children:r.value}),n.jsx("div",{className:"text-sm text-gray-600",children:r.name})]},r.name))})]})},Ek=()=>{const t=bt(),[e,s]=N.useState({page:1}),[r,i]=N.useState(!1),[a,l]=N.useState(null),[c,o]=N.useState(null),{data:d,isLoading:u,error:h,refetch:m}=Hx(e),g=_k(),v=Gx(),b=Nk();N.useEffect(()=>{console.log("WarehousesPage state:",{filters:e,data:d,isLoading:u,error:h,isFormOpen:r,editingWarehouse:a})},[e,d,u,h,r,a]);const w=()=>{console.log("Adding new warehouse"),l(null),i(!0)},x=S=>{console.log("Editing warehouse:",S),l(S),i(!0)},p=S=>{console.log("Viewing warehouse:",S),t(`/warehouses/${S.id}`)},f=S=>{console.log("Deleting warehouse:",S),o(S)},y=async S=>{console.log("Form submit:",S);try{a?await v.mutateAsync({id:a.id,...S}):await g.mutateAsync(S),i(!1),l(null)}catch(C){console.error("Form submit error:",C)}},j=async()=>{if(c){console.log("Confirming delete:",c);try{await b.mutateAsync(c.id),o(null)}catch(S){console.error("Delete error:",S)}}},E=S=>{console.log("Page change:",S),s(C=>({...C,page:S}))},P=()=>{console.log("Refreshing warehouses"),m()};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Warehouses"}),n.jsx("p",{className:"text-gray-600",children:"Manage storage facilities and inventory locations"}),h&&n.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["Error: ",h.message]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("button",{onClick:P,disabled:u,className:"flex items-center space-x-2 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:[n.jsx(wn,{className:`h-4 w-4 ${u?"animate-spin":""}`}),n.jsx("span",{children:"Refresh"})]}),n.jsxs("button",{onClick:w,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(xt,{className:"h-4 w-4"}),n.jsx("span",{children:"Add Warehouse"})]})]})]}),n.jsx(Ck,{}),n.jsx(Sk,{filters:e,onFiltersChange:s}),n.jsx(kk,{warehouses:(d==null?void 0:d.warehouses)||[],loading:u,onView:p,onEdit:x,onDelete:f}),d&&d.totalPages>1&&n.jsx(Pi,{currentPage:d.currentPage,totalPages:d.totalPages,totalCount:d.totalCount,onPageChange:E}),n.jsx(Jx,{isOpen:r,onClose:()=>{console.log("Closing form"),i(!1),l(null)},onSubmit:y,warehouse:a||void 0,loading:g.isPending||v.isPending,title:a?"Edit Warehouse":"Add New Warehouse"}),n.jsx(Oi,{isOpen:!!c,onClose:()=>o(null),onConfirm:j,title:"Delete Warehouse",message:`Are you sure you want to delete "${c==null?void 0:c.name}"? This action cannot be undone.`,confirmText:"Delete",type:"danger",loading:b.isPending})]})},Pk=50,Yx=(t={})=>De({queryKey:["inventory",t],queryFn:async()=>{console.log("Fetching inventory with filters:",t);let e=I.from("inventory_balance").select(`
          *,
          warehouse:warehouses!inventory_balance_warehouse_id_fkey(id, name),
          product:products!inventory_balance_product_id_fkey(id, sku, name, unit_of_measure)
        `,{count:"exact"}).order("updated_at",{ascending:!1});t.warehouse_id&&(e=e.eq("warehouse_id",t.warehouse_id)),t.search&&(e=e.or(`product.sku.ilike.%${t.search}%,product.name.ilike.%${t.search}%`)),t.low_stock_only;const s=t.page||1,r=t.limit||Pk,i=(s-1)*r,a=i+r-1;e=e.range(i,a);const{data:l,error:c,count:o}=await e;if(console.log("Supabase inventory response:",{data:l,error:c,count:o}),c)throw console.error("Supabase inventory error:",c),new Error(c.message);let d=l||[];return t.low_stock_only&&(d=d.filter(u=>u.qty_full-u.qty_reserved<=10)),{inventory:d,totalCount:o||0,totalPages:Math.ceil((o||0)/r),currentPage:s}},retry:1,staleTime:3e4}),Ok=()=>De({queryKey:["inventory-stats"],queryFn:async()=>{console.log("Fetching inventory statistics");const{data:t,error:e}=await I.from("inventory_balance").select("qty_full, qty_empty, qty_reserved");if(e)throw console.error("Inventory stats error:",e),new Error(e.message);const s={total_cylinders:t.reduce((r,i)=>r+i.qty_full+i.qty_empty,0),total_full:t.reduce((r,i)=>r+i.qty_full,0),total_empty:t.reduce((r,i)=>r+i.qty_empty,0),total_reserved:t.reduce((r,i)=>r+i.qty_reserved,0),total_available:t.reduce((r,i)=>r+(i.qty_full-i.qty_reserved),0),low_stock_products:t.filter(r=>r.qty_full-r.qty_reserved<=10).length};return console.log("Inventory stats:",s),s},staleTime:6e4}),Tk=t=>De({queryKey:["warehouse-inventory",t],queryFn:async()=>{if(console.log("Fetching warehouse inventory:",t),!t||t==="null"||t==="undefined")return[];const{data:e,error:s}=await I.from("inventory_balance").select(`
          *,
          product:products!inventory_balance_product_id_fkey(id, sku, name, unit_of_measure)
        `).eq("warehouse_id",t).order("updated_at",{ascending:!1});if(s)throw console.error("Warehouse inventory error:",s),new Error(s.message);return e||[]},enabled:!!t&&t!=="null"&&t!=="undefined",staleTime:3e4}),Xx=()=>{const t=le();return he({mutationFn:async e=>{if(console.log("Adjusting stock:",e),!e.inventory_id||e.inventory_id==="null"||e.inventory_id==="undefined")throw new Error("Invalid inventory ID");const{data:s,error:r}=await I.from("inventory_balance").select("*").eq("id",e.inventory_id).single();if(r)throw new Error(r.message);const i=s.qty_full+e.qty_full_change,a=s.qty_empty+e.qty_empty_change;if(i<0||a<0)throw new Error("Stock quantities cannot be negative");const{data:l,error:c}=await I.from("inventory_balance").update({qty_full:i,qty_empty:a,updated_at:new Date().toISOString()}).eq("id",e.inventory_id).select(`
          *,
          warehouse:warehouses!inventory_balance_warehouse_id_fkey(id, name),
          product:products!inventory_balance_product_id_fkey(id, sku, name, unit_of_measure)
        `).single();if(c)throw new Error(c.message);return l},onSuccess:e=>{t.invalidateQueries({queryKey:["inventory"]}),t.invalidateQueries({queryKey:["inventory-stats"]}),t.invalidateQueries({queryKey:["warehouse-inventory",e.warehouse_id]}),t.invalidateQueries({queryKey:["product-inventory",e.product_id]}),G.success("Stock adjusted successfully")},onError:e=>{G.error(e.message||"Failed to adjust stock")}})},Zx=()=>{const t=le();return he({mutationFn:async e=>{if(console.log("Transferring stock:",e),!e.from_warehouse_id||e.from_warehouse_id==="null"||e.from_warehouse_id==="undefined")throw new Error("Invalid source warehouse ID");if(!e.to_warehouse_id||e.to_warehouse_id==="null"||e.to_warehouse_id==="undefined")throw new Error("Invalid destination warehouse ID");if(!e.product_id||e.product_id==="null"||e.product_id==="undefined")throw new Error("Invalid product ID");const{data:s,error:r}=await I.from("inventory_balance").select("*").eq("warehouse_id",e.from_warehouse_id).eq("product_id",e.product_id).single();if(r)throw new Error("Source inventory not found");if(e.qty_full>s.qty_full)throw new Error("Cannot transfer more full cylinders than available");if(e.qty_empty>s.qty_empty)throw new Error("Cannot transfer more empty cylinders than available");let{data:i,error:a}=await I.from("inventory_balance").select("*").eq("warehouse_id",e.to_warehouse_id).eq("product_id",e.product_id).single();if(a&&a.code==="PGRST116"){const{data:c,error:o}=await I.from("inventory_balance").insert([{warehouse_id:e.to_warehouse_id,product_id:e.product_id,qty_full:0,qty_empty:0,qty_reserved:0,updated_at:new Date().toISOString()}]).select().single();if(o)throw new Error(o.message);i=c}else if(a)throw new Error(a.message);const{error:l}=await I.rpc("transfer_stock",{p_from_warehouse_id:e.from_warehouse_id,p_to_warehouse_id:e.to_warehouse_id,p_product_id:e.product_id,p_qty_full:e.qty_full,p_qty_empty:e.qty_empty});return l&&(await I.from("inventory_balance").update({qty_full:s.qty_full-e.qty_full,qty_empty:s.qty_empty-e.qty_empty,updated_at:new Date().toISOString()}).eq("id",s.id),await I.from("inventory_balance").update({qty_full:i.qty_full+e.qty_full,qty_empty:i.qty_empty+e.qty_empty,updated_at:new Date().toISOString()}).eq("id",i.id)),{success:!0}},onSuccess:()=>{t.invalidateQueries({queryKey:["inventory"]}),t.invalidateQueries({queryKey:["inventory-stats"]}),t.invalidateQueries({queryKey:["warehouse-inventory"]}),t.invalidateQueries({queryKey:["product-inventory"]}),G.success("Stock transferred successfully")},onError:e=>{G.error(e.message||"Failed to transfer stock")}})},Ak=()=>{const t=le();return he({mutationFn:async e=>{if(console.log("Creating inventory balance:",e),!e.warehouse_id||e.warehouse_id==="null"||e.warehouse_id==="undefined")throw new Error("Invalid warehouse ID");if(!e.product_id||e.product_id==="null"||e.product_id==="undefined")throw new Error("Invalid product ID");const{data:s,error:r}=await I.from("inventory_balance").insert([{...e,updated_at:new Date().toISOString()}]).select(`
          *,
          warehouse:warehouses!inventory_balance_warehouse_id_fkey(id, name),
          product:products!inventory_balance_product_id_fkey(id, sku, name, unit_of_measure)
        `).single();if(r)throw new Error(r.message);return s},onSuccess:e=>{t.invalidateQueries({queryKey:["inventory"]}),t.invalidateQueries({queryKey:["inventory-stats"]}),t.invalidateQueries({queryKey:["warehouse-inventory",e.warehouse_id]}),t.invalidateQueries({queryKey:["product-inventory",e.product_id]}),G.success("Inventory record created successfully")},onError:e=>{G.error(e.message||"Failed to create inventory record")}})},ey=({isOpen:t,onClose:e,onSubmit:s,inventory:r,loading:i=!1})=>{var b,w;const{register:a,handleSubmit:l,reset:c,watch:o,formState:{errors:d}}=_s({defaultValues:{inventory_id:r.id,adjustment_type:"physical_count",qty_full_change:0,qty_empty_change:0,reason:""}}),u=o("qty_full_change")||0,h=o("qty_empty_change")||0;N.useEffect(()=>{r&&c({inventory_id:r.id,adjustment_type:"physical_count",qty_full_change:0,qty_empty_change:0,reason:""})},[r,c]);const m=x=>{s(x)},g=r.qty_full+u,v=r.qty_empty+h;return t?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:e}),n.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:n.jsxs("form",{onSubmit:l(m),children:[n.jsxs("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:"Adjust Stock"}),n.jsx("button",{type:"button",onClick:e,className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.jsx(ot,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Current Stock Levels"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.qty_full}),n.jsx("div",{className:"text-sm text-gray-600",children:"Full Cylinders"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-600",children:r.qty_empty}),n.jsx("div",{className:"text-sm text-gray-600",children:"Empty Cylinders"})]})]}),n.jsxs("div",{className:"mt-3 text-center",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Product: ",n.jsx("span",{className:"font-medium",children:(b=r.product)==null?void 0:b.name})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Warehouse: ",n.jsx("span",{className:"font-medium",children:(w=r.warehouse)==null?void 0:w.name})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"adjustment_type",className:"block text-sm font-medium text-gray-700",children:"Adjustment Type *"}),n.jsxs("select",{id:"adjustment_type",...a("adjustment_type",{required:"Adjustment type is required"}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[n.jsx("option",{value:"received_full",children:"Received Full Cylinders"}),n.jsx("option",{value:"received_empty",children:"Received Empty Cylinders"}),n.jsx("option",{value:"physical_count",children:"Physical Count Adjustment"}),n.jsx("option",{value:"damage_loss",children:"Damage/Loss"}),n.jsx("option",{value:"other",children:"Other"})]}),d.adjustment_type&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.adjustment_type.message})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"qty_full_change",className:"block text-sm font-medium text-gray-700",children:"Full Cylinders Change"}),n.jsx("input",{type:"number",id:"qty_full_change",...a("qty_full_change",{valueAsNumber:!0,validate:x=>r.qty_full+(x||0)<0?"Cannot result in negative quantity":!0}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"0"}),d.qty_full_change&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.qty_full_change.message})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"qty_empty_change",className:"block text-sm font-medium text-gray-700",children:"Empty Cylinders Change"}),n.jsx("input",{type:"number",id:"qty_empty_change",...a("qty_empty_change",{valueAsNumber:!0,validate:x=>r.qty_empty+(x||0)<0?"Cannot result in negative quantity":!0}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"0"}),d.qty_empty_change&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.qty_empty_change.message})]})]}),(u!==0||h!==0)&&n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-3",children:"Resulting Stock Levels"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx("span",{className:"text-2xl font-bold text-blue-600",children:g}),u>0&&n.jsx(fn,{className:"h-4 w-4 text-green-600"}),u<0&&n.jsx(Tf,{className:"h-4 w-4 text-red-600"})]}),n.jsx("div",{className:"text-sm text-gray-600",children:"Full Cylinders"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx("span",{className:"text-2xl font-bold text-blue-600",children:v}),h>0&&n.jsx(fn,{className:"h-4 w-4 text-green-600"}),h<0&&n.jsx(Tf,{className:"h-4 w-4 text-red-600"})]}),n.jsx("div",{className:"text-sm text-gray-600",children:"Empty Cylinders"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700",children:"Reason/Notes *"}),n.jsx("textarea",{id:"reason",rows:3,...a("reason",{required:"Reason is required"}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Explain the reason for this stock adjustment..."}),d.reason&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.reason.message})]})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsx("button",{type:"submit",disabled:i,className:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:i?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Adjusting..."})]}):"Adjust Stock"}),n.jsx("button",{type:"button",onClick:e,disabled:i,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}):null},ty=({value:t,onChange:e,placeholder:s="Select warehouse...",className:r="",required:i=!1})=>{const{data:a,isLoading:l}=jk();return l?n.jsx("div",{className:`relative ${r}`,children:n.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-md bg-gray-50",children:[n.jsx(Or,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-gray-500",children:"Loading warehouses..."})]})}):n.jsx("div",{className:`relative ${r}`,children:n.jsxs("div",{className:"relative",children:[n.jsx(Or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsxs("select",{value:t||"",onChange:c=>e(c.target.value),required:i,className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white",children:[n.jsx("option",{value:"",children:s}),a==null?void 0:a.map(c=>n.jsx("option",{value:c.id,children:c.city&&c.state?`${c.name} (${c.city}, ${c.state})`:c.name},c.id))]}),n.jsx(Nh,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})})},sy=({isOpen:t,onClose:e,onSubmit:s,inventory:r,loading:i=!1})=>{var w,x,p;const{register:a,handleSubmit:l,reset:c,watch:o,setValue:d,formState:{errors:u}}=_s({defaultValues:{from_warehouse_id:r.warehouse_id,to_warehouse_id:"",product_id:r.product_id,qty_full:0,qty_empty:0,notes:""}}),h=o("qty_full")||0,m=o("qty_empty")||0,g=o("to_warehouse_id");N.useEffect(()=>{r&&c({from_warehouse_id:r.warehouse_id,to_warehouse_id:"",product_id:r.product_id,qty_full:0,qty_empty:0,notes:""})},[r,c]);const v=f=>{s(f)},b=f=>{d("to_warehouse_id",f)};return t?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:e}),n.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl",children:n.jsxs("form",{onSubmit:l(v),children:[n.jsxs("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:"Transfer Stock"}),n.jsx("button",{type:"button",onClick:e,className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.jsx(ot,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Product Information"}),n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Product:"})," ",(w=r.product)==null?void 0:w.name]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"SKU:"})," ",(x=r.product)==null?void 0:x.sku]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"From Warehouse"}),n.jsx("div",{className:"text-sm text-blue-800 font-medium",children:(p=r.warehouse)==null?void 0:p.name}),n.jsxs("div",{className:"mt-2 space-y-1 text-xs text-blue-700",children:[n.jsxs("div",{children:["Full: ",r.qty_full]}),n.jsxs("div",{children:["Empty: ",r.qty_empty]})]})]}),n.jsx("div",{className:"flex justify-center",children:n.jsx(A1,{className:"h-6 w-6 text-gray-400"})}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-green-900 mb-2",children:"To Warehouse"}),n.jsx(ty,{value:g,onChange:b,placeholder:"Select destination...",className:"w-full",required:!0}),u.to_warehouse_id&&n.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Destination warehouse is required"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Transfer Quantities"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"qty_full",className:"block text-sm font-medium text-gray-700",children:"Full Cylinders"}),n.jsx("input",{type:"number",min:"0",max:r.qty_full,id:"qty_full",...a("qty_full",{valueAsNumber:!0,min:{value:0,message:"Quantity must be positive"},max:{value:r.qty_full,message:`Cannot exceed available quantity (${r.qty_full})`}}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"0"}),n.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Available: ",r.qty_full]}),u.qty_full&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.qty_full.message})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"qty_empty",className:"block text-sm font-medium text-gray-700",children:"Empty Cylinders"}),n.jsx("input",{type:"number",min:"0",max:r.qty_empty,id:"qty_empty",...a("qty_empty",{valueAsNumber:!0,min:{value:0,message:"Quantity must be positive"},max:{value:r.qty_empty,message:`Cannot exceed available quantity (${r.qty_empty})`}}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"0"}),n.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Available: ",r.qty_empty]}),u.qty_empty&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.qty_empty.message})]})]}),(h>0||m>0)&&n.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:n.jsxs("div",{className:"text-sm text-yellow-800",children:[n.jsx("strong",{children:"Transfer Summary:"})," ",h," full + ",m," empty cylinders"]})})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"Transfer Notes"}),n.jsx("textarea",{id:"notes",rows:3,...a("notes"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Optional notes about this transfer..."})]})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsx("button",{type:"submit",disabled:i||!g||h===0&&m===0,className:"inline-flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:i?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Transferring..."})]}):"Transfer Stock"}),n.jsx("button",{type:"button",onClick:e,disabled:i,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}):null},Rk=()=>{const{id:t}=Ba(),e=bt(),[s,r]=N.useState(!1),[i,a]=N.useState(null),[l,c]=N.useState(null),{data:o,isLoading:d,error:u}=bk(t),{data:h=[],isLoading:m}=Tk(t),g=Gx(),v=Xx(),b=Zx(),w=async C=>{if(o)try{await g.mutateAsync({id:o.id,...C}),r(!1)}catch{}},x=C=>{a(C)},p=C=>{c(C)},f=async C=>{try{await v.mutateAsync(C),a(null)}catch{}},y=async C=>{try{await b.mutateAsync(C),c(null)}catch{}},j=C=>new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=C=>C?C.toLocaleString()+" cylinders":"Not specified",P=C=>C===0?"text-red-600 bg-red-50":C<=10?"text-yellow-600 bg-yellow-50":"text-green-600 bg-green-50",S=C=>C===0?n.jsx(Ve,{className:"h-4 w-4"}):C<=10?n.jsx(Ve,{className:"h-4 w-4"}):null;return d?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/warehouses"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Warehouses"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})]})})]}):u||!o?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/warehouses"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Warehouses"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-red-600",children:"Warehouse not found or error loading warehouse details."})})})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>e("/warehouses"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Warehouses"})]}),n.jsx("div",{className:"text-gray-400",children:"/"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o.name})]}),n.jsxs("button",{onClick:()=>r(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(Tt,{className:"h-4 w-4"}),n.jsx("span",{children:"Edit Warehouse"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Warehouse Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Warehouse Name"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Or,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-gray-900",children:o.name})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Storage Capacity"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ye,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-gray-900",children:E(o.capacity_cylinders)})]})]})]})]}),o.address&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Location"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Physical Address"}),n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(Yt,{className:"h-4 w-4 text-gray-400 mt-0.5"}),n.jsxs("div",{className:"text-gray-900",children:[n.jsx("div",{children:o.address.line1}),o.address.line2&&n.jsx("div",{children:o.address.line2}),n.jsxs("div",{children:[o.address.city,o.address.state&&`, ${o.address.state}`,o.address.postal_code&&` ${o.address.postal_code}`]}),n.jsx("div",{children:o.address.country})]})]})]}),o.address.instructions&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Access Instructions"}),n.jsx("p",{className:"text-gray-900",children:o.address.instructions})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Current Inventory"}),n.jsxs("button",{onClick:()=>e("/inventory"),className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 text-sm",children:[n.jsx(xt,{className:"h-4 w-4"}),n.jsx("span",{children:"Manage Inventory"})]})]}),m?n.jsx("div",{className:"animate-pulse",children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"h-12 bg-gray-200 rounded"}),n.jsx("div",{className:"h-12 bg-gray-200 rounded"}),n.jsx("div",{className:"h-12 bg-gray-200 rounded"})]})}):h.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Full"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Empty"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reserved"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(C=>{var F,M;const T=C.qty_full-C.qty_reserved,R=P(T),D=S(T);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:((F=C.product)==null?void 0:F.name)||"Unknown Product"}),n.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",((M=C.product)==null?void 0:M.sku)||"N/A"]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:C.qty_full})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:C.qty_empty})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:C.qty_reserved})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsxs("div",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-sm font-medium ${R}`,children:[D,n.jsx("span",{children:T})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx("button",{onClick:()=>x(C),className:"text-blue-600 hover:text-blue-900 text-xs px-2 py-1 rounded hover:bg-blue-50 transition-colors",title:"Adjust stock",children:"Adjust"}),n.jsx("button",{onClick:()=>p(C),className:"text-green-600 hover:text-green-900 text-xs px-2 py-1 rounded hover:bg-green-50 transition-colors",title:"Transfer stock",children:"Transfer"})]})})]},C.id)})})]})}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ye,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No inventory found"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"This warehouse doesn't have any inventory records yet."}),n.jsxs("button",{onClick:()=>e("/inventory"),className:"inline-flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(xt,{className:"h-4 w-4"}),n.jsx("span",{children:"Add Inventory"})]})]})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Details"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Created"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ee,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:j(o.created_at)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Total Products"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ye,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{className:"text-sm text-gray-900",children:[h.length," product",h.length!==1?"s":""]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Total Cylinders"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ye,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{className:"text-sm text-gray-900",children:[h.reduce((C,T)=>C+T.qty_full+T.qty_empty,0)," cylinders"]})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Inventory Summary"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Full Cylinders:"}),n.jsx("span",{className:"text-sm font-medium text-green-600",children:h.reduce((C,T)=>C+T.qty_full,0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Empty Cylinders:"}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:h.reduce((C,T)=>C+T.qty_empty,0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Reserved:"}),n.jsx("span",{className:"text-sm font-medium text-orange-600",children:h.reduce((C,T)=>C+T.qty_reserved,0)})]}),n.jsxs("div",{className:"flex justify-between border-t pt-3",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Available:"}),n.jsx("span",{className:"text-sm font-bold text-blue-600",children:h.reduce((C,T)=>C+(T.qty_full-T.qty_reserved),0)})]})]})]})]})]}),n.jsx(Jx,{isOpen:s,onClose:()=>r(!1),onSubmit:w,warehouse:o,loading:g.isPending,title:"Edit Warehouse"}),i&&n.jsx(ey,{isOpen:!!i,onClose:()=>a(null),onSubmit:f,inventory:i,loading:v.isPending}),l&&n.jsx(sy,{isOpen:!!l,onClose:()=>c(null),onSubmit:y,inventory:l,loading:b.isPending})]})},Dk=({inventory:t,loading:e=!1,onAdjustStock:s,onTransferStock:r})=>{const i=c=>new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),a=c=>c===0?"text-red-600 bg-red-50":c<=10?"text-yellow-600 bg-yellow-50":"text-green-600 bg-green-50",l=c=>c===0?n.jsx(Ve,{className:"h-4 w-4"}):c<=10?n.jsx(Ve,{className:"h-4 w-4"}):null;return e?n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-6 w-6 animate-spin text-blue-600"}),n.jsx("span",{className:"text-gray-600",children:"Loading inventory..."})]})})}):!t||t.length===0?n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"mb-4",children:n.jsx(ye,{className:"h-12 w-12 text-gray-300 mx-auto"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No inventory found"}),n.jsx("p",{className:"text-gray-500",children:"No inventory records found for the selected filters."})]})}):n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Inventory (",t.length,")"]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Warehouse"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Full"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Empty"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reserved"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(c=>{var h,m,g;const o=c.qty_full-c.qty_reserved,d=a(o),u=l(o);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:((h=c.product)==null?void 0:h.name)||"Unknown Product"}),n.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",((m=c.product)==null?void 0:m.sku)||"N/A"]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm text-gray-900",children:((g=c.warehouse)==null?void 0:g.name)||"Unknown Warehouse"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:c.qty_full})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:c.qty_empty})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:c.qty_reserved})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsxs("div",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-sm font-medium ${d}`,children:[u,n.jsx("span",{children:o})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i(c.updated_at)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx("button",{onClick:()=>s(c),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50 transition-colors",title:"Adjust stock",children:n.jsx(Tt,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>r(c),className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50 transition-colors",title:"Transfer stock",children:n.jsx(T1,{className:"h-4 w-4"})})]})})]},c.id)})})]})})]})},Ik=({filters:t,onFiltersChange:e})=>{const s=l=>{e({...t,search:l.target.value||void 0,page:1})},r=l=>{e({...t,warehouse_id:l||void 0,page:1})},i=()=>{e({...t,low_stock_only:!t.low_stock_only,page:1})},a=()=>{e({page:1})};return n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by product SKU or name...",value:t.search||"",onChange:s,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"sm:w-64",children:n.jsx(ty,{value:t.warehouse_id,onChange:r,placeholder:"All Warehouses"})}),n.jsxs("button",{onClick:i,className:`flex items-center space-x-2 px-3 py-2 rounded-md transition-colors ${t.low_stock_only?"bg-red-100 text-red-800 border border-red-200":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"}`,children:[n.jsx(Ve,{className:"h-4 w-4"}),n.jsx("span",{children:"Low Stock Only"})]}),n.jsxs("button",{onClick:a,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-md transition-colors",title:"Reset filters",children:[n.jsx(mn,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Reset"})]})]})]})})},Fk=()=>{const{data:t,isLoading:e}=Ok();if(e)return n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-4",children:[...Array(6)].map((r,i)=>n.jsx("div",{className:"h-16 bg-gray-200 rounded"},i))})]})});if(!t)return null;const s=[{name:"Total Cylinders",value:t.total_cylinders.toLocaleString(),icon:ye,color:"text-blue-600",bgColor:"bg-blue-50"},{name:"Full Cylinders",value:t.total_full.toLocaleString(),icon:hn,color:"text-green-600",bgColor:"bg-green-50"},{name:"Empty Cylinders",value:t.total_empty.toLocaleString(),icon:I1,color:"text-gray-600",bgColor:"bg-gray-50"},{name:"Reserved",value:t.total_reserved.toLocaleString(),icon:M1,color:"text-orange-600",bgColor:"bg-orange-50"},{name:"Available",value:t.total_available.toLocaleString(),icon:fn,color:"text-purple-600",bgColor:"bg-purple-50"},{name:"Low Stock Items",value:t.low_stock_products.toLocaleString(),icon:Ve,color:"text-red-600",bgColor:"bg-red-50"}];return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Inventory Overview"}),n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-4",children:s.map(r=>n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full ${r.bgColor} mb-2`,children:n.jsx(r.icon,{className:`h-6 w-6 ${r.color}`})}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.value}),n.jsx("div",{className:"text-sm text-gray-600",children:r.name})]},r.name))})]})},$k=()=>{const[t,e]=N.useState({page:1}),[s,r]=N.useState(null),[i,a]=N.useState(null),[l,c]=N.useState(!1),{data:o,isLoading:d,error:u,refetch:h}=Yx(t),{data:m}=Ya({limit:1e3}),{data:g}=Hx({limit:1e3}),v=Xx(),b=Zx(),w=Ak(),x=(m==null?void 0:m.products)||[],p=(g==null?void 0:g.warehouses)||[];N.useEffect(()=>{console.log("InventoryPage state:",{filters:t,data:o,isLoading:d,error:u,adjustingInventory:s,transferringInventory:i})},[t,o,d,u,s,i]);const f=R=>{console.log("Adjusting stock for:",R),r(R)},y=R=>{console.log("Transferring stock for:",R),a(R)},j=()=>{console.log("Adding new stock"),c(!0)},E=async R=>{console.log("Adjustment submit:",R);try{await v.mutateAsync(R),r(null)}catch(D){console.error("Adjustment error:",D)}},P=async R=>{console.log("Transfer submit:",R);try{await b.mutateAsync(R),a(null)}catch(D){console.error("Transfer error:",D)}},S=async R=>{console.log("Add stock submit:",R);try{await w.mutateAsync(R),c(!1)}catch(D){console.error("Add stock error:",D)}},C=R=>{console.log("Page change:",R),e(D=>({...D,page:R}))},T=()=>{console.log("Refreshing inventory"),h()};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventory Management"}),n.jsx("p",{className:"text-gray-600",children:"Track stock levels across all warehouses"}),u&&n.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["Error: ",u.message]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("button",{onClick:T,disabled:d,className:"flex items-center space-x-2 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:[n.jsx(wn,{className:`h-4 w-4 ${d?"animate-spin":""}`}),n.jsx("span",{children:"Refresh"})]}),n.jsxs("button",{onClick:j,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",title:"Add new inventory record",children:[n.jsx(xt,{className:"h-4 w-4"}),n.jsx("span",{children:"Add Stock"})]})]})]}),n.jsx(Fk,{}),n.jsx(Ik,{filters:t,onFiltersChange:e}),n.jsx(Dk,{inventory:(o==null?void 0:o.inventory)||[],loading:d,onAdjustStock:f,onTransferStock:y}),o&&o.totalPages>1&&n.jsx(Pi,{currentPage:o.currentPage,totalPages:o.totalPages,totalCount:o.totalCount,onPageChange:C}),s&&n.jsx(ey,{isOpen:!!s,onClose:()=>r(null),onSubmit:E,inventory:s,loading:v.isPending}),i&&n.jsx(sy,{isOpen:!!i,onClose:()=>a(null),onSubmit:P,inventory:i,loading:b.isPending}),l&&n.jsx(Lk,{isOpen:l,onClose:()=>c(!1),onSubmit:S,products:x,warehouses:p,loading:w.isPending})]})},Lk=({isOpen:t,onClose:e,onSubmit:s,products:r,warehouses:i,loading:a=!1})=>{const[l,c]=N.useState({warehouse_id:"",product_id:"",qty_full:0,qty_empty:0,qty_reserved:0}),o=u=>{u.preventDefault(),l.warehouse_id&&l.product_id&&s(l)},d=(u,h)=>{c(m=>({...m,[u]:h}))};return t?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:e}),n.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:n.jsxs("form",{onSubmit:o,children:[n.jsxs("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:"Add New Stock Record"}),n.jsx("button",{type:"button",onClick:e,className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.jsx(xt,{className:"h-6 w-6 rotate-45"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse *"}),n.jsxs("select",{value:l.warehouse_id,onChange:u=>d("warehouse_id",u.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0,children:[n.jsx("option",{value:"",children:"Select a warehouse..."}),i.map(u=>n.jsx("option",{value:u.id,children:u.name},u.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),n.jsxs("select",{value:l.product_id,onChange:u=>d("product_id",u.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0,children:[n.jsx("option",{value:"",children:"Select a product..."}),r.filter(u=>u.status==="active").map(u=>n.jsxs("option",{value:u.id,children:[u.name," (",u.sku,")"]},u.id))]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Cylinders"}),n.jsx("input",{type:"number",min:"0",value:l.qty_full||"",onChange:u=>d("qty_full",parseInt(u.target.value)||0),className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Empty Cylinders"}),n.jsx("input",{type:"number",min:"0",value:l.qty_empty||"",onChange:u=>d("qty_empty",parseInt(u.target.value)||0),className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"0"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reserved Cylinders"}),n.jsx("input",{type:"number",min:"0",max:l.qty_full,value:l.qty_reserved||"",onChange:u=>d("qty_reserved",parseInt(u.target.value)||0),className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"0"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Cannot exceed full cylinders quantity"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsx("button",{type:"submit",disabled:a||!l.warehouse_id||!l.product_id,className:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Adding...":"Add Stock Record"}),n.jsx("button",{type:"button",onClick:e,disabled:a,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}):null},qk=({priceLists:t,loading:e=!1,onView:s,onEdit:r,onDuplicate:i,onSetDefault:a,onDelete:l})=>{const c=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e?n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-6 w-6 animate-spin text-blue-600"}),n.jsx("span",{className:"text-gray-600",children:"Loading price lists..."})]})})}):!t||t.length===0?n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"mb-4",children:n.jsx(zs,{className:"h-12 w-12 text-gray-300 mx-auto"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No price lists found"}),n.jsx("p",{className:"text-gray-500",children:"Get started by creating your first price list."})]})}):n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Price Lists (",t.length,")"]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price List"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currency"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Range"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Products"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(o=>{const d=ko(o.start_date,o.end_date),u=pk(o.end_date);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>s(o),className:"text-sm font-medium text-blue-600 hover:text-blue-900 hover:underline",children:o.name}),o.is_default&&n.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:[n.jsx(wo,{className:"h-3 w-3 mr-1"}),"Default"]}),u&&n.jsx(Ve,{className:"h-4 w-4 text-yellow-500",title:"Expiring soon"})]}),o.description&&n.jsx("div",{className:"text-sm text-gray-500 mt-1 max-w-xs truncate",children:o.description})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm text-gray-900 font-mono",children:o.currency_code})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ee,{className:"h-4 w-4 text-gray-400"}),n.jsx("div",{className:"text-sm text-gray-900",children:Qx(o.start_date,o.end_date)})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${d.color}`,children:d.label})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:o.product_count||0})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c(o.created_at)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx("button",{onClick:()=>r(o),className:"text-gray-600 hover:text-gray-900 p-1 rounded hover:bg-gray-50 transition-colors",title:"Edit price list",children:n.jsx(Tt,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>i(o),className:"text-purple-600 hover:text-purple-900 p-1 rounded hover:bg-purple-50 transition-colors",title:"Duplicate price list",children:n.jsx(F1,{className:"h-4 w-4"})}),!o.is_default&&n.jsx("button",{onClick:()=>a(o),className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50 transition-colors",title:"Set as default",children:n.jsx(wo,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>l(o),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50 transition-colors",title:"Delete price list",children:n.jsx(_n,{className:"h-4 w-4"})})]})})]},o.id)})})]})})]})},Uk=({filters:t,onFiltersChange:e})=>{const s=a=>{e({...t,search:a.target.value||void 0,page:1})},r=a=>{e({...t,status:a.target.value||void 0,page:1})},i=()=>{e({page:1})};return n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by name or description...",value:t.search||"",onChange:s,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"sm:w-32",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsxs("select",{value:t.status||"",onChange:r,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"future",children:"Future"}),n.jsx("option",{value:"expired",children:"Expired"})]})]})}),n.jsxs("button",{onClick:i,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-md transition-colors",title:"Reset filters",children:[n.jsx(mn,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Reset"})]})]})]})})},ry=({isOpen:t,onClose:e,onSubmit:s,priceList:r,loading:i=!1,title:a})=>{const{register:l,handleSubmit:c,reset:o,watch:d,formState:{errors:u}}=_s({defaultValues:{name:"",description:"",currency_code:"KES",start_date:new Date().toISOString().split("T")[0],end_date:"",is_default:!1}}),h=d("start_date"),m=d("end_date"),g=d("is_default");N.useEffect(()=>{o(r?{name:r.name,description:r.description||"",currency_code:"KES",start_date:r.start_date,end_date:r.end_date||"",is_default:r.is_default}:{name:"",description:"",currency_code:"KES",start_date:new Date().toISOString().split("T")[0],end_date:"",is_default:!1})},[r,o]);const v=w=>{const x={...w,currency_code:"KES",end_date:w.end_date||void 0,description:w.description||void 0};s(x)},b=!m||fk(h,m);return t?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:e}),n.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:n.jsxs("form",{onSubmit:c(v),children:[n.jsxs("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:a}),n.jsx("button",{type:"button",onClick:e,className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.jsx(ot,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Price List Name *"}),n.jsx("input",{type:"text",id:"name",...l("name",{required:"Price list name is required"}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Standard 2025"}),u.name&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.name.message})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),n.jsx("textarea",{id:"description",rows:3,...l("description"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Optional description of this price list..."})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"currency_code",className:"block text-sm font-medium text-gray-700",children:"Currency"}),n.jsx("div",{className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm bg-gray-50",children:n.jsx("span",{className:"text-gray-900",children:"KES - Kenyan Shilling (KSh)"})}),n.jsx("input",{type:"hidden",...l("currency_code"),value:"KES"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"start_date",className:"block text-sm font-medium text-gray-700",children:"Start Date *"}),n.jsx("input",{type:"date",id:"start_date",...l("start_date",{required:"Start date is required"}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),u.start_date&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.start_date.message})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"end_date",className:"block text-sm font-medium text-gray-700",children:"End Date"}),n.jsx("input",{type:"date",id:"end_date",...l("end_date"),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Leave empty for no end date"})]})]}),!b&&n.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ve,{className:"h-4 w-4 text-red-600"}),n.jsx("span",{className:"text-sm text-red-800",children:"End date must be after start date"})]})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"is_default",...l("is_default"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"is_default",className:"ml-2 block text-sm text-gray-900",children:"Set as default price list"})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Only one price list can be set as default at a time"}),g&&n.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:n.jsx("p",{className:"text-xs text-yellow-800",children:"Setting this as default will unset any existing default price list"})})]})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsx("button",{type:"submit",disabled:i||!b,className:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:i?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Saving..."})]}):"Save Price List"}),n.jsx("button",{type:"button",onClick:e,disabled:i,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}):null},Mk=()=>{const{data:t,isLoading:e}=ik();if(e)return n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-4",children:[...Array(6)].map((r,i)=>n.jsx("div",{className:"h-16 bg-gray-200 rounded"},i))})]})});if(!t)return null;const s=[{name:"Total Price Lists",value:t.total_price_lists,icon:zs,color:"text-blue-600",bgColor:"bg-blue-50"},{name:"Active",value:t.active_price_lists,icon:hn,color:"text-green-600",bgColor:"bg-green-50"},{name:"Future",value:t.future_price_lists,icon:Cr,color:"text-blue-600",bgColor:"bg-blue-50"},{name:"Expired",value:t.expired_price_lists,icon:sc,color:"text-red-600",bgColor:"bg-red-50"},{name:"Expiring Soon",value:t.expiring_soon,icon:Ve,color:"text-yellow-600",bgColor:"bg-yellow-50"},{name:"No Pricing",value:t.products_without_pricing,icon:ye,color:"text-gray-600",bgColor:"bg-gray-50"}];return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pricing Overview"}),n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-4",children:s.map(r=>n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full ${r.bgColor} mb-2`,children:n.jsx(r.icon,{className:`h-6 w-6 ${r.color}`})}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.value}),n.jsx("div",{className:"text-sm text-gray-600",children:r.name})]},r.name))})]})},zk=()=>{const t=bt(),[e,s]=N.useState({page:1}),[r,i]=N.useState(!1),[a,l]=N.useState(null),[c,o]=N.useState(null),{data:d,isLoading:u,error:h,refetch:m}=Ah(e),g=ak(),v=Vx(),b=lk(),w=ok();N.useEffect(()=>{console.log("PricingPage state:",{filters:e,data:d,isLoading:u,error:h,isFormOpen:r,editingPriceList:a})},[e,d,u,h,r,a]);const x=()=>{console.log("Adding new price list"),l(null),i(!0)},p=R=>{console.log("Editing price list:",R),l(R),i(!0)},f=R=>{console.log("Viewing price list:",R),t(`/pricing/${R.id}`)},y=R=>{console.log("Duplicating price list:",R),l({...R,id:"",name:`Copy of ${R.name}`,is_default:!1}),i(!0)},j=async R=>{console.log("Setting default price list:",R);try{await w.mutateAsync(R.id)}catch(D){console.error("Set default error:",D)}},E=R=>{console.log("Deleting price list:",R),o(R)},P=async R=>{console.log("Form submit:",R);try{a!=null&&a.id?await v.mutateAsync({id:a.id,...R}):await g.mutateAsync(R),i(!1),l(null)}catch(D){console.error("Form submit error:",D)}},S=async()=>{if(c){console.log("Confirming delete:",c);try{await b.mutateAsync(c.id),o(null)}catch(R){console.error("Delete error:",R)}}},C=R=>{console.log("Page change:",R),s(D=>({...D,page:R}))},T=()=>{console.log("Refreshing price lists"),m()};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Price Catalog"}),n.jsx("p",{className:"text-gray-600",children:"Manage pricing for your products across different markets"}),h&&n.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["Error: ",h.message]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("button",{onClick:T,disabled:u,className:"flex items-center space-x-2 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:[n.jsx(wn,{className:`h-4 w-4 ${u?"animate-spin":""}`}),n.jsx("span",{children:"Refresh"})]}),n.jsxs("button",{onClick:x,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(xt,{className:"h-4 w-4"}),n.jsx("span",{children:"Create Price List"})]})]})]}),n.jsx(Mk,{}),n.jsx(Uk,{filters:e,onFiltersChange:s}),n.jsx(qk,{priceLists:(d==null?void 0:d.priceLists)||[],loading:u,onView:f,onEdit:p,onDuplicate:y,onSetDefault:j,onDelete:E}),d&&d.totalPages>1&&n.jsx(Pi,{currentPage:d.currentPage,totalPages:d.totalPages,totalCount:d.totalCount,onPageChange:C}),n.jsx(ry,{isOpen:r,onClose:()=>{console.log("Closing form"),i(!1),l(null)},onSubmit:P,priceList:a||void 0,loading:g.isPending||v.isPending,title:a!=null&&a.id?"Edit Price List":"Create New Price List"}),n.jsx(Oi,{isOpen:!!c,onClose:()=>o(null),onConfirm:S,title:"Delete Price List",message:`Are you sure you want to delete "${c==null?void 0:c.name}"? This action cannot be undone.`,confirmText:"Delete",type:"danger",loading:b.isPending})]})},Bk=({isOpen:t,onClose:e,onSubmit:s,priceList:r,loading:i=!1})=>{const[a,l]=N.useState([]),[c,o]=N.useState({}),[d,u]=N.useState(""),{data:h}=Ya({limit:1e3}),{data:m=[]}=Rh(r.id),g=(h==null?void 0:h.products)||[],v=m.map(y=>y.product_id),b=g.filter(y=>y.status==="active"&&!v.includes(y.id)&&(d===""||y.name.toLowerCase().includes(d.toLowerCase())||y.sku.toLowerCase().includes(d.toLowerCase())));N.useEffect(()=>{t||(l([]),o({}),u(""))},[t]);const w=(y,j)=>{if(j){const E=b.find(P=>P.id===y);E&&(l(P=>[...P,y]),o(P=>({...P,[y]:{productId:y,productName:E.name,productSku:E.sku,unitPrice:0,minQty:1,surchargeRate:void 0}})))}else l(E=>E.filter(P=>P!==y)),o(E=>{const P={...E};return delete P[y],P})},x=(y,j,E)=>{o(P=>({...P,[y]:{...P[y],[j]:E}}))},p=()=>{const y=Object.values(c).filter(j=>j.unitPrice>0);y.length!==0&&s(y)},f=a.length>0&&a.every(y=>{var j;return((j=c[y])==null?void 0:j.unitPrice)>0});return t?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:e}),n.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl",children:[n.jsxs("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:["Add Products to: ",r.name]}),n.jsx("button",{type:"button",onClick:e,className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.jsx(ot,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{children:n.jsxs("div",{className:"relative",children:[n.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search products by name or SKU...",value:d,onChange:y=>u(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:["Select Products (",b.length," available)"]}),n.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 rounded-lg",children:b.length>0?n.jsx("div",{className:"divide-y divide-gray-200",children:b.map(y=>n.jsx("div",{className:"p-3 hover:bg-gray-50",children:n.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:a.includes(y.id),onChange:j=>w(y.id,j.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.name}),n.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",y.sku,"  ",y.unit_of_measure,y.capacity_kg&&`  ${y.capacity_kg}kg`]})]})]})},y.id))}):n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(ye,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-500",children:d?"No products found matching your search.":"All products are already in this price list."})]})})]}),a.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Set Prices for Selected Products"}),n.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:a.map(y=>{const j=c[y];return j?n.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("h5",{className:"font-medium text-gray-900",children:j.productName}),n.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",j.productSku]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Unit Price (",r.currency_code,") *"]}),n.jsx("input",{type:"number",min:"0",step:"0.01",value:j.unitPrice||"",onChange:E=>x(y,"unitPrice",parseFloat(E.target.value)||0),className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Quantity"}),n.jsx("input",{type:"number",min:"1",value:j.minQty,onChange:E=>x(y,"minQty",parseInt(E.target.value)||1),className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Surcharge (%)"}),n.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:j.surchargeRate||"",onChange:E=>x(y,"surchargeRate",parseFloat(E.target.value)||void 0),className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"0.0"})]})]}),j.unitPrice>0&&n.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded",children:n.jsxs("span",{className:"text-sm text-blue-800",children:["Final Price: ",Tr(j.surchargeRate?j.unitPrice*(1+j.surchargeRate/100):j.unitPrice,r.currency_code)]})})]},y):null})})]})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsx("button",{onClick:p,disabled:i||!f,className:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:i?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Adding..."})]}):`Add ${a.length} Product${a.length!==1?"s":""}`}),n.jsx("button",{type:"button",onClick:e,disabled:i,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]})}):null},Vk=({isOpen:t,onClose:e,onSubmit:s,item:r,currencyCode:i,loading:a=!1})=>{var b,w;const{register:l,handleSubmit:c,reset:o,watch:d,formState:{errors:u}}=_s({defaultValues:{unit_price:r.unit_price,min_qty:r.min_qty,surcharge_pct:r.surcharge_pct||void 0}}),h=d("unit_price"),m=d("surcharge_pct");N.useEffect(()=>{r&&o({unit_price:r.unit_price,min_qty:r.min_qty,surcharge_pct:r.surcharge_pct||void 0})},[r,o]);const g=x=>{s({unit_price:x.unit_price,min_qty:x.min_qty,surcharge_pct:x.surcharge_pct||null})},v=()=>h?m?h*(1+m/100):h:0;return t?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:e}),n.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:n.jsxs("form",{onSubmit:c(g),children:[n.jsxs("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:"Edit Product Price"}),n.jsx("button",{type:"button",onClick:e,className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.jsx(ot,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:(b=r.product)==null?void 0:b.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",(w=r.product)==null?void 0:w.sku]})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"unit_price",className:"block text-sm font-medium text-gray-700",children:["Unit Price (",i,") *"]}),n.jsx("input",{type:"number",min:"0",step:"0.01",id:"unit_price",...l("unit_price",{required:"Unit price is required",min:{value:.01,message:"Price must be greater than 0"}}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),u.unit_price&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.unit_price.message})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"min_qty",className:"block text-sm font-medium text-gray-700",children:"Minimum Quantity"}),n.jsx("input",{type:"number",min:"1",id:"min_qty",...l("min_qty",{required:"Minimum quantity is required",min:{value:1,message:"Minimum quantity must be at least 1"}}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),u.min_qty&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.min_qty.message})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"surcharge_pct",className:"block text-sm font-medium text-gray-700",children:"Surcharge Percentage (%)"}),n.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",id:"surcharge_pct",...l("surcharge_pct",{min:{value:0,message:"Surcharge cannot be negative"},max:{value:100,message:"Surcharge cannot exceed 100%"}}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"0.0"}),u.surcharge_pct&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.surcharge_pct.message})]}),h>0&&n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Final Price:"}),n.jsx("span",{className:"text-lg font-bold text-blue-900",children:Tr(v(),i)})]}),m&&m>0&&n.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:["Base: ",Tr(h,i)," + ",m,"% surcharge"]})]})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsx("button",{type:"submit",disabled:a,className:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:a?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Saving..."})]}):"Save Changes"}),n.jsx("button",{type:"button",onClick:e,disabled:a,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}):null},Wk=()=>{var D;const{id:t}=Ba(),e=bt(),[s,r]=N.useState(!1),[i,a]=N.useState(!1),[l,c]=N.useState(null),[o,d]=N.useState(null),{data:u,isLoading:h,error:m}=rk(t),{data:g=[],refetch:v}=Rh(t),b=Vx(),w=Wx(),x=Kx(),p=ck(),f=async F=>{if(u)try{await b.mutateAsync({id:u.id,...F}),r(!1)}catch{}},y=async F=>{try{for(const M of F)await w.mutateAsync({price_list_id:t,product_id:M.productId,unit_price:M.unitPrice,min_qty:M.minQty||1,surcharge_pct:M.surchargeRate||void 0});a(!1),v()}catch{}},j=F=>{c(F)},E=async F=>{if(l)try{await x.mutateAsync({id:l.id,unit_price:F.unit_price,min_qty:F.min_qty,surcharge_pct:F.surcharge_pct}),c(null),v()}catch{}},P=F=>{d(F)},S=async()=>{if(o)try{await p.mutateAsync(o),d(null),v()}catch{}},C=F=>new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),T=(F,M)=>M?F*(1+M/100):F;if(h)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/pricing"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Price Lists"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})]})})]});if(m||!u)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/pricing"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Price Lists"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-red-600",children:"Price list not found or error loading details."})})})]});const R=ko(u.start_date,u.end_date);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>e("/pricing"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Price Lists"})]}),n.jsx("div",{className:"text-gray-400",children:"/"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:u.name})]}),n.jsxs("button",{onClick:()=>r(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(Tt,{className:"h-4 w-4"}),n.jsx("span",{children:"Edit Price List"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Price List Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Name"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(zs,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-gray-900",children:u.name})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Currency"}),n.jsx("span",{className:"text-gray-900 font-mono",children:u.currency_code})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Status"}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${R.color}`,children:R.label})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Date Range"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ee,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-gray-900",children:Qx(u.start_date,u.end_date)})]})]}),u.description&&n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-900",children:u.description})]})]})]})}),n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Details"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Created"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ee,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:C(u.created_at)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Products"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ye,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{className:"text-sm text-gray-900",children:[g.length," products"]})]})]})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Products in this Price List (",g.length,")"]}),n.jsxs("button",{onClick:()=>a(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(xt,{className:"h-4 w-4"}),n.jsx("span",{children:"Add Products"})]})]}),g.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Min Qty"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Surcharge"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Final Price"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(F=>{var M,ce;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:((M=F.product)==null?void 0:M.name)||"Unknown Product"}),n.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",((ce=F.product)==null?void 0:ce.sku)||"N/A"]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:Tr(F.unit_price,u.currency_code)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsx("span",{className:"text-sm text-gray-900",children:F.min_qty})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsx("span",{className:"text-sm text-gray-900",children:F.surcharge_pct?`${F.surcharge_pct}%`:"-"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:Tr(T(F.unit_price,F.surcharge_pct),u.currency_code)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx("button",{onClick:()=>j(F),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50 transition-colors",title:"Edit price",children:n.jsx(Tt,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>P(F),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50 transition-colors",title:"Remove from list",children:n.jsx(_n,{className:"h-4 w-4"})})]})})]},F.id)})})]})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ye,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products added yet"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"Add products to this price list to set their pricing."}),n.jsxs("button",{onClick:()=>a(!0),className:"inline-flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(xt,{className:"h-4 w-4"}),n.jsx("span",{children:"Add Products"})]})]})]}),n.jsx(ry,{isOpen:s,onClose:()=>r(!1),onSubmit:f,priceList:u,loading:b.isPending,title:"Edit Price List"}),n.jsx(Bk,{isOpen:i,onClose:()=>a(!1),onSubmit:y,priceList:u,loading:w.isPending}),l&&n.jsx(Vk,{isOpen:!!l,onClose:()=>c(null),onSubmit:E,item:l,currencyCode:u.currency_code,loading:x.isPending}),n.jsx(Oi,{isOpen:!!o,onClose:()=>d(null),onConfirm:S,title:"Remove Product",message:`Are you sure you want to remove "${(D=o==null?void 0:o.product)==null?void 0:D.name}" from this price list?`,confirmText:"Remove",type:"danger",loading:p.isPending})]})},Kk=50,Dh=(t={})=>De({queryKey:["orders",t],queryFn:async()=>{console.log("Fetching orders with filters:",t);let e=I.from("orders").select(`
          *,
          customer:customers(id, name, email, phone),
          delivery_address:addresses(id, line1, line2, city, state, postal_code, country, instructions),
          order_lines(
            id,
            product_id,
            quantity,
            unit_price,
            subtotal,
            product:products(id, sku, name, unit_of_measure)
          )
        `,{count:"exact"}).order("created_at",{ascending:!1});t.search&&(e=e.or(`id.ilike.%${t.search}%,customer.name.ilike.%${t.search}%`)),t.status&&(e=e.eq("status",t.status)),t.customer_id&&t.customer_id!=="null"&&t.customer_id!=="undefined"&&(e=e.eq("customer_id",t.customer_id)),t.order_date_from&&(e=e.gte("order_date",t.order_date_from)),t.order_date_to&&(e=e.lte("order_date",t.order_date_to)),t.scheduled_date_from&&(e=e.gte("scheduled_date",t.scheduled_date_from)),t.scheduled_date_to&&(e=e.lte("scheduled_date",t.scheduled_date_to));const s=t.page||1,r=t.limit||Kk,i=(s-1)*r,a=i+r-1;e=e.range(i,a);const{data:l,error:c,count:o}=await e;if(console.log("Supabase orders response:",{data:l,error:c,count:o}),c)throw console.error("Supabase orders error:",c),new Error(c.message);return{orders:l||[],totalCount:o||0,totalPages:Math.ceil((o||0)/r),currentPage:s}},retry:1,staleTime:3e4}),Qk=t=>De({queryKey:["order",t],queryFn:async()=>{if(console.log("Fetching order:",t),!t||t==="null"||t==="undefined")throw new Error("Invalid order ID");const{data:e,error:s}=await I.from("orders").select(`
          *,
          customer:customers(id, name, email, phone),
          delivery_address:addresses(id, line1, line2, city, state, postal_code, country, instructions),
          order_lines(
            id,
            product_id,
            quantity,
            unit_price,
            subtotal,
            product:products(id, sku, name, unit_of_measure)
          )
        `).eq("id",t).single();if(console.log("Order fetch result:",{data:e,error:s}),s)throw console.error("Order fetch error:",s),new Error(s.message);return e},enabled:!!t&&t!=="null"&&t!=="undefined"}),Hk=()=>De({queryKey:["order-stats"],queryFn:async()=>{console.log("Fetching order statistics");const{data:t,error:e}=await I.from("orders").select("status, total_amount, scheduled_date");if(e)throw console.error("Order stats error:",e),new Error(e.message);const s=new Date().toISOString().split("T")[0],r={total_orders:t.length,draft_orders:t.filter(i=>i.status==="draft").length,confirmed_orders:t.filter(i=>i.status==="confirmed").length,scheduled_orders:t.filter(i=>i.status==="scheduled").length,en_route_orders:t.filter(i=>i.status==="en_route").length,delivered_orders:t.filter(i=>i.status==="delivered").length,invoiced_orders:t.filter(i=>i.status==="invoiced").length,cancelled_orders:t.filter(i=>i.status==="cancelled").length,todays_deliveries:t.filter(i=>i.scheduled_date===s&&["scheduled","en_route"].includes(i.status)).length,overdue_orders:t.filter(i=>i.scheduled_date&&i.scheduled_date<s&&!["delivered","invoiced","cancelled"].includes(i.status)).length,total_revenue:t.filter(i=>i.status==="invoiced").reduce((i,a)=>i+(a.total_amount||0),0)};return console.log("Order stats:",r),r},staleTime:6e4}),Gk=()=>{const t=le();return he({mutationFn:async e=>{if(console.log("Creating order:",e),!e.customer_id||e.customer_id==="null"||e.customer_id==="undefined")throw new Error("Invalid customer ID");if(!e.delivery_address_id||e.delivery_address_id==="null"||e.delivery_address_id==="undefined")throw new Error("Invalid delivery address ID");const{data:s,error:r}=await I.from("orders").insert([{...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select(`
          *,
          customer:customers(id, name, email, phone),
          delivery_address:addresses(id, line1, line2, city, state, postal_code, country, instructions)
        `).single();if(console.log("Create order result:",{data:s,error:r}),r)throw console.error("Create order error:",r),new Error(r.message);return s},onSuccess:e=>{console.log("Order created successfully:",e),t.invalidateQueries({queryKey:["orders"]}),t.invalidateQueries({queryKey:["order-stats"]}),G.success("Order created successfully")},onError:e=>{console.error("Create order mutation error:",e),G.error(e.message||"Failed to create order")}})},ny=()=>{const t=le();return he({mutationFn:async e=>{if(console.log("Changing order status:",e),!e.order_id||e.order_id==="null"||e.order_id==="undefined")throw new Error("Invalid order ID");if(e.new_status==="confirmed"){const{data:a}=await I.from("orders").select(`
            order_lines(product_id, quantity)
          `).eq("id",e.order_id).single();if(a!=null&&a.order_lines)for(const l of a.order_lines)await I.rpc("reserve_stock",{p_product_id:l.product_id,p_quantity:l.quantity})}else if(e.new_status==="delivered"){const{data:a}=await I.from("orders").select(`
            order_lines(product_id, quantity)
          `).eq("id",e.order_id).single();if(a!=null&&a.order_lines)for(const l of a.order_lines)await I.rpc("fulfill_order_line",{p_product_id:l.product_id,p_quantity:l.quantity})}else if(e.new_status==="cancelled"){const{data:a}=await I.from("orders").select(`
            order_lines(product_id, quantity),
            status
          `).eq("id",e.order_id).single();if(a!=null&&a.order_lines&&a.status==="confirmed")for(const l of a.order_lines)await I.rpc("release_reserved_stock",{p_product_id:l.product_id,p_quantity:l.quantity})}const s={status:e.new_status,updated_at:new Date().toISOString()};e.scheduled_date&&(s.scheduled_date=e.scheduled_date);const{data:r,error:i}=await I.from("orders").update(s).eq("id",e.order_id).select(`
          *,
          customer:customers(id, name, email, phone),
          delivery_address:addresses(id, line1, line2, city, state, postal_code, country, instructions),
          order_lines(
            id,
            product_id,
            quantity,
            unit_price,
            subtotal,
            product:products(id, sku, name, unit_of_measure)
          )
        `).single();if(i)throw new Error(i.message);return r},onSuccess:e=>{t.invalidateQueries({queryKey:["orders"]}),t.invalidateQueries({queryKey:["order",e.id]}),t.invalidateQueries({queryKey:["order-stats"]}),t.invalidateQueries({queryKey:["inventory"]}),G.success(`Order status changed to ${e.status}`)},onError:e=>{G.error(e.message||"Failed to change order status")}})},Jk=()=>{const t=le();return he({mutationFn:async e=>{if(console.log("Creating order line:",e),!e.order_id||e.order_id==="null"||e.order_id==="undefined")throw new Error("Invalid order ID");if(!e.product_id||e.product_id==="null"||e.product_id==="undefined")throw new Error("Invalid product ID");const{data:s,error:r}=await I.from("order_lines").insert([e]).select(`
          *,
          product:products(id, sku, name, unit_of_measure)
        `).single();if(r)throw new Error(r.message);return await Yk(e.order_id),s},onSuccess:e=>{t.invalidateQueries({queryKey:["order",e.order_id]}),t.invalidateQueries({queryKey:["orders"]}),G.success("Product added to order")},onError:e=>{G.error(e.message||"Failed to add product to order")}})},Yk=async t=>{if(!t||t==="null"||t==="undefined")return;const{data:e}=await I.from("order_lines").select("subtotal").eq("order_id",t);if(e){const s=e.reduce((r,i)=>r+(i.subtotal||0),0);await I.from("orders").update({total_amount:s,updated_at:new Date().toISOString()}).eq("id",t)}},Xk=()=>[{status:"draft",label:"Draft",description:"Order is being created",color:"bg-gray-100 text-gray-800 border-gray-200",icon:"FileText",allowedTransitions:["confirmed","cancelled"]},{status:"confirmed",label:"Confirmed",description:"Order confirmed, stock reserved",color:"bg-blue-100 text-blue-800 border-blue-200",icon:"CheckCircle",allowedTransitions:["scheduled","cancelled"]},{status:"scheduled",label:"Scheduled",description:"Delivery date scheduled",color:"bg-purple-100 text-purple-800 border-purple-200",icon:"Calendar",allowedTransitions:["en_route","cancelled"]},{status:"en_route",label:"En Route",description:"Out for delivery",color:"bg-orange-100 text-orange-800 border-orange-200",icon:"Truck",allowedTransitions:["delivered"]},{status:"delivered",label:"Delivered",description:"Successfully delivered",color:"bg-green-100 text-green-800 border-green-200",icon:"Package",allowedTransitions:["invoiced"]},{status:"invoiced",label:"Invoiced",description:"Invoice generated",color:"bg-teal-100 text-teal-800 border-teal-200",icon:"Receipt",allowedTransitions:[]},{status:"cancelled",label:"Cancelled",description:"Order cancelled",color:"bg-red-100 text-red-800 border-red-200",icon:"XCircle",allowedTransitions:[]}],pn=t=>{const e=Xk();return e.find(s=>s.status===t)||e[0]},gu=t=>`#${t.slice(-8).toUpperCase()}`,ge=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"KES",currencyDisplay:"symbol"}).format(t).replace("KES","KSh"),Zk=t=>pn(t).color,eS=t=>pn(t).allowedTransitions,tS=t=>{const e=[];return t.customer_id||e.push("Customer is required"),t.delivery_address_id||e.push("Delivery address is required"),(!t.order_lines||t.order_lines.length===0)&&e.push("At least one product is required"),{valid:e.length===0,errors:e}},sS=t=>{const e=[];return t.scheduled_date||e.push("Scheduled date is required"),t.delivery_address||e.push("Delivery address is required"),{valid:e.length===0,errors:e}},rS=({orders:t,loading:e=!1,onView:s,onEdit:r,onChangeStatus:i,selectedOrders:a=[],onSelectionChange:l})=>{const[c,o]=N.useState(!1),d=g=>new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),u=g=>{const v=[];switch(g.status){case"draft":v.push({label:"Confirm",action:()=>i(g,"confirmed"),icon:ye,color:"text-blue-600 hover:text-blue-900"});break;case"confirmed":v.push({label:"Schedule",action:()=>i(g,"scheduled"),icon:Ee,color:"text-purple-600 hover:text-purple-900"});break;case"scheduled":v.push({label:"En Route",action:()=>i(g,"en_route"),icon:ec,color:"text-orange-600 hover:text-orange-900"});break;case"en_route":v.push({label:"Delivered",action:()=>i(g,"delivered"),icon:ye,color:"text-green-600 hover:text-green-900"});break;case"delivered":v.push({label:"Invoice",action:()=>i(g,"invoiced"),icon:Sx,color:"text-teal-600 hover:text-teal-900"});break}return["draft","confirmed","scheduled"].includes(g.status)&&v.push({label:"Cancel",action:()=>i(g,"cancelled"),icon:sc,color:"text-red-600 hover:text-red-900"}),v},h=g=>{o(g),l&&l(g?t.map(v=>v.id):[])},m=(g,v)=>{if(l){const b=v?[...a,g]:a.filter(w=>w!==g);l(b),o(b.length===t.length)}};return e?n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-6 w-6 animate-spin text-blue-600"}),n.jsx("span",{className:"text-gray-600",children:"Loading orders..."})]})})}):!t||t.length===0?n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"mb-4",children:n.jsx(Oa,{className:"h-12 w-12 text-gray-300 mx-auto"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),n.jsx("p",{className:"text-gray-500",children:"Get started by creating your first order."})]})}):n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Orders (",t.length,")"]}),a.length>0&&n.jsxs("span",{className:"text-sm text-blue-600",children:[a.length," selected"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[l&&n.jsx("th",{className:"px-6 py-3 text-left",children:n.jsx("input",{type:"checkbox",checked:c,onChange:g=>h(g.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Delivery Address"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(g=>{var b,w,x,p;const v=u(g);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[l&&n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("input",{type:"checkbox",checked:a.includes(g.id),onChange:f=>m(g.id,f.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("button",{onClick:()=>s(g),className:"text-sm font-medium text-blue-600 hover:text-blue-900",children:gu(g.id)}),n.jsxs("div",{className:"text-sm text-gray-500",children:[((b=g.order_lines)==null?void 0:b.length)||0," item",(((w=g.order_lines)==null?void 0:w.length)||0)!==1?"s":""]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:((x=g.customer)==null?void 0:x.name)||"Unknown Customer"}),((p=g.customer)==null?void 0:p.email)&&n.jsx("div",{className:"text-sm text-gray-500",children:g.customer.email})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm text-gray-900",children:g.delivery_address?n.jsxs(n.Fragment,{children:[n.jsx("div",{children:g.delivery_address.city}),g.delivery_address.state&&n.jsx("div",{className:"text-gray-500",children:g.delivery_address.state})]}):"No address"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"text-sm text-gray-900",children:[n.jsxs("div",{children:["Order: ",d(g.order_date)]}),g.scheduled_date&&n.jsxs("div",{className:"text-gray-500",children:["Scheduled: ",d(g.scheduled_date)]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${Zk(g.status)}`,children:g.status.replace("_"," ").toUpperCase()})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:n.jsx("div",{className:"text-sm font-medium text-gray-900",children:g.total_amount?ge(g.total_amount):"-"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx("button",{onClick:()=>s(g),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50 transition-colors",title:"View order",children:n.jsx(Ha,{className:"h-4 w-4"})}),["draft","confirmed"].includes(g.status)&&n.jsx("button",{onClick:()=>r(g),className:"text-gray-600 hover:text-gray-900 p-1 rounded hover:bg-gray-50 transition-colors",title:"Edit order",children:n.jsx(Tt,{className:"h-4 w-4"})}),v.slice(0,2).map((f,y)=>n.jsx("button",{onClick:f.action,className:`p-1 rounded hover:bg-gray-50 transition-colors ${f.color}`,title:f.label,children:n.jsx(f.icon,{className:"h-4 w-4"})},y))]})})]},g.id)})})]})})]})},nS=({filters:t,onFiltersChange:e,savedFilters:s=[],onSaveFilter:r,onLoadFilter:i})=>{const[a,l]=N.useState(!1),[c,o]=N.useState(!1),[d,u]=N.useState(""),h=f=>{e({...t,search:f.target.value||void 0,page:1})},m=f=>{e({...t,status:f.target.value||void 0,page:1})},g=(f,y)=>{e({...t,[f]:y||void 0,page:1})},v=(f,y)=>{e({...t,[f]:y?parseFloat(y):void 0,page:1})},b=f=>{e({...t,delivery_area:f.target.value||void 0,page:1})},w=()=>{e({page:1})},x=()=>{d.trim()&&r&&(r(d.trim(),t),o(!1),u(""))},p=[{name:"Today's Deliveries",filters:{scheduled_date_from:new Date().toISOString().split("T")[0],scheduled_date_to:new Date().toISOString().split("T")[0]}},{name:"Overdue Orders",filters:{scheduled_date_to:new Date(Date.now()-864e5).toISOString().split("T")[0],status:"scheduled"}},{name:"Draft Orders",filters:{status:"draft"}},{name:"This Week",filters:{order_date_from:new Date(Date.now()-7*864e5).toISOString().split("T")[0]}}];return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6 space-y-4",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by order ID, customer name, or product SKU...",value:t.search||"",onChange:h,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"sm:w-40",children:n.jsxs("div",{className:"relative",children:[n.jsx(bo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsxs("select",{value:t.status||"",onChange:m,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white",children:[n.jsx("option",{value:"",children:"All Statuses"}),n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"confirmed",children:"Confirmed"}),n.jsx("option",{value:"scheduled",children:"Scheduled"}),n.jsx("option",{value:"en_route",children:"En Route"}),n.jsx("option",{value:"delivered",children:"Delivered"}),n.jsx("option",{value:"invoiced",children:"Invoiced"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),n.jsxs("button",{onClick:()=>l(!a),className:`flex items-center space-x-2 px-3 py-2 rounded-md transition-colors ${a?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(bo,{className:"h-4 w-4"}),n.jsx("span",{children:"Advanced"})]}),n.jsxs("button",{onClick:w,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-md transition-colors",title:"Reset filters",children:[n.jsx(mn,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Reset"})]})]})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(f=>n.jsx("button",{onClick:()=>e({...f.filters,page:1}),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors",children:f.name},f.name))}),s.length>0&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(wo,{className:"h-4 w-4 text-yellow-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Saved Filters:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(f=>n.jsx("button",{onClick:()=>i==null?void 0:i(f),className:"px-3 py-1 text-sm bg-yellow-100 text-yellow-800 rounded-full hover:bg-yellow-200 transition-colors",children:f.name},f.id))})]}),a&&n.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Date From"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"date",value:t.order_date_from||"",onChange:f=>g("order_date_from",f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Date To"}),n.jsx("input",{type:"date",value:t.order_date_to||"",onChange:f=>g("order_date_to",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scheduled From"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"date",value:t.scheduled_date_from||"",onChange:f=>g("scheduled_date_from",f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scheduled To"}),n.jsx("input",{type:"date",value:t.scheduled_date_to||"",onChange:f=>g("scheduled_date_to",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx(zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"number",min:"0",step:"0.01",value:t.amount_min||"",onChange:f=>v("amount_min",f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx(zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"number",min:"0",step:"0.01",value:t.amount_max||"",onChange:f=>v("amount_max",f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Area"}),n.jsxs("div",{className:"relative",children:[n.jsx(Yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",value:t.delivery_area||"",onChange:b,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"City or region"})]})]})]}),r&&n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:()=>o(!0),className:"flex items-center space-x-2 px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[n.jsx(H1,{className:"h-4 w-4"}),n.jsx("span",{children:"Save Filter"})]})})]}),c&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>o(!1)}),n.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[n.jsxs("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:"Save Filter"}),n.jsx("button",{onClick:()=>o(!1),className:"rounded-md bg-white text-gray-400 hover:text-gray-500",children:n.jsx(mn,{className:"h-6 w-6"})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter Name"}),n.jsx("input",{type:"text",value:d,onChange:f=>u(f.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter a name for this filter..."})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsx("button",{onClick:x,disabled:!d.trim(),className:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Filter"}),n.jsx("button",{onClick:()=>o(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"Cancel"})]})]})]})})]})},iS=()=>{const{data:t,isLoading:e}=Hk();if(e)return n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[...Array(10)].map((r,i)=>n.jsx("div",{className:"h-16 bg-gray-200 rounded"},i))})]})});if(!t)return null;const s=[{name:"Total Orders",value:t.total_orders,icon:Oa,color:"text-blue-600",bgColor:"bg-blue-50"},{name:"Draft",value:t.draft_orders,icon:Oa,color:"text-gray-600",bgColor:"bg-gray-50"},{name:"Confirmed",value:t.confirmed_orders,icon:hn,color:"text-blue-600",bgColor:"bg-blue-50"},{name:"Scheduled",value:t.scheduled_orders,icon:Ee,color:"text-purple-600",bgColor:"bg-purple-50"},{name:"En Route",value:t.en_route_orders,icon:ec,color:"text-orange-600",bgColor:"bg-orange-50"},{name:"Delivered",value:t.delivered_orders,icon:ye,color:"text-green-600",bgColor:"bg-green-50"},{name:"Invoiced",value:t.invoiced_orders,icon:Sx,color:"text-teal-600",bgColor:"bg-teal-50"},{name:"Cancelled",value:t.cancelled_orders,icon:sc,color:"text-red-600",bgColor:"bg-red-50"},{name:"Today's Deliveries",value:t.todays_deliveries,icon:Ee,color:"text-indigo-600",bgColor:"bg-indigo-50"},{name:"Overdue",value:t.overdue_orders,icon:Ve,color:"text-red-600",bgColor:"bg-red-50"}];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Overview"}),n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:s.map(r=>n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full ${r.bgColor} mb-2`,children:n.jsx(r.icon,{className:`h-6 w-6 ${r.color}`})}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.value}),n.jsx("div",{className:"text-sm text-gray-600",children:r.name})]},r.name))})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Total Revenue"}),n.jsx("p",{className:"text-sm text-gray-600",children:"From invoiced orders"})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-3 bg-green-50 rounded-full",children:n.jsx(fn,{className:"h-6 w-6 text-green-600"})}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"text-3xl font-bold text-gray-900",children:ge(t.total_revenue)})})]})]})}),(t.overdue_orders>0||t.todays_deliveries>0)&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.todays_deliveries>0&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ee,{className:"h-5 w-5 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Today's Deliveries"}),n.jsxs("p",{className:"text-sm text-blue-700",children:[t.todays_deliveries," order",t.todays_deliveries>1?"s":""," scheduled for delivery today"]})]})]})}),t.overdue_orders>0&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ve,{className:"h-5 w-5 text-red-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Overdue Orders"}),n.jsxs("p",{className:"text-sm text-red-700",children:[t.overdue_orders," order",t.overdue_orders>1?"s are":" is"," past scheduled delivery date"]})]})]})})]})]})},iy=({isOpen:t,onClose:e,onSubmit:s,order:r,newStatus:i,loading:a=!1})=>{const{register:l,handleSubmit:c,reset:o,formState:{errors:d}}=_s({defaultValues:{order_id:r.id,new_status:i,notes:"",scheduled_date:""}});N.useEffect(()=>{o({order_id:r.id,new_status:i,notes:"",scheduled_date:i==="scheduled"?new Date().toISOString().split("T")[0]:""})},[r.id,i,o]);const u=w=>{s(w)},h=pn(i),m=i==="scheduled",v=(()=>{const w=[];if(i==="confirmed"){const x=tS(r);w.push(...x.errors)}else if(i==="scheduled"){const x=sS(r);w.push(...x.errors)}return w})(),b=v.length===0;return t?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:e}),n.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:n.jsxs("form",{onSubmit:c(u),children:[n.jsxs("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:"Change Order Status"}),n.jsx("button",{type:"button",onClick:e,className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.jsx(ot,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Current Status:"}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${pn(r.status).color}`,children:r.status.replace("_"," ").toUpperCase()})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"New Status:"}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${h.color}`,children:i.replace("_"," ").toUpperCase()})]}),n.jsx("div",{className:"mt-2 text-sm text-gray-600",children:h.description})]}),v.length>0&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(Ve,{className:"h-5 w-5 text-red-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Cannot proceed:"}),n.jsx("ul",{className:"mt-1 text-sm text-red-700 list-disc list-inside",children:v.map((w,x)=>n.jsx("li",{children:w},x))})]})]})}),m&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"scheduled_date",className:"block text-sm font-medium text-gray-700",children:"Scheduled Delivery Date *"}),n.jsx("input",{type:"date",id:"scheduled_date",...l("scheduled_date",{required:m?"Scheduled date is required":!1,validate:w=>{if(m&&w){const x=new Date(w),p=new Date;if(p.setHours(0,0,0,0),x<p)return"Scheduled date cannot be in the past"}return!0}}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",min:new Date().toISOString().split("T")[0]}),d.scheduled_date&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.scheduled_date.message})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:["Notes ",i==="cancelled"?"*":"(Optional)"]}),n.jsx("textarea",{id:"notes",rows:3,...l("notes",{required:i==="cancelled"?"Cancellation reason is required":!1}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:i==="cancelled"?"Please provide a reason for cancellation...":"Optional notes about this status change..."}),d.notes&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.notes.message})]}),i==="confirmed"&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Note:"})," Confirming this order will reserve inventory for all products."]})}),i==="delivered"&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-sm text-green-800",children:[n.jsx("strong",{children:"Note:"})," Marking as delivered will deduct inventory and release reserved stock."]})}),i==="cancelled"&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:"Warning:"})," Cancelling this order will release any reserved inventory."]})})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsx("button",{type:"submit",disabled:a||!b,className:`inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold text-white shadow-sm sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed ${i==="cancelled"?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}`,children:a?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($e,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Updating..."})]}):`Change to ${h.label}`}),n.jsx("button",{type:"button",onClick:e,disabled:a,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}):null},aS=({selectedOrders:t,onClearSelection:e,onBulkOperation:s})=>{const[r,i]=N.useState(!1),[a,l]=N.useState(!1),[c,o]=N.useState(!1),[d,u]=N.useState(""),[h,m]=N.useState(""),[g,v]=N.useState("");if(t.length===0)return null;const b=j=>t.every(E=>{switch(j){case"confirmed":return E.status==="draft";case"scheduled":return E.status==="confirmed";case"cancelled":return["draft","confirmed","scheduled"].includes(E.status);default:return!1}}),w=()=>{d&&(s({order_ids:t.map(j=>j.id),operation:"schedule",scheduled_date:d,notes:g}),l(!1),u(""),v(""))},x=()=>{h&&(s({order_ids:t.map(j=>j.id),operation:"status_change",new_status:h,notes:g}),o(!1),m(""),v(""))},p=()=>{s({order_ids:t.map(j=>j.id),operation:"export"}),i(!1)},f=()=>{s({order_ids:t.map(j=>j.id),operation:"print"}),i(!1)},y=t.reduce((j,E)=>j+(E.total_amount||0),0);return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[t.length," order",t.length>1?"s":""," selected"]}),n.jsxs("span",{className:"text-sm text-blue-700",children:["Total value: $",y.toLocaleString()]}),n.jsxs("button",{onClick:e,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[n.jsx(ot,{className:"h-3 w-3"}),n.jsx("span",{children:"Clear selection"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>i(!r),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[n.jsx("span",{children:"Bulk Actions"}),n.jsx(Nh,{className:"h-4 w-4"})]}),r&&n.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-200 z-10",children:n.jsxs("div",{className:"py-1",children:[n.jsx("div",{className:"px-4 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-100",children:"Status Changes"}),b("confirmed")&&n.jsxs("button",{onClick:()=>{m("confirmed"),o(!0),i(!1)},className:"flex items-center space-x-2 w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[n.jsx(hn,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{children:"Confirm Orders"})]}),b("scheduled")&&n.jsxs("button",{onClick:()=>{l(!0),i(!1)},className:"flex items-center space-x-2 w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[n.jsx(Ee,{className:"h-4 w-4 text-purple-600"}),n.jsx("span",{children:"Schedule Deliveries"})]}),b("cancelled")&&n.jsxs("button",{onClick:()=>{m("cancelled"),o(!0),i(!1)},className:"flex items-center space-x-2 w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[n.jsx(ot,{className:"h-4 w-4 text-red-600"}),n.jsx("span",{children:"Cancel Orders"})]}),n.jsxs("div",{className:"border-t border-gray-100 mt-1",children:[n.jsx("div",{className:"px-4 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Export & Print"}),n.jsxs("button",{onClick:p,className:"flex items-center space-x-2 w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[n.jsx(Sh,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{children:"Export to CSV"})]}),n.jsxs("button",{onClick:f,className:"flex items-center space-x-2 w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[n.jsx(Nx,{className:"h-4 w-4 text-gray-600"}),n.jsx("span",{children:"Print Manifests"})]})]})]})})]})]})}),a&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>l(!1)}),n.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[n.jsxs("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:["Schedule ",t.length," Orders"]}),n.jsx("button",{onClick:()=>l(!1),className:"rounded-md bg-white text-gray-400 hover:text-gray-500",children:n.jsx(ot,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scheduled Delivery Date *"}),n.jsx("input",{type:"date",value:d,onChange:j=>u(j.target.value),min:new Date().toISOString().split("T")[0],className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),n.jsx("textarea",{value:g,onChange:j=>v(j.target.value),rows:3,className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Add notes for this bulk scheduling..."})]})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsx("button",{onClick:w,disabled:!d,className:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Schedule Orders"}),n.jsx("button",{onClick:()=>l(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"Cancel"})]})]})]})}),c&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>o(!1)}),n.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[n.jsxs("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:[h==="confirmed"&&"Confirm Orders",h==="cancelled"&&"Cancel Orders"]}),n.jsx("button",{onClick:()=>o(!1),className:"rounded-md bg-white text-gray-400 hover:text-gray-500",children:n.jsx(ot,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["This will change the status of ",t.length," selected orders to"," ",n.jsx("span",{className:"font-medium",children:h}),"."]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h==="cancelled"?"Cancellation Reason *":"Notes (Optional)"}),n.jsx("textarea",{value:g,onChange:j=>v(j.target.value),rows:3,className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:h==="cancelled"?"Please provide a reason for cancellation...":"Add notes for this status change..."})]})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[n.jsxs("button",{onClick:x,disabled:h==="cancelled"&&!g.trim(),className:`inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold text-white shadow-sm sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed ${h==="cancelled"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:[h==="confirmed"&&"Confirm Orders",h==="cancelled"&&"Cancel Orders"]}),n.jsx("button",{onClick:()=>o(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"Cancel"})]})]})]})})]})},lS=()=>{const t=bt(),[e,s]=N.useState({page:1}),[r,i]=N.useState(null),[a,l]=N.useState([]),{data:c,isLoading:o,error:d,refetch:u}=Dh(e),h=ny();N.useEffect(()=>{console.log("OrdersPage state:",{filters:e,data:c,isLoading:o,error:d,statusChangeOrder:r,selectedOrders:a})},[e,c,o,d,r,a]);const m=()=>{console.log("Creating new order"),t("/orders/new")},g=S=>{console.log("Viewing order:",S),t(`/orders/${S.id}`)},v=S=>{console.log("Editing order:",S),t(`/orders/${S.id}/edit`)},b=(S,C)=>{console.log("Changing order status:",S,C),i({order:S,newStatus:C})},w=async S=>{console.log("Status change submit:",S);try{await h.mutateAsync(S),i(null)}catch(C){console.error("Status change error:",C)}},x=async S=>{switch(console.log("Bulk operation:",S),S.operation){case"status_change":if(S.new_status)for(const C of S.order_ids)(c==null?void 0:c.orders.find(R=>R.id===C))&&await h.mutateAsync({order_id:C,new_status:S.new_status,notes:S.notes});break;case"schedule":if(S.scheduled_date)for(const C of S.order_ids)await h.mutateAsync({order_id:C,new_status:"scheduled",scheduled_date:S.scheduled_date,notes:S.notes});break;case"export":p(S.order_ids);break;case"print":f(S.order_ids);break}l([])},p=S=>{const C=(c==null?void 0:c.orders.filter(M=>S.includes(M.id)))||[],T=[["Order ID","Customer","Status","Order Date","Scheduled Date","Total Amount"],...C.map(M=>{var ce,Ne;return[M.id,((ce=M.customer)==null?void 0:ce.name)||"",M.status,M.order_date,M.scheduled_date||"",((Ne=M.total_amount)==null?void 0:Ne.toString())||"0"]})].map(M=>M.join(",")).join(`
`),R=new Blob([T],{type:"text/csv"}),D=window.URL.createObjectURL(R),F=document.createElement("a");F.href=D,F.download=`orders-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(F),F.click(),document.body.removeChild(F),window.URL.revokeObjectURL(D)},f=S=>{console.log("Print manifests for orders:",S)},y=S=>{console.log("Page change:",S),s(C=>({...C,page:S}))},j=()=>{console.log("Refreshing orders"),u()},E=S=>{l(S)},P=()=>{l([])};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Order Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage customer orders and deliveries"}),d&&n.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["Error: ",d.message]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("button",{onClick:()=>t("/orders/reports"),className:"flex items-center space-x-2 bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:[n.jsx(un,{className:"h-4 w-4"}),n.jsx("span",{children:"Reports"})]}),n.jsxs("button",{onClick:()=>t("/orders/schedule"),className:"flex items-center space-x-2 bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(Ee,{className:"h-4 w-4"}),n.jsx("span",{children:"Schedule"})]}),n.jsxs("button",{onClick:j,disabled:o,className:"flex items-center space-x-2 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:[n.jsx(wn,{className:`h-4 w-4 ${o?"animate-spin":""}`}),n.jsx("span",{children:"Refresh"})]}),n.jsxs("button",{onClick:m,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(xt,{className:"h-4 w-4"}),n.jsx("span",{children:"Create Order"})]})]})]}),n.jsx(iS,{}),n.jsx(nS,{filters:e,onFiltersChange:s}),n.jsx(aS,{selectedOrders:(c==null?void 0:c.orders.filter(S=>a.includes(S.id)))||[],onClearSelection:P,onBulkOperation:x}),n.jsx(rS,{orders:(c==null?void 0:c.orders)||[],loading:o,onView:g,onEdit:v,onChangeStatus:b,selectedOrders:a,onSelectionChange:E}),c&&c.totalPages>1&&n.jsx(Pi,{currentPage:c.currentPage,totalPages:c.totalPages,totalCount:c.totalCount,onPageChange:y}),r&&n.jsx(iy,{isOpen:!!r,onClose:()=>i(null),onSubmit:w,order:r.order,newStatus:r.newStatus,loading:h.isPending})]})},oS=()=>{const t=bt(),[e,s]=N.useState(1),[r,i]=N.useState(""),[a,l]=N.useState(""),[c,o]=N.useState(new Date().toISOString().split("T")[0]),[d,u]=N.useState([]),{data:h}=Cx({limit:1e3}),{data:m=[]}=Ux(r),{data:g}=Ya({limit:1e3}),{data:v}=Ah({limit:1e3}),b=Gk(),w=Jk(),{data:x}=Yx({limit:1e3}),p=(x==null?void 0:x.inventory)||[],f=(h==null?void 0:h.customers)||[],y=(g==null?void 0:g.products)||[],E=((v==null?void 0:v.priceLists)||[]).find(L=>L.is_default),{data:P=[]}=Rh((E==null?void 0:E.id)||""),S=f.find(L=>L.id===r),C=m.find(L=>L.id===a),T=d.reduce((L,te)=>L+te.subtotal,0),R=L=>{i(L),l("")};N.useEffect(()=>{if(r&&m.length>0&&!a){const L=m.find(te=>te.is_primary);L&&l(L.id)}},[r,m,a]);const D=L=>{const te=P.find(ae=>ae.product_id===L);return(te==null?void 0:te.unit_price)||0},F=L=>p.filter(ae=>ae.product_id===L).reduce((ae,ve)=>{const Ue=Math.max(0,ve.qty_full-ve.qty_reserved);return ae+Ue},0),M=L=>{var ve;const te=F(L),ae=((ve=d.find(Ue=>Ue.product_id===L))==null?void 0:ve.quantity)||0;return Math.max(0,te-ae)},ce=L=>{const te=y.find(Ye=>Ye.id===L);if(!te)return;const ae=d.find(Ye=>Ye.product_id===L),ve=D(L),Ue=F(L);if(ae){if(ae.quantity>=Ue)return;u(Ye=>Ye.map(qt=>qt.product_id===L?{...qt,quantity:qt.quantity+1,subtotal:(qt.quantity+1)*qt.unit_price}:qt))}else if(Ue>0){const Ye={product_id:L,product_name:te.name,product_sku:te.sku,quantity:1,unit_price:ve,subtotal:ve};u(qt=>[...qt,Ye])}},Ne=(L,te)=>{if(te<=0){Je(L);return}const ae=F(L),ve=Math.min(te,ae);u(Ue=>Ue.map(Ye=>Ye.product_id===L?{...Ye,quantity:ve,subtotal:ve*Ye.unit_price}:Ye))},Je=L=>{u(te=>te.filter(ae=>ae.product_id!==L))},B=async()=>{if(!(!r||!a||d.length===0))try{const L={customer_id:r,delivery_address_id:a,order_date:c,status:"draft"},te=await b.mutateAsync(L);for(const ae of d){const ve={order_id:te.id,product_id:ae.product_id,quantity:ae.quantity,unit_price:ae.unit_price};await w.mutateAsync(ve)}t(`/orders/${te.id}`)}catch(L){console.error("Error creating order:",L)}},Y=r&&a,Z=Y&&d.length>0,me=L=>L===0?"text-red-600":L<=10?"text-yellow-600":"text-green-600",Oe=()=>{r&&t(`/customers/${r}`)};return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>t("/orders"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Orders"})]}),n.jsx("div",{className:"text-gray-400",children:"/"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Order"})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs("div",{className:"flex items-center space-x-8",children:[n.jsxs("div",{className:`flex items-center space-x-2 ${e>=1?"text-blue-600":"text-gray-400"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${e>=1?"bg-blue-600 text-white":"bg-gray-200"}`,children:"1"}),n.jsx("span",{className:"font-medium",children:"Customer & Delivery"})]}),n.jsx("div",{className:`w-16 h-0.5 ${e>=2?"bg-blue-600":"bg-gray-200"}`}),n.jsxs("div",{className:`flex items-center space-x-2 ${e>=2?"text-blue-600":"text-gray-400"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${e>=2?"bg-blue-600 text-white":"bg-gray-200"}`,children:"2"}),n.jsx("span",{className:"font-medium",children:"Add Products"})]}),n.jsx("div",{className:`w-16 h-0.5 ${e>=3?"bg-blue-600":"bg-gray-200"}`}),n.jsxs("div",{className:`flex items-center space-x-2 ${e>=3?"text-blue-600":"text-gray-400"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${e>=3?"bg-blue-600 text-white":"bg-gray-200"}`,children:"3"}),n.jsx("span",{className:"font-medium",children:"Review & Create"})]})]})}),e===1&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(tc,{className:"inline h-4 w-4 mr-1"}),"Select Customer *"]}),n.jsxs("select",{value:r,onChange:L=>R(L.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Choose a customer..."}),f.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Ee,{className:"inline h-4 w-4 mr-1"}),"Order Date *"]}),n.jsx("input",{type:"date",value:c,onChange:L=>o(L.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),r&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Yt,{className:"inline h-4 w-4 mr-1"}),"Delivery Address *"]}),m.length>0?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("select",{value:a,onChange:L=>l(L.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Choose a delivery address..."}),m.map(L=>n.jsx("option",{value:L.id,children:o2(L)},L.id))]}),C&&n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Selected Address:"}),n.jsxs("div",{className:"text-sm text-gray-700",children:[n.jsx("div",{children:C.line1}),C.line2&&n.jsx("div",{children:C.line2}),n.jsxs("div",{children:[C.city,", ",C.state," ",C.postal_code]}),C.instructions&&n.jsxs("div",{className:"mt-2 text-gray-600",children:[n.jsx("strong",{children:"Instructions:"})," ",C.instructions]})]})]})]}):n.jsxs("div",{className:"text-center py-8 border border-gray-200 rounded-lg bg-yellow-50",children:[n.jsx(Ve,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No delivery addresses found"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"This customer doesn't have any delivery addresses yet."}),n.jsxs("button",{onClick:Oe,className:"inline-flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[n.jsx(xt,{className:"h-4 w-4"}),n.jsx("span",{children:"Add Address for Customer"})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:()=>s(2),disabled:!Y,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next: Add Products"})})]}),e===2&&n.jsxs("div",{className:"space-y-6",children:[!E&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ve,{className:"h-5 w-5 text-yellow-600"}),n.jsx("span",{className:"text-sm text-yellow-800",children:"No default price list found. Product prices may not be available."})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Available Products"}),n.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:y.filter(L=>L.status==="active").map(L=>{const te=F(L.id);M(L.id);const ae=D(L.id),ve=d.some(Ye=>Ye.product_id===L.id),Ue=me(te);return n.jsx("div",{className:`p-3 border rounded-lg ${ve?"bg-blue-50 border-blue-200":"border-gray-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:L.name}),n.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",L.sku]}),n.jsx("div",{className:`text-sm ${Ue}`,children:te===0?"Out of stock":`Stock: ${te} available`}),n.jsxs("div",{className:"text-sm font-medium text-green-600",children:["Price: ",ae>0?ge(ae):"No price set"]})]}),n.jsx("button",{onClick:()=>ce(L.id),disabled:te===0||ae===0,className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(xt,{className:"h-4 w-4"})})]})},L.id)})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Items"}),d.length>0?n.jsxs("div",{className:"space-y-3",children:[d.map(L=>{const te=F(L.product_id);return n.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:L.product_name}),n.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",L.product_sku]})]}),n.jsx("button",{onClick:()=>Je(L.product_id),className:"text-red-600 hover:text-red-800",children:n.jsx(_n,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Qty:"}),n.jsx("input",{type:"number",min:"1",max:te,value:L.quantity,onChange:ae=>Ne(L.product_id,parseInt(ae.target.value)||0),className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm"}),n.jsxs("span",{className:"text-xs text-gray-500",children:["(max: ",te,")"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[ge(L.unit_price)," each"]}),n.jsx("div",{className:"font-medium text-gray-900",children:ge(L.subtotal)})]})]})]},L.product_id)}),n.jsx("div",{className:"border-t pt-3",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Total:"}),n.jsx("span",{className:"text-xl font-bold text-gray-900",children:ge(T)})]})})]}):n.jsxs("div",{className:"text-center py-8 border border-gray-200 rounded-lg",children:[n.jsx(ye,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No products added yet."}),n.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Select products from the left to add them to the order."})]})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("button",{onClick:()=>s(1),className:"bg-gray-100 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-200",children:"Back"}),n.jsx("button",{onClick:()=>s(3),disabled:d.length===0,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next: Review"})]})]}),e===3&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Summary"}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Customer:"}),n.jsx("div",{className:"text-gray-900",children:S==null?void 0:S.name})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Delivery Address:"}),n.jsxs("div",{className:"text-gray-900",children:[C==null?void 0:C.line1,(C==null?void 0:C.line2)&&n.jsx("div",{children:C.line2}),n.jsxs("div",{children:[C==null?void 0:C.city,", ",C==null?void 0:C.state," ",C==null?void 0:C.postal_code]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Order Date:"}),n.jsx("div",{className:"text-gray-900",children:new Date(c).toLocaleDateString()})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Items"}),n.jsxs("div",{className:"space-y-2",children:[d.map(L=>n.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:L.product_name}),n.jsxs("div",{className:"text-sm text-gray-500",children:[L.quantity,"  ",ge(L.unit_price)]})]}),n.jsx("div",{className:"font-medium text-gray-900",children:ge(L.subtotal)})]},L.product_id)),n.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-300",children:[n.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Total:"}),n.jsx("span",{className:"text-xl font-bold text-gray-900",children:ge(T)})]})]})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("button",{onClick:()=>s(2),className:"bg-gray-100 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-200",children:"Back"}),n.jsxs("button",{onClick:B,disabled:!Z||b.isPending,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[n.jsx(Oa,{className:"h-4 w-4"}),n.jsx("span",{children:b.isPending?"Creating...":"Create Order"})]})]})]})]})]})},cS=({statusHistory:t,currentStatus:e,estimatedDates:s={}})=>{const r=o=>new Date(o).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),i=(o,d)=>(pn(o),d?n.jsx(hn,{className:"h-5 w-5 text-green-600"}):o===e?n.jsx(Cr,{className:"h-5 w-5 text-blue-600"}):n.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300 bg-white"})),a=(o,d)=>d?"border-green-200 bg-green-50":o===e?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50",l=["draft","confirmed","scheduled","en_route","delivered","invoiced"],c=l.indexOf(e);return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Order Timeline"}),n.jsx("div",{className:"space-y-4",children:l.map((o,d)=>{const u=d<c||o===e&&e!=="cancelled",h=o===e,m=pn(o),g=t.find(b=>b.status===o),v=s[o];return o==="cancelled"&&e!=="cancelled"?null:n.jsxs("div",{className:`relative flex items-start space-x-4 p-4 rounded-lg border ${a(o,u)}`,children:[d<l.length-1&&o!=="cancelled"&&n.jsx("div",{className:"absolute left-6 top-12 w-0.5 h-8 bg-gray-200"}),n.jsx("div",{className:"flex-shrink-0 mt-1",children:i(o,u)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:`text-sm font-medium ${u||h?"text-gray-900":"text-gray-500"}`,children:m.label}),g&&n.jsx("span",{className:"text-xs text-gray-500",children:r(g.changed_at)})]}),n.jsx("p",{className:`text-sm mt-1 ${u||h?"text-gray-600":"text-gray-400"}`,children:m.description}),(g||v)&&n.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-xs",children:[g&&n.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[n.jsx(hn,{className:"h-3 w-3"}),n.jsxs("span",{children:["Completed: ",r(g.changed_at)]})]}),v&&!g&&n.jsxs("div",{className:"flex items-center space-x-1 text-blue-600",children:[n.jsx(Ee,{className:"h-3 w-3"}),n.jsxs("span",{children:["Estimated: ",r(v)]})]})]}),g&&n.jsxs("div",{className:"mt-3 space-y-2",children:[g.user_name&&n.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[n.jsx(tc,{className:"h-3 w-3"}),n.jsxs("span",{children:["Changed by: ",g.user_name]})]}),g.notes&&n.jsxs("div",{className:"flex items-start space-x-1 text-xs text-gray-600",children:[n.jsx(W1,{className:"h-3 w-3 mt-0.5"}),n.jsx("span",{children:g.notes})]})]}),h&&n.jsx("div",{className:"mt-2",children:n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Current Status"})})]})]},o)})}),t.length>1&&n.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Performance Metrics"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Order Processing Time:"}),n.jsx("div",{className:"font-medium text-gray-900",children:(()=>{var u,h;const o=(u=t.find(m=>m.status==="draft"))==null?void 0:u.changed_at,d=(h=t.find(m=>m.status==="confirmed"))==null?void 0:h.changed_at;return o&&d?`${Math.round((new Date(d).getTime()-new Date(o).getTime())/36e5)} hours`:"N/A"})()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Fulfillment Time:"}),n.jsx("div",{className:"font-medium text-gray-900",children:(()=>{var u,h;const o=(u=t.find(m=>m.status==="confirmed"))==null?void 0:u.changed_at,d=(h=t.find(m=>m.status==="delivered"))==null?void 0:h.changed_at;return o&&d?`${Math.round((new Date(d).getTime()-new Date(o).getTime())/864e5)} days`:"N/A"})()})]})]})]})]})},dS=()=>{var w,x,p,f,y,j,E,P,S;const{id:t}=Ba(),e=bt(),[s,r]=N.useState(null),[i,a]=N.useState(!1),{data:l,isLoading:c,error:o}=Qk(t),d=ny(),u=C=>{l&&r({order:l,newStatus:C})},h=async C=>{try{await d.mutateAsync(C),r(null)}catch(T){console.error("Status change error:",T)}},m=C=>new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});if(c)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/orders"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Orders"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})]})})]});if(o||!l)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/orders"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Orders"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-red-600",children:"Order not found or error loading order details."})})})]});const g=pn(l.status),v=eS(l.status),b=[{id:"1",order_id:l.id,status:"draft",changed_by:"system",changed_at:l.created_at,user_name:"System",notes:"Order created"},...l.status!=="draft"?[{id:"2",order_id:l.id,status:"confirmed",changed_by:"admin",changed_at:new Date(new Date(l.created_at).getTime()+36e5).toISOString(),user_name:"Admin User",notes:"Order confirmed and inventory reserved"}]:[]];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>e("/orders"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Orders"})]}),n.jsx("div",{className:"text-gray-400",children:"/"}),n.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Order ",gu(l.id)]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("button",{onClick:()=>a(!i),className:"flex items-center space-x-2 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition-colors",children:[n.jsx(Cr,{className:"h-4 w-4"}),n.jsxs("span",{children:[i?"Hide":"Show"," Timeline"]})]}),["draft","confirmed"].includes(l.status)&&n.jsxs("button",{onClick:()=>e(`/orders/${l.id}/edit`),className:"flex items-center space-x-2 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition-colors",children:[n.jsx(Tt,{className:"h-4 w-4"}),n.jsx("span",{children:"Edit Order"})]}),v.map(C=>n.jsxs("button",{onClick:()=>u(C),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[C==="confirmed"&&"Confirm Order",C==="scheduled"&&"Schedule Delivery",C==="en_route"&&"Mark En Route",C==="delivered"&&"Mark Delivered",C==="invoiced"&&"Generate Invoice",C==="cancelled"&&"Cancel Order"]},C))]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Order ",gu(l.id)]}),n.jsxs("p",{className:"text-gray-600",children:["Created on ",m(l.created_at)]})]}),n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${g.color}`,children:l.status.replace("_"," ").toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:n.jsx(tc,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Customer"}),n.jsx("p",{className:"text-gray-600",children:(w=l.customer)==null?void 0:w.name}),((x=l.customer)==null?void 0:x.email)&&n.jsx("p",{className:"text-sm text-gray-500",children:l.customer.email}),((p=l.customer)==null?void 0:p.phone)&&n.jsx("p",{className:"text-sm text-gray-500",children:l.customer.phone})]})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:n.jsx(Yt,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Delivery Address"}),l.delivery_address?n.jsxs("div",{className:"text-gray-600",children:[n.jsx("p",{children:l.delivery_address.line1}),l.delivery_address.line2&&n.jsx("p",{children:l.delivery_address.line2}),n.jsxs("p",{children:[l.delivery_address.city,", ",l.delivery_address.state," ",l.delivery_address.postal_code]}),l.delivery_address.instructions&&n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Note: ",l.delivery_address.instructions]})]}):n.jsx("p",{className:"text-gray-500",children:"No address specified"})]})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:n.jsx(Ee,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Important Dates"}),n.jsxs("div",{className:"text-gray-600 space-y-1",children:[n.jsxs("p",{children:["Order: ",new Date(l.order_date).toLocaleDateString()]}),l.scheduled_date&&n.jsxs("p",{children:["Scheduled: ",new Date(l.scheduled_date).toLocaleDateString()]}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Updated: ",m(l.updated_at)]})]})]})]})]}),l.notes&&n.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Order Notes"}),n.jsx("p",{className:"text-gray-700",children:l.notes})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Order Items"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ye,{className:"h-5 w-5 text-gray-400"}),n.jsxs("span",{className:"text-gray-600",children:[((f=l.order_lines)==null?void 0:f.length)||0," item",(((y=l.order_lines)==null?void 0:y.length)||0)!==1?"s":""]})]})]}),l.order_lines&&l.order_lines.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subtotal"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.order_lines.map(C=>{var T,R;return n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:((T=C.product)==null?void 0:T.name)||"Unknown Product"}),n.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",((R=C.product)==null?void 0:R.sku)||"N/A"]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:C.quantity})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:n.jsx("span",{className:"text-sm text-gray-900",children:ge(C.unit_price)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:ge(C.subtotal||C.quantity*C.unit_price)})})]},C.id)})}),n.jsx("tfoot",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("td",{colSpan:3,className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:"Total:"}),n.jsx("td",{className:"px-6 py-4 text-right text-lg font-bold text-gray-900",children:l.total_amount?ge(l.total_amount):ge(l.order_lines.reduce((C,T)=>C+(T.subtotal||T.quantity*T.unit_price),0))})]})})]})}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ye,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No items in this order"})]})]}),i&&n.jsx(cS,{statusHistory:b,currentStatus:l.status})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Summary"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),n.jsx("span",{className:"font-medium text-gray-900",children:ge(((j=l.order_lines)==null?void 0:j.reduce((C,T)=>C+(T.subtotal||T.quantity*T.unit_price),0))||0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Tax:"}),n.jsx("span",{className:"font-medium text-gray-900",children:"$0.00"})]}),n.jsx("div",{className:"border-t border-gray-200 pt-4",children:n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total:"}),n.jsx("span",{className:"text-lg font-bold text-gray-900",children:ge(l.total_amount||0)})]})})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Details"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Account Status:"}),n.jsx("div",{className:"mt-1",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${((E=l.customer)==null?void 0:E.account_status)==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:((P=l.customer)==null?void 0:P.account_status)||"Unknown"})})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Credit Terms:"}),n.jsxs("div",{className:"mt-1 text-sm text-gray-900",children:[((S=l.customer)==null?void 0:S.credit_terms_days)||0," days"]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("button",{onClick:()=>e(`/customers/${l.customer_id}`),className:"w-full text-left px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:"View Customer Profile"}),n.jsx("button",{onClick:()=>window.print(),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md transition-colors",children:"Print Order"}),n.jsx("button",{onClick:()=>{console.log("Duplicate order")},className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md transition-colors",children:"Duplicate Order"})]})]})]})]}),s&&n.jsx(iy,{isOpen:!!s,onClose:()=>r(null),onSubmit:h,order:s.order,newStatus:s.newStatus,loading:d.isPending})]})},uS=({orders:t,onOrderClick:e,onDateChange:s,onReschedule:r})=>{const[i,a]=N.useState(new Date),[l,c]=N.useState(null),o=f=>f.toISOString().split("T")[0],d=f=>f.toLocaleDateString("en-US",{month:"long",year:"numeric"}),u=f=>{const y=f.getFullYear(),j=f.getMonth(),E=new Date(y,j,1),S=new Date(y,j+1,0).getDate(),C=E.getDay(),T=[];for(let R=0;R<C;R++)T.push(null);for(let R=1;R<=S;R++)T.push(new Date(y,j,R));return T},h=f=>{const y=o(f);return t.filter(j=>j.scheduled_date===y)},m=f=>{a(y=>{const j=new Date(y);return f==="prev"?j.setMonth(y.getMonth()-1):j.setMonth(y.getMonth()+1),j})},g=f=>{const y=o(f),j=h(f);c(y),s(y,j)},v=f=>{const y=h(f),j=new Date;return j.setHours(0,0,0,0),y.length===0?"empty":f<j?"past":o(f)===o(j)?"today":"scheduled"},b=f=>{const y=v(f),j=l===o(f),E="min-h-[80px] p-2 border border-gray-200 cursor-pointer transition-colors relative";if(j)return`${E} bg-blue-100 border-blue-300`;switch(y){case"today":return`${E} bg-yellow-50 border-yellow-300 hover:bg-yellow-100`;case"scheduled":return`${E} bg-green-50 border-green-200 hover:bg-green-100`;case"past":return`${E} bg-gray-50 text-gray-500 hover:bg-gray-100`;default:return`${E} hover:bg-gray-50`}},w=u(i),x=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],p=N.useMemo(()=>{if(!l)return[];const f=new Date(l+"T00:00:00");return h(f)},[l,t]);return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Delivery Schedule"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:()=>m("prev"),className:"p-2 hover:bg-gray-100 rounded-md transition-colors",children:n.jsx(jx,{className:"h-4 w-4"})}),n.jsx("span",{className:"text-lg font-medium text-gray-900 min-w-[200px] text-center",children:d(i)}),n.jsx("button",{onClick:()=>m("next"),className:"p-2 hover:bg-gray-100 rounded-md transition-colors",children:n.jsx(_x,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:x.map(f=>n.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500 border-b border-gray-200",children:f},f))}),n.jsx("div",{className:"grid grid-cols-7 gap-1 mb-6",children:w.map((f,y)=>n.jsx("div",{children:f?n.jsxs("div",{className:b(f),onClick:()=>g(f),children:[n.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:f.getDate()}),h(f).length>0&&n.jsxs("div",{className:"space-y-1",children:[h(f).slice(0,2).map(j=>{var E,P;return n.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-1 py-0.5 rounded truncate",title:`${(E=j.customer)==null?void 0:E.name} - ${ge(j.total_amount||0)}`,children:(P=j.customer)==null?void 0:P.name},j.id)}),h(f).length>2&&n.jsxs("div",{className:"text-xs text-gray-500",children:["+",h(f).length-2," more"]})]})]}):n.jsx("div",{className:"min-h-[80px] p-2"})},y))}),l&&p.length>0&&n.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Deliveries for ",new Date(l).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[n.jsx(ec,{className:"h-4 w-4"}),n.jsxs("span",{children:[p.length," deliveries"]})]})]}),n.jsx("div",{className:"space-y-3",children:p.map(f=>{var y,j,E,P;return n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition-colors",onClick:()=>e(f),children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(ye,{className:"h-4 w-4 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:(y=f.customer)==null?void 0:y.name}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[n.jsx(Yt,{className:"h-3 w-3"}),n.jsxs("span",{children:[(j=f.delivery_address)==null?void 0:j.city,", ",(E=f.delivery_address)==null?void 0:E.state]})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-medium text-gray-900",children:ge(f.total_amount||0)}),n.jsxs("div",{className:"text-sm text-gray-600",children:[((P=f.order_lines)==null?void 0:P.length)||0," items"]})]})]},f.id)})}),n.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Cr,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"text-blue-800",children:"Estimated Route Time:"})]}),n.jsxs("span",{className:"font-medium text-blue-900",children:[Math.ceil(p.length*.5)," hours"]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm mt-1",children:[n.jsx("span",{className:"text-blue-800",children:"Total Revenue:"}),n.jsx("span",{className:"font-medium text-blue-900",children:ge(p.reduce((f,y)=>f+(y.total_amount||0),0))})]})]})]})]})},hS=()=>{const t=bt(),[e,s]=N.useState(null),[r,i]=N.useState([]),{data:a}=Dh({status:"scheduled",limit:1e3}),l=(a==null?void 0:a.orders)||[],c=v=>{t(`/orders/${v.id}`)},o=(v,b)=>{s(v),i(b)},d=async(v,b)=>{console.log("Reschedule order",v,"to",b)},u=()=>{const v=new Date().toISOString().split("T")[0];return l.filter(b=>b.scheduled_date===v)},h=()=>{const v=new Date().toISOString().split("T")[0];return l.filter(b=>b.scheduled_date&&b.scheduled_date>v)},m=u(),g=h();return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>t("/orders"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Orders"})]}),n.jsx("div",{className:"text-gray-400",children:"/"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Delivery Schedule"})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:n.jsx(Ee,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Today's Deliveries"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:m.length}),n.jsxs("p",{className:"text-sm text-gray-600",children:[m.reduce((v,b)=>v+(b.total_amount||0),0).toLocaleString("en-US",{style:"currency",currency:"USD"})," total value"]})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:n.jsx(ec,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Deliveries"}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:g.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Next 30 days"})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:n.jsx(ye,{className:"h-6 w-6 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Total Scheduled"}),n.jsx("p",{className:"text-3xl font-bold text-purple-600",children:l.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"All scheduled orders"})]})]})})]}),n.jsx(uS,{orders:l,onOrderClick:c,onDateChange:o,onReschedule:d}),m.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Today's Delivery Route"}),n.jsx("div",{className:"space-y-3",children:m.map((v,b)=>{var w,x,p,f;return n.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg hover:bg-blue-100 cursor-pointer transition-colors",onClick:()=>c(v),children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-medium",children:b+1}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:(w=v.customer)==null?void 0:w.name}),n.jsxs("div",{className:"text-sm text-gray-600",children:[(x=v.delivery_address)==null?void 0:x.city,", ",(p=v.delivery_address)==null?void 0:p.state]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-medium text-gray-900",children:(v.total_amount||0).toLocaleString("en-US",{style:"currency",currency:"USD"})}),n.jsxs("div",{className:"text-sm text-gray-600",children:[((f=v.order_lines)==null?void 0:f.length)||0," items"]})]})]},v.id)})}),n.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Estimated Route Time:"}),n.jsxs("span",{className:"font-medium text-gray-900",children:[Math.ceil(m.length*.5)," hours"]})]}),n.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[n.jsx("span",{className:"text-gray-600",children:"Total Stops:"}),n.jsx("span",{className:"font-medium text-gray-900",children:m.length})]})]})]})]})},mS=({analytics:t,dateRange:e,onDateRangeChange:s})=>{const[r,i]=N.useState("overview"),a=o=>`${o.toFixed(1)}%`,l=o=>({draft:"bg-gray-500",confirmed:"bg-blue-500",scheduled:"bg-purple-500",en_route:"bg-orange-500",delivered:"bg-green-500",invoiced:"bg-teal-500",cancelled:"bg-red-500"})[o]||"bg-gray-500",c=[{id:"overview",label:"Overview",icon:un},{id:"trends",label:"Trends",icon:fn},{id:"customers",label:"Customers",icon:Ga},{id:"products",label:"Products",icon:ye},{id:"delivery",label:"Delivery",icon:Cr}];return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Order Analytics"}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ee,{className:"h-4 w-4 text-gray-400"}),n.jsx("input",{type:"date",value:e.start,onChange:o=>s({...e,start:o.target.value}),className:"text-sm border border-gray-300 rounded px-2 py-1"}),n.jsx("span",{className:"text-gray-500",children:"to"}),n.jsx("input",{type:"date",value:e.end,onChange:o=>s({...e,end:o.target.value}),className:"text-sm border border-gray-300 rounded px-2 py-1"})]})})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"flex space-x-8 px-6",children:c.map(o=>n.jsxs("button",{onClick:()=>i(o.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${r===o.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(o.icon,{className:"h-4 w-4"}),n.jsx("span",{children:o.label})]},o.id))})}),n.jsxs("div",{className:"p-6",children:[r==="overview"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Orders by Status"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx("div",{className:"space-y-3",children:t.orders_by_status.map(o=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${l(o.status)}`}),n.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:o.status.replace("_"," ")})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:o.count}),n.jsxs("span",{className:"text-xs text-gray-500",children:["(",a(o.percentage),")"]})]})]},o.status))}),n.jsx("div",{className:"relative",children:n.jsx("div",{className:"w-48 h-48 mx-auto relative",children:n.jsx("div",{className:"w-full h-full rounded-full bg-gray-200 relative overflow-hidden",children:t.orders_by_status.map((o,d)=>{const u=t.orders_by_status.slice(0,d).reduce((m,g)=>m+g.percentage,0)*3.6,h=o.percentage*3.6;return n.jsx("div",{className:`absolute inset-0 ${l(o.status)} opacity-80`,style:{clipPath:`polygon(50% 50%, ${50+50*Math.cos((u-90)*Math.PI/180)}% ${50+50*Math.sin((u-90)*Math.PI/180)}%, ${50+50*Math.cos((u+h-90)*Math.PI/180)}% ${50+50*Math.sin((u+h-90)*Math.PI/180)}%)`}},o.status)})})})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Delivery Performance"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Cr,{className:"h-5 w-5 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"On-Time Deliveries"})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.delivery_performance.on_time_deliveries}),n.jsxs("div",{className:"text-sm text-green-700",children:[a(t.delivery_performance.on_time_deliveries/(t.delivery_performance.on_time_deliveries+t.delivery_performance.late_deliveries)*100)," success rate"]})]})]}),n.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Cr,{className:"h-5 w-5 text-red-600"}),n.jsx("span",{className:"text-sm font-medium text-red-900",children:"Late Deliveries"})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("div",{className:"text-2xl font-bold text-red-900",children:t.delivery_performance.late_deliveries}),n.jsx("div",{className:"text-sm text-red-700",children:"Need attention"})]})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(fn,{className:"h-5 w-5 text-blue-600"}),n.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Avg Fulfillment"})]}),n.jsxs("div",{className:"mt-2",children:[n.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[t.delivery_performance.avg_fulfillment_time,"h"]}),n.jsx("div",{className:"text-sm text-blue-700",children:"Average time"})]})]})]})]})]}),r==="trends"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Daily Order Trends"}),n.jsx("div",{className:"space-y-4",children:t.daily_trends.slice(-7).map(o=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:new Date(o.date).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),n.jsxs("div",{className:"text-sm text-gray-600",children:[o.orders," orders"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-medium text-gray-900",children:ge(o.revenue)}),n.jsxs("div",{className:"text-sm text-gray-600",children:[ge(o.revenue/(o.orders||1))," avg"]})]})]},o.date))})]}),r==="customers"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Top Customers"}),n.jsx("div",{className:"space-y-3",children:t.top_customers.map((o,d)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsxs("span",{className:"text-sm font-medium text-blue-600",children:["#",d+1]})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:o.customer_name}),n.jsxs("div",{className:"text-sm text-gray-600",children:[o.order_count," orders"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-medium text-gray-900",children:ge(o.total_revenue)}),n.jsxs("div",{className:"text-sm text-gray-600",children:[ge(o.total_revenue/o.order_count)," avg"]})]})]},o.customer_id))})]}),r==="products"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Top Products"}),n.jsx("div",{className:"space-y-3",children:t.top_products.map((o,d)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsxs("span",{className:"text-sm font-medium text-green-600",children:["#",d+1]})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:o.product_name}),n.jsxs("div",{className:"text-sm text-gray-600",children:[o.quantity_sold," units sold"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-medium text-gray-900",children:ge(o.revenue)}),n.jsxs("div",{className:"text-sm text-gray-600",children:[ge(o.revenue/o.quantity_sold)," per unit"]})]})]},o.product_id))})]}),r==="delivery"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Regional Breakdown"}),n.jsx("div",{className:"space-y-3",children:t.regional_breakdown.map((o,d)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Yt,{className:"h-5 w-5 text-gray-400"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:o.region}),n.jsxs("div",{className:"text-sm text-gray-600",children:[o.order_count," orders"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-medium text-gray-900",children:ge(o.revenue)}),n.jsxs("div",{className:"text-sm text-gray-600",children:[ge(o.revenue/o.order_count)," avg"]})]})]},o.region))})]})]})]})]})},fS=()=>{const t=bt(),[e,s]=N.useState({start:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),{data:r}=Dh({order_date_from:e.start,order_date_to:e.end,limit:1e4}),i=(r==null?void 0:r.orders)||[],a=N.useMemo(()=>{const c=i.reduce((y,j)=>(y[j.status]=(y[j.status]||0)+1,y),{}),o=i.length,d=Object.entries(c).map(([y,j])=>({status:y,count:j,percentage:o>0?j/o*100:0})),u=i.reduce((y,j)=>{const E=j.order_date;return y[E]||(y[E]={orders:0,revenue:0}),y[E].orders+=1,y[E].revenue+=j.total_amount||0,y},{}),h=Object.entries(u).map(([y,j])=>({date:y,orders:j.orders,revenue:j.revenue})).sort((y,j)=>y.date.localeCompare(j.date)),m=i.reduce((y,j)=>{var S;const E=j.customer_id,P=((S=j.customer)==null?void 0:S.name)||"Unknown";return y[E]||(y[E]={customer_name:P,order_count:0,total_revenue:0}),y[E].order_count+=1,y[E].total_revenue+=j.total_amount||0,y},{}),g=Object.entries(m).map(([y,j])=>({customer_id:y,...j})).sort((y,j)=>j.total_revenue-y.total_revenue).slice(0,10),v=i.reduce((y,j)=>{var E;return(E=j.order_lines)==null||E.forEach(P=>{var T;const S=P.product_id,C=((T=P.product)==null?void 0:T.name)||"Unknown";y[S]||(y[S]={product_name:C,quantity_sold:0,revenue:0}),y[S].quantity_sold+=P.quantity,y[S].revenue+=P.subtotal||P.quantity*P.unit_price}),y},{}),b=Object.entries(v).map(([y,j])=>({product_id:y,...j})).sort((y,j)=>j.revenue-y.revenue).slice(0,10),w=i.filter(y=>y.status==="delivered"),x={on_time_deliveries:Math.floor(w.length*.85),late_deliveries:Math.floor(w.length*.15),avg_fulfillment_time:48},p=i.reduce((y,j)=>{var P;const E=((P=j.delivery_address)==null?void 0:P.city)||"Unknown";return y[E]||(y[E]={order_count:0,revenue:0}),y[E].order_count+=1,y[E].revenue+=j.total_amount||0,y},{}),f=Object.entries(p).map(([y,j])=>({region:y,...j})).sort((y,j)=>j.revenue-y.revenue).slice(0,10);return{orders_by_status:d,daily_trends:h,top_customers:g,top_products:b,delivery_performance:x,regional_breakdown:f}},[i]),l=()=>{const c=[["Date Range",`${e.start} to ${e.end}`],["Total Orders",i.length.toString()],["Total Revenue",i.reduce((h,m)=>h+(m.total_amount||0),0).toString()],[],["Status","Count","Percentage"],...a.orders_by_status.map(h=>[h.status,h.count.toString(),`${h.percentage.toFixed(1)}%`]),[],["Top Customers","Orders","Revenue"],...a.top_customers.map(h=>[h.customer_name,h.order_count.toString(),h.total_revenue.toString()])].map(h=>h.join(",")).join(`
`),o=new Blob([c],{type:"text/csv"}),d=window.URL.createObjectURL(o),u=document.createElement("a");u.href=d,u.download=`order-report-${e.start}-to-${e.end}.csv`,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(d)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>t("/orders"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(Ge,{className:"h-4 w-4"}),n.jsx("span",{children:"Back to Orders"})]}),n.jsx("div",{className:"text-gray-400",children:"/"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Order Reports & Analytics"})]}),n.jsx("div",{className:"flex items-center space-x-3",children:n.jsxs("button",{onClick:l,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(Sh,{className:"h-4 w-4"}),n.jsx("span",{children:"Export Report"})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(un,{className:"h-8 w-8 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ee,{className:"h-8 w-8 text-green-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.reduce((c,o)=>c+(o.total_amount||0),0).toLocaleString("en-US",{style:"currency",currency:"USD"})})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(un,{className:"h-8 w-8 text-purple-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length>0?(i.reduce((c,o)=>c+(o.total_amount||0),0)/i.length).toLocaleString("en-US",{style:"currency",currency:"USD"}):"$0"})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ee,{className:"h-8 w-8 text-orange-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Completion Rate"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length>0?`${(i.filter(c=>["delivered","invoiced"].includes(c.status)).length/i.length*100).toFixed(1)}%`:"0%"})]})]})})]}),n.jsx(mS,{analytics:a,dateRange:e,onDateRangeChange:s})]})},pS=new dj({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});function gS(){return n.jsx(gj,{client:pS,children:n.jsxs(C1,{children:[n.jsx(Mw,{children:n.jsxs(Rw,{children:[n.jsx(We,{path:"/login",element:n.jsx(e2,{})}),n.jsxs(We,{path:"/*",element:n.jsx(G1,{children:n.jsx(Z1,{})}),children:[n.jsx(We,{index:!0,element:n.jsx(r2,{})}),n.jsx(We,{path:"customers",element:n.jsx(I2,{})}),n.jsx(We,{path:"customers/:id",element:n.jsx(B2,{})}),n.jsx(We,{path:"products",element:n.jsx(tk,{})}),n.jsx(We,{path:"products/:id",element:n.jsx(yk,{})}),n.jsx(We,{path:"warehouses",element:n.jsx(Ek,{})}),n.jsx(We,{path:"warehouses/:id",element:n.jsx(Rk,{})}),n.jsx(We,{path:"inventory",element:n.jsx($k,{})}),n.jsx(We,{path:"pricing",element:n.jsx(zk,{})}),n.jsx(We,{path:"pricing/:id",element:n.jsx(Wk,{})}),n.jsx(We,{path:"orders",element:n.jsx(lS,{})}),n.jsx(We,{path:"orders/new",element:n.jsx(oS,{})}),n.jsx(We,{path:"orders/schedule",element:n.jsx(hS,{})}),n.jsx(We,{path:"orders/reports",element:n.jsx(fS,{})}),n.jsx(We,{path:"orders/:id",element:n.jsx(dS,{})})]})]})}),n.jsx(d_,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}fg(document.getElementById("root")).render(n.jsx(N.StrictMode,{children:n.jsx(gS,{})}));
